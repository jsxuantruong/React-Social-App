{"version":3,"sources":["../node_modules/cloudinary/lib-es5/utils sync","contants/index.js","helpers/media/index.js","redux/actions/authActions.js","redux/actions/callActions.js","redux/actions/chatActions.js","redux/actions/commentActions.js","redux/actions/createRoomChatActions.js","redux/actions/friendRequestActions.js","redux/actions/globalActions.js","redux/actions/messageActions.js","redux/actions/networkActions.js","redux/actions/notifycationActions.js","redux/actions/peerActions.js","redux/actions/postActions.js","redux/actions/profileActions.js","helpers/formatTime.js","hooks/useFormatTime.js","components/statusActive/StatusActive.jsx","config/cloudinary.js","helpers/image.js","hooks/useCheckOnline.js","components/avatar/Avatar.jsx","components/modalCreateCall/ModalCreateCall.jsx","components/MessagePretty/MessagePretty.jsx","components/modalInviteCall/ModalInviteCall.jsx","config/axiosInstance .js","api/fetchData.js","components/modalCall/CardFriend.jsx","components/modalCall/InviteFriend.jsx","components/modalCall/NavModalCall.jsx","components/modalCall/ModalCall.jsx","api/authApi.js","components/displayimg/DisplayImg.jsx","components/chooseImage/ChooseImage.jsx","components/modal/ModalChooseImage.jsx","components/conversation/Conversation.jsx","components/ModalCreateRoomChat/ModalCreateRoomChat.jsx","pages/messenger/Call.jsx","pages/messenger/DisplayImageMessage.jsx","pages/messenger/CreateMessage.jsx","pages/messenger/DisplayMessageContent.jsx","pages/messenger/DisplayMessage.jsx","pages/messenger/Typing.jsx","helpers/index.js","pages/messenger/ChatRoom.jsx","pages/messenger/OptionsMessage.jsx","pages/messenger/Messenger.jsx","components/topbar/IconMessage.jsx","components/notification/NotificationAction.jsx","components/notification/DisplayNotification.jsx","helpers/debounceFunction.js","components/notification/MenuNotifycation.jsx","components/notification/Notification.jsx","components/topbar/IconNotifycation.jsx","components/friendRequest/ButtonActionsFriendRequest.jsx","components/friendRequest/FriendRequest.jsx","components/friendRequest/DisplayFriendRequest.jsx","components/topbar/BoxFriendRequests.jsx","components/topbar/IconPerson.jsx","components/topbar/SeachUser.jsx","components/topbar/Topbar.jsx","components/UpdateImage/UpdateImage.jsx","components/buttonSocials/ButtonSocials.jsx","pages/profile/ProfileLeft.jsx","pages/profile/EditProfile.jsx","pages/profile/DisplayDetailInfo.jsx","pages/profile/AboutProfile.jsx","components/Carousel/Carousel.jsx","pages/profile/DisplayFriendList.jsx","pages/profile/NavProfile.jsx","pages/profile/ButtonFollow.jsx","components/modal/ModalConfirmDelete.jsx","pages/profile/ButtonFriend.jsx","pages/profile/ButtonMessage.jsx","pages/profile/ProfileButtonActions.jsx","pages/profile/ProfileRight.jsx","components/ShowError/ShowError.jsx","helpers/createKeyUser.js","pages/register/Register.jsx","pages/notFound/NotFound.jsx","components/userSuggestion/UserSuggestion.jsx","components/sidebar/Sidebar.jsx","components/comment/CommentCrud.jsx","components/comment/CommentInfo.jsx","components/commentReply/CommentReply.jsx","components/form/createComment/CreateComment.jsx","components/comment/Comment.jsx","components/modal/ModalEditPost.jsx","components/post/CrudPost.jsx","components/post/Post.jsx","components/share/Share.jsx","components/feed/GetMorePost.jsx","components/feed/Feed.jsx","components/friend/Friend.jsx","components/rightbar/Rightbar.jsx","components/Layout/ProtectLayOut/index.jsx","pages/post/PostPage.jsx","routes/index.js","pages/login/Login.jsx","pages/home/Home.jsx","pages/profile/Profile.jsx","App.js","redux/reducers/authReducer.js","redux/reducers/callReducer.js","redux/reducers/chatReducer.js","redux/reducers/commentReducer.js","redux/reducers/createRoomChatReducer.js","redux/reducers/friendRequestReducer.js","redux/reducers/globalReducer.js","redux/reducers/messageReducer.js","redux/reducers/networkReducer.js","redux/reducers/notifycationReducer.js","redux/reducers/peerReducer.js","redux/reducers/postReducer.js","redux/reducers/profileReducer.js","redux/reducers/index.js","redux/store.js","components/GlobalStyles/index.jsx","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","ACCESS_TOKEN","REFRESH_TOKEN","URL_BE","PUBLIC_FOLDER","SOCKET_SERVER","addClass","nameClass","element","split","forEach","el","classList","add","replaceClass","class1","class2","contains","replace","openStream","isVideo","config","video","audio","navigator","mediaDevices","getUserMedia","findStream","streamId","Array","from","document","querySelectorAll","find","getAttribute","addVideoStream","stream","isYou","divEl","createElement","imgEl","style","display","setAttribute","iEl","srcObject","addEventListener","play","onclick","videoPinCurent","querySelector","remove","iconVideoPin","target","append","handleUpdateUserCamera","data","img","videoEl","pause","src","LOGIN_SUCCESS","LOGIN_FAILED","LOADING_START","LOADING_END","UPDATE_USER","UN_FOLLOW","FOLLOW","UPDATE_BACKGROUND_USER","UPDATE_AVATAR_USER","ADD_FRIEND","REMOVE_FRIEND","USER_LOGOUT","SET_CALL","END_CALL","SET_IS_ANSWER","SET_FRIEND_INVITES","REFUSE_INVITE","SET_ACCEPT_INVITE","SET_USER_STREAM","SET_IS_COMPLETE","UPDATE_CONVERSATION","UPDATE_LAST_MESSAGE","UPDATE_STATUS_CONVERSATION","SET_STATUS_CONVERSATION","SET_CHAT","SET_LIST_CONVERSATION","SET_CONVERSATION_CHAT","SET_IS_SHOW","UPDATE_CONVERSATION_DISPLAYS","UPDATE_FRIEND_CHAT","ADD_CONVERSATION","SET_NUMBER_UNREAD","INCREASE_NUMBER_UNREAD","DECREASE_NUMBER_UNREAD","UPDATE_READ_CONVERSATION","SET_NEW_CONVERSATION_CHAT","UPDATE_ID_COMMENT","SET_CREATE_ROOM","ADD_FRIEND_TO_ROOM","REMOVE_FRIEND_TO_ROOM","SET_LIST_FRIEND","RESET_CREATE_ROOM","SET_TYPE","SET_LIST_FRIEND_REQUEST","ADD_LIST_FRIEND_REQUEST","REMOVE_FRIEND_REQUEST","INCREASE_NUMBER_FRIEND_REQUEST","SET_NUMBER_FRIEND_REQUEST","SET_ELEMENT_CLICK","SET_FILES","ADD_FILE","REMOVE_FILE","SET_SOCKET","SET_USERS_ONLINE","ADD_USER_ONLINE","REMOVE_USER_OFFLINE","RESET_NETWORK","SET_LIST_NOTIFICATION","ADD_NOTIFICATION","SET_NUMBER_NOTIFICATION_UNREAD","INCREASE_NUMBER_NOTIFICATION_UNREAD","DECREASE_NUMBER_NOTIFICATION_UNREAD","SET_SHOW_NOTIFICATION","REMOVE_NOTIFICATION","SET_TYPE_NOTIFICATION","SET_NOTIFICATIONs_DISPLAY","REMOVE_ALL_NOTIFICATION","UPDATE_LIST_CONVERSATION","ADD_NOTIFICATION_DISPLAY","SET_SHOW_NOTIFICATION_MENU","SET_PEER","UPDATE_INFO_GET_POST","LOADING_POST_END","SET_STATUS_FRIEND","SET_USER_PROFILE","SET_IS_ME","value","slice","timeFormat","format","idx","indexOf","useFormatTime","user","useMemo","lastLogin","formatTime","StatusActive","isOnline","time","padding","className","cloudinary","require","cloud_name","api_key","api_secret","imageUpload","images","Promise","all","map","image","formData","FormData","camera","url","axios","post","responses","public_id","removeImage","uploader","destroy","error","err","useCheckOnline","isLog","useState","setIsOnline","usersOnline","useSelector","state","network","userCurrent","auth","useEffect","_id","length","includes","Avatar","isStatus","width","height","link","isShowOffline","status","setStatus","friends","profilePicture","displayAvatar","to","alt","ModalCreateCall","socket","call","userSendCall","isSenderCall","isAnswer","roomCallId","conversationId","peer","dispatch","useDispatch","handleAnswer","type","payload","emit","userReceiveCall","peerId","isCreate","userName","console","log","onClick","userRefuseId","receiverId","MessagePretty","mess","ModalInviteCall","countTime","setCountTime","handleRefuseInvite","handleCountTime","prev","timer","setTimeout","clearTimeout","handleJoinCall","instance","create","baseURL","isTimeExpire","token","date","Date","jwt_decode","exp","getTime","getToken","nameToken","localStorage","getItem","JSON","parse","refreshTokenRequest","handleRefreshToken","refreshToken","response","interceptors","request","use","accessToken","newAccessToken","setItem","stringify","headers","reject","message","toast","autoClose","getDataAPI","axiosInstance","get","res","postDataAPI","putDataAPI","put","patchDataAPI","patch","deleteDataAPI","delete","CardFriend","friend","isDisable","setIsDisable","timeRemaining","useRef","current","friendId","info","sender","InviteFriend","userCall","fristLoadFriends","friendInvites","isMount","handleFetchFriends","filter","settings","dots","infinite","speed","slidesToShow","slidesToScroll","body","NavModalCall","CallModal","hours","setHours","mins","setMins","second","setSecond","total","setTotal","isMic","setIsMic","isOpenVideo","setOpenVideo","userReciverCall","userStream","parseInt","on","answer","remoteStream","removeListener","timerId","setInterval","clearInterval","handleSendStream","off","handleUserCallOut","handleNotify","isClose","userCallId","userSendCallId","toogleStream","track","getTracks","kind","enabled","toString","stop","userOutCallId","defaults","login","userInfo","navigate","success","register","Displayimg","file","setImages","setFiles","URL","createObjectURL","item","uuid","Cancel","ChooseImage","setIsTakePhoto","isTakePhoto","files","multiple","videoRef","canvasRef","videoStream","setVideoStream","useFrontCamera","setUseFrontCamera","notify","setNotify","isStop","setIsStop","constraints","min","ideal","max","stopVideoStream","init","facingMode","videoWidth","videoHeight","getContext","drawImage","toDataURL","uuidv4","ref","htmlFor","PermMedia","htmlColor","accept","onChange","ModalChooseImage","text","typeImage","onSave","tabIndex","role","Conversation","conversation","reads","members","isMultiple","name","listMembers","nameConversation","setMessage","isRead","setIsRead","lastMessage","setLastMessage","chat","lastMessageConversation","statusConversations","handeGetInfoMembers","listMemberIds","memberId","handleSetImgConversation","key","listImages","ids","i","check","idxRamdom","Math","floor","random","push","member","isNotify","senderId","handleGetName","ModalCreateRoomChat","setFile","nameRef","descRef","createRoomChat","friendAdds","handleCloseModal","handleSubmit","desc","placeholder","required","Call","friendChat","conversationChat","isCall","roomCall","isNext","userJoinCallId","userSenderCall","DisplayImageMessage","CreateMessage","createNewMessage","isTyping","setIsTyping","messageRef","focus","onSubmit","preventDefault","onBlur","DisplayMessageContent","setUser","userSend","DisplayMessage","updateConversation","messages","setMessages","scrollIntoView","behavior","block","inline","removeMessage","newLastMessage","newMessage","receverId","moment","createdAt","isDeleted","Typing","isEmail","email","test","checkExit","array","checkMinLength","val","addElment","callback","ChatRoom","hasTyping","setHasTyping","handleSetTyping","updateListMessage","updateFriendConversation","userDisconnectId","getMessages","handleReceiveMessage","messageCreate","receivers","substring","OptionsMessage","number","setNumber","listConversation","numberSet","reduce","prevState","Messenger","conversationDisplays","setConversationDisplays","isShowConversationPending","getConversations","conversations","userId","handleChosseCurrentChat","dataUpdate","isChangeType","Object","entries","IconMessage","isChat","conversationUnReads","elClick","global","updateNumberConversationUnRead","Chat","NotificationAction","notification","handleRemoveNotification","handleUnReadNotification","newNotification","readNotification","DisplayNotifycation","useNavigate","fetchUser","updateReadNotification","timeago","debounce","delay","rest","MenuNotifycation","isShowMenu","listNotifycation","setNotifications","removeAllNotification","readAllNotification","notifications","Notification","notificationDisplays","updateListNotification","animation","animationFillMode","DisplayNotification","IconNotification","isShow","notifyRef","updateNumberNotification","getConversation","getNumberNotificationNotRead","Notifications","cursor","ButtonActionsFriendRequest","friendRequest","acceptFriendRequest","friendRequestId","refuseFriendRequest","deleteFriendRequest","sendToFriendRequest","responseCreateNotification","FriendRequest","handleGetUser","DisplayFriendRequest","listFriendRequest","getFriendRequest","friendRequests","BoxFriendRequests","IconPerson","isShowFriendRequests","setIsShowFriendRequests","numberFriendRequest","divRef","Person","SeachUser","usersSearch","setUsersSearch","isShowUsersSearch","setIsShowUsersSearch","searchInputRef","searchRef","handleSearchUsers","users","Search","onFocus","Topbar","setFirstShowNotification","getNumberFriendRequest","updateNumberFriendRequest","handleUpdateNotification","getNumberConversationUnWatch","textDecoration","IconNotifycation","UpdateImage","ButtonSocials","ProfileLeft","idAvatar","userProfile","profile","followers","followings","EditProfile","onEdit","phoneRef","addressRef","relationshipRef","updateUser","phone","address","relationship","userUpdate","defaultValue","disabled","selected","DisplayDetailInfo","AboutProfile","isEditInfo","setIsEditInfo","Carousel","children","setup","lazyLoad","responsive","breakpoint","initialSlide","DisplayFriendList","friendList","setFriendList","NavProfile","option","setOption","toUpperCase","ButtonFollow","followed","setFollowed","handleClick","ModalConfirmDelete","onRemove","ButtonFriend","setFriendRequest","statusFriend","setStatusFriend","isFriend","idModalRemoveFriendRequest","idModal","addListFriend","removeListFriend","updateStatus","handleCheckStatusFriend","friendRequestDb","handleSetStatusFriend","createFriendRequest","removeFriendRequest","unFriend","ButtonMessage","isClick","setIsClick","handleSetConversationChat","ProfileButtonAction","isMe","ProfileRight","ProfileButtonActions","ShowError","generateKeywords","displayName","word","flagArray","result","stringArray","findPermutation","k","join","keywords","acc","cur","words","arrName","curName","letter","createKeywords","initValue","password","passwordAgain","Register","infoRegister","setInfoRegister","errors","setErrors","isLoading","handleChangeInput","isValid","newErrors","warn","minLength","maxLength","CircularProgress","color","justifyContent","NotFound","UserSuggestion","Sidebar","usersSuggestion","setUsersSuggestion","getUsersSuggestion","RssFeed","PlayCircleFilledOutlined","Group","Bookmark","HelpOutline","WorkOutline","Event","School","CommentCrud","setIsEdit","CommentInfo","comment","isEdit","setText","handleReset","updateComment","newImages","imagesRemove","newImage","responseImages","newComment","postId","userPost","autoFocus","DisplayImg","CommentReply","commentReply","setCommentsReply","like","setLike","isCrudComment","setIsCrudComment","isLiked","setIsLiked","likes","handleCheckClick","removeEventListener","likeHandler","handleRemoveCommnetReply","onRemoveComment","CreateComment","onCreateComment","commentRef","Comment","setComments","isShowCommentsReply","setIsShowCommentsReply","commentsReply","idComment","idCreateComment","handleGetCommentReply","comments","handleCreateCommentReply","commentInfo","commentReplyId","handleRemoveComment","commentId","commentPost","newIdComment","ModalEditPost","setPosts","setDesc","updatePost","newPost","userFollowings","handleClose","Modal","show","onHide","Header","closeButton","Title","Body","row","Footer","Button","variant","CrudPost","Post","isShowComment","setIsShowComment","isCrudPost","setIsCrudPost","idPostOpen","getComments","handleUpdateLikePost","handleUpdateCmtPost","handleCreateComment","handleRemovePost","newIdPostOpen","Share","shareing","setShearing","handleCreatePost","userFollowingId","dataEmit","border","outline","backgroundColor","Label","Room","EmojiEmotions","GetMorePost","postsLength","limit","observer","IntersectionObserver","entry","isIntersecting","skip","isLoadingPost","observe","unobserve","Feed","posts","isMaxPost","handleUpdateFeed","postFeed","fetchPosts","newPosts","p","Friend","Rightbar","updateFriendList","online","friendsUpdateStatus","HomeRightbar","ProfileRightbar","Remove","Add","city","relationships","ProtectLayOut","isLogin","setIslogin","PostPage","useParams","setPost","fetchPost","publicRoutes","path","component","layout","userNameRef","passwordRef","size","privateRoutes","idBgc","handleUpload","dataImage","backgroundImage","coverPicture","App","firstConnect","firstGetData","window","handleConnectCall","Peer","undefined","host","port","addUserOnline","userLoginId","removeUserOffline","handleSetUserOnline","allUser","usersFollowOnline","followingiD","io","route","Layout","Fragment","Page","ModalCall","initialState","authReducer","action","idUserFollow","isComplete","networkReducer","chatReducer","newInfo","conversationAccepts","isExit","conversationPendings","commentReducer","createRoomChatReducer","friendRequestReducer","peerReducer","postReducer","rootReducer","globalReducer","messageReducer","notifycationReducer","profileReducer","callReducer","composeEnhancers","composeWithDevTools","applyMiddleware","thunk","createStore","GlobalStyles","ReactDOM","render","store","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.23f7c1c5.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 605;","const ACCESS_TOKEN = 'access_token';\r\nconst REFRESH_TOKEN = 'refresh_token';\r\n\r\nconst URL_BE = 'https://codernoob-be.onrender.com/'\r\nconst PUBLIC_FOLDER = URL_BE + 'images/'\r\nconst SOCKET_SERVER = 'https://codernoob-sv-socket.onrender.com'\r\n\r\nconst CLOUD_NAME = 'ko-c'\r\nconst API_KEY = '859769854664576'\r\nconst API_SECRET = '4IajgOMmiGtm4j3D-kz7AhqyiCw'\r\n\r\n\r\nexport { ACCESS_TOKEN, REFRESH_TOKEN, URL_BE, PUBLIC_FOLDER, SOCKET_SERVER, CLOUD_NAME, API_KEY, API_SECRET };\r\n\r\n","import { v4 as uuidv4 } from \"uuid\";\n\nexport const addClass = (nameClass, element) => {\n  const array = nameClass.split(\" \");\n\n  array.forEach((el) => {\n    element.classList.add(el);\n  });\n};\n\nexport const replaceClass = (class1, class2, el) => {\n  if (el.classList.contains(class1)) {\n    el.classList.replace(class1, class2);\n  } else {\n    el.classList.replace(class2, class1);\n  }\n};\n\nexport const openStream = (isVideo) => {\n  const config = {\n    video: isVideo,\n    audio: true,\n  };\n\n  return navigator.mediaDevices.getUserMedia(config);\n};\n\nexport const findStream = (streamId) => {\n  const listVideoContainer = Array.from(document.querySelectorAll(`.video`));\n\n  return listVideoContainer.find(\n    (el) => el.getAttribute(\"streamId\") === streamId\n  );\n};\n\nexport const addVideoStream = (stream, isYou = false) => {\n  if (!stream) return;\n\n  const divStream = findStream(stream.id);\n\n  if (divStream) return;\n\n  const divEl = document.createElement(\"div\");\n  const imgEl = document.createElement(\"img\");\n  imgEl.style.display = \"none\";\n  divEl.setAttribute(\"streamId\", stream?.id);\n  const iEl = document.createElement(\"i\");\n  addClass(\"fa-solid fa-thumbtack icon_video\", iEl);\n  divEl.classList.add(\"video\");\n\n  if (isYou) {\n    divEl.classList.add(\"you_video\");\n  }\n\n  const video = document.createElement(\"video\");\n  video.srcObject = stream;\n  video.addEventListener(\"loadedmetadata\", () => {\n    video.play();\n  });\n\n  iEl.onclick = (e) => {\n    const videoPinCurent = document.querySelector(\".video.pin\");\n\n    if (iEl.classList.contains(\"fa-thumbtack\")) {\n      if (videoPinCurent) {\n        videoPinCurent.classList.remove(\"pin\");\n        const iconVideoPin = videoPinCurent.querySelector(\".icon_video\");\n        replaceClass(\"fa-thumbtack\", \"fa-circle-xmark\", iconVideoPin);\n      }\n      divEl.classList.add(\"pin\");\n    } else {\n      divEl.classList.remove(\"pin\");\n    }\n    replaceClass(\"fa-thumbtack\", \"fa-circle-xmark\", e.target);\n  };\n\n  divEl.append(video);\n  divEl.append(imgEl);\n  divEl.append(iEl);\n\n  document.querySelector(\".video-joins\").append(divEl);\n};\n\nexport const playStream = (video, stream) => {\n  if (!video) return;\n  video.srcObject = stream;\n  video.play();\n  if (!video.uuid) {\n    video.uuid = uuidv4();\n  }\n};\n\nexport const handleUpdateUserCamera = (data) => {\n  const { img, streamId } = data;\n  const divEl = findStream(streamId);\n\n  if (divEl) {\n    const videoEl = divEl.querySelector(\"video\");\n    const imgEl = divEl.querySelector(\"img\");\n\n    if (videoEl && imgEl) {\n      if (img) {\n        videoEl.style.display = \"none\";\n        videoEl.pause();\n        imgEl.src = img;\n        imgEl.style.display = \"block\";\n      } else {\n        videoEl.style.display = \"block\";\n        videoEl.play();\n        imgEl.src = \"\";\n        imgEl.style.display = \"none\";\n      }\n    }\n  }\n};\n","// auth\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_START = \"LOGIN_START\";\nexport const LOGIN_FAILED = \"LOGIN_FAILED\";\n\n\nexport const LOADING_START = \"LOADING_START\";\nexport const LOADING_END = \"LOADING_END\";\n\n// user\nexport const UPDATE_USER = \"UPDATE_USER\";\nexport const UN_FOLLOW = \"UN_FOLLOW\";\nexport const FOLLOW = \"FOLLOW\";\nexport const UPDATE_BACKGROUND_USER = \"UPDATE_BACKGROUND_USER\";\nexport const UPDATE_AVATAR_USER = \"UPDATE_AVATAR_USER\";\nexport const ADD_FRIEND = \"ADD_FRIEND\";\nexport const REMOVE_FRIEND = \"REMOVE_FRIEND\";\nexport const USER_LOGOUT = \"USER_LOGOUT\";\n","export const SET_CALL = \"SET_CALL\";\nexport const END_CALL = \"END_CALL\";\nexport const SET_IS_ANSWER = \"SET_IS_ANSWER\";\nexport const SET_IS_MIC = \"SET_IS_MIC\";\nexport const SET_FRIEND_INVITES = \"SET_FRIEND_INVITES\";\nexport const SET_INFO_INVITE = \"SET_INFO_INVITE\";\nexport const SET_IS_INVITED = \"SET_IS_INVITED\";\nexport const REFUSE_INVITE = \"REFUSE_INVITE\";\nexport const SET_ACCEPT_INVITE = \"SET_ACCEPT_INVITE\";\nexport const SET_USER_STREAM = \"SET_USER_STREAM\";\nexport const SET_IS_COMPLETE = \"SET_IS_COMPLETE\";\nexport const UPDATE_CONVERSATION = \"UPDATE_CONVERSATION\";\n","//chat\nexport const UPDATE_LAST_MESSAGE = \"UPDATE_LAST_MESSAGE\";\nexport const UPDATE_STATUS_CONVERSATION = \"UPDATE_STATUS_CONVERSATION\";\nexport const SET_STATUS_CONVERSATION = \"SET_STATUS_CONVERSATION\";\nexport const SET_CHAT = \"SET_CHAT\";\nexport const SET_LIST_CONVERSATION = \"SET_LIST_CONVERSATION\";\nexport const ADD_STATUS_CONVERSATION = \"ADD_STATUS_CONVERSATION\";\nexport const SET_CONVERSATION_CHAT = \"SET_CONVERSATION_CHAT\";\nexport const SET_IS_SHOW = \"SET_IS_SHOW\";\nexport const DISPLAY_CONVERSATION_ACCEPTS = \"DISPLAY_CONVERSATION_ACCEPTS\";\nexport const UPDATE_CONVERSATION_DISPLAYS = \"UPDATE_CONVERSATION_DISPLAYS\";\nexport const UPDATE_FRIEND_CHAT = \"UPDATE_FRIEND_CHAT\";\n\nexport const ADD_CONVERSATION_ACCEPTS = \"ADD_CONVERSATION_ACCEPTS\";\nexport const ADD_CONVERSATION_PENDINGS = \"ADD_CONVERSATION_PENDINGS\";\nexport const ADD_CONVERSATION = \"ADD_CONVERSATION\";\n\nexport const SET_NUMBER_UNREAD = \"SET_NUMBER_UNREAD\";\nexport const INCREASE_NUMBER_UNREAD = \"INCREASE_NUMBER_UNREAD\";\nexport const DECREASE_NUMBER_UNREAD = \"DECREASE_NUMBER_UNREAD\";\n\nexport const UPDATE_READ_CONVERSATION = \"UPDATE_READ_CONVERSATION\";\nexport const SET_NEW_CONVERSATION_CHAT = \"SET_NEW_CONVERSATION_CHAT\";\n","export const UPDATE_ID_COMMENT = \"UPDATE_ID_COMMENT\";\n","export const SET_CREATE_ROOM = \"SET_CREATE_ROOM\";\nexport const ADD_FRIEND_TO_ROOM = \"ADD_FRIEND_TO_ROOM\";\nexport const REMOVE_FRIEND_TO_ROOM = \"REMOVE_FRIEND_TO_ROOM\";\nexport const SET_LIST_FRIEND = \"SET_LIST_FRIEND\";\nexport const RESET_CREATE_ROOM = \"RESET_CREATE_ROOM\";\n","//Friend Request\nexport const SET_TYPE = \"SET_TYPE\";\nexport const SET_LIST_FRIEND_REQUEST = \"SET_LIST_FRIEND_REQUEST\";\nexport const ADD_LIST_FRIEND_REQUEST = \"ADD_LIST_FRIEND_REQUEST\";\nexport const REMOVE_FRIEND_REQUEST = \"REMOVE_FRIEND_REQUEST\";\nexport const INCREASE_NUMBER_FRIEND_REQUEST = \"INCREASE_NUMBER_FRIEND_REQUEST\";\nexport const SET_NUMBER_FRIEND_REQUEST = \"SET_NUMBER_FRIEND_REQUEST\";\n","export const SET_ELEMENT_CLICK = \"SET_ELEMENT_CLICK\";\r\n","//message\nexport const SET_FILES = \"SET_FILES\";\nexport const ADD_FILE = \"ADD_FILE\";\nexport const REMOVE_FILE = \"REMOVE_FILE\";\n","//network\nexport const SET_SOCKET = \"SET_SOCKET\";\nexport const SET_USERS_ONLINE = \"SET_USERS_ONLINE\";\nexport const ADD_USER_ONLINE = \"ADD_USER_ONLINE\";\nexport const REMOVE_USER_OFFLINE = \"REMOVE_USER_OFFLINE\";\nexport const RESET_NETWORK = \"RESET_NETWORK\";\n","//chat\nexport const SET_LIST_NOTIFICATION = \"SET_LIST_NOTIFICATION\";\nexport const ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\nexport const SET_NUMBER_NOTIFICATION_UNREAD = \"SET_NUMBER_NOTIFICATION_UNREAD\";\nexport const INCREASE_NUMBER_NOTIFICATION_UNREAD =\n  \"INCREASE_NUMBER_NOTIFICATION_UNREAD\";\nexport const DECREASE_NUMBER_NOTIFICATION_UNREAD =\n  \"DECREASE_NUMBER_NOTIFICATION_UNREAD\";\nexport const SET_SHOW_NOTIFICATION = \"SET_SHOW_NOTIFICATION\";\nexport const REMOVE_NOTIFICATION = \"REMOVE_NOTIFICATION\";\nexport const SET_TYPE_NOTIFICATION = \"SET_TYPE_NOTIFICATION\";\nexport const SET_NOTIFICATIONs_DISPLAY = \"SET_NOTIFICATIONs_DISPLAY\";\nexport const REMOVE_ALL_NOTIFICATION = \"REMOVE_ALL_NOTIFICATION\";\nexport const UPDATE_LIST_CONVERSATION = \"UPDATE_LIST_CONVERSATION\";\nexport const ADD_NOTIFICATION_DISPLAY = \"ADD_NOTIFICATION_DISPLAY\";\nexport const SET_SHOW_NOTIFICATION_MENU = \"SET_SHOW_NOTIFICATION_MENU\";\n","export const SET_PEER = \"SET_PEER\";\n","//message\nexport const UPDATE_INFO_GET_POST = \"UPDATE_INFO_GET_POST\";\nexport const LOADING_POST_END = \"LOADING_POST_END\";\n","export const SET_STATUS_FRIEND = \"SET_STATUS_FRIEND\";\nexport const SET_USER_PROFILE = \"SET_USER_PROFILE\";\nexport const SET_IS_ME = \"SET_IS_ME\";\n\n","import { format } from \"timeago.js\";\n\nexport default function (value, slice) {\n  const time = format(value);\n  let timeFormat = time.replace(\"seconds\", \"giây\");\n  timeFormat = timeFormat.replace(\"minutes\", \"phút\");\n  timeFormat = timeFormat.replace(\"hours\", \"giờ\");\n  timeFormat = timeFormat.replace(\"days\", \"ngày\");\n  const idx = timeFormat.indexOf(\" ago\");\n  return slice ? timeFormat.slice(0, idx) : timeFormat;\n}\n","import { useMemo } from \"react\";\nimport formatTime from \"../helpers/formatTime\";\n\nconst useFormatTime = (user, slice = true) => {\n  const time = useMemo(() => {\n    if (user?.lastLogin) return formatTime(user.lastLogin, slice);\n  }, [user]);\n\n  return time;\n};\n\nexport default useFormatTime;\n","import React from \"react\";\nimport \"./statusActive.scss\";\n\nconst StatusActive = ({ isOnline, time, padding }) => {\n  return (\n    <span\n      className={`active ${isOnline ? \"online\" : \"offline\"}`}\n      style={{ padding: padding }}\n    >\n      {!isOnline && time}\n    </span>\n  );\n};\n\nexport default StatusActive;\n","import { API_KEY, API_SECRET, CLOUD_NAME } from \"../contants\";\n\nconst cloudinary = require(\"cloudinary/lib-es5/cloudinary\");\nrequire(\"dotenv\").config();\n\ncloudinary.config({\n    cloud_name: CLOUD_NAME,\n    api_key: API_KEY,\n    api_secret: API_SECRET,\n});\n\nexport default cloudinary;\n","import axios from \"axios\";\nimport cloudinary from \"../config/cloudinary\";\nimport { PUBLIC_FOLDER } from \"../contants\";\nrequire(\"dotenv\").config();\n\nexport const imageUpload = async (images) => {\n    try {\n        const responses = await Promise.all(\n            images.map((image) => {\n                const formData = new FormData();\n                if (image.camera) {\n                    formData.append(\"file\", image.url);\n                } else formData.append(\"file\", image);\n                formData.append(\"upload_preset\", \"react-social\");\n\n                return axios.post(\n                    \"https://api.cloudinary.com/v1_1/ko-c/image/upload\",\n                    formData\n                );\n            })\n        );\n        return responses.map(({ data }) => {\n            return {\n                url: data.url,\n                public_id: data.public_id,\n            };\n        });\n    } catch (err) {\n        throw err;\n    }\n};\n\nexport const removeImage = (images) => {\n    try {\n        images.map((image) =>\n            cloudinary.uploader.destroy(image, (data, error) => {\n                if (error) {\n                    throw error;\n                }\n            })\n        );\n    } catch (err) {\n        throw err;\n    }\n};\n\nexport const displayAvatar = (user) => {\n    return (user?.profilePicture?.length && user?.profilePicture[0]) || PUBLIC_FOLDER + 'no-avatar.png';\n};\nexport const displayBgc = (user) => {\n    return (user?.coverPicture?.length && user?.coverPicture[0]) || PUBLIC_FOLDER + 'no-avatar.png';\n};\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\n\nconst useCheckOnline = (user, isLog) => {\n  const [isOnline, setIsOnline] = useState(false);\n\n  const { usersOnline } = useSelector((state) => state.network);\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  useEffect(() => {\n    if (userCurrent?._id === user?._id) return setIsOnline(true);\n    if (usersOnline && usersOnline.length > 0) {\n      return setIsOnline(usersOnline.includes(user?._id));\n    }\n    setIsOnline(false);\n  }, [usersOnline, user, userCurrent]);\n\n  return [isOnline, setIsOnline];\n};\n\nexport default useCheckOnline;\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport useFormatTime from \"../../hooks/useFormatTime\";\nimport StatusActive from \"../statusActive/StatusActive\";\nimport \"./avatar.scss\";\nimport { displayAvatar } from \"../../helpers/image\";\nimport { useSelector } from \"react-redux\";\nimport useCheckOnline from \"../../hooks/useCheckOnline\";\n\nconst Avatar = ({\n  isStatus = true,\n  user,\n  width,\n  height,\n  link = true,\n  isShowOffline = true,\n  className = \"\",\n}) => {\n  const [status, setStatus] = useState();\n  const [isOnline, setIsOnline] = useCheckOnline(user);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  useEffect(() => {\n    if (!userCurrent || !user) return;\n    setStatus(\n      userCurrent._id === user._id\n        ? true\n        : userCurrent.friends.includes(user._id)\n    );\n  }, [user, userCurrent]);\n\n  const time = useFormatTime(user);\n\n  const src = useMemo(() => displayAvatar(user), [user]);\n\n  return (\n    <>\n      {link ? (\n        <Link\n          to={`/profile/${user?._id}`}\n          style={{\n            width,\n            height,\n          }}\n          className={`avatarContainer ${className}`}\n        >\n          <img className=\"avatarImg\" src={src} alt=\"\" />\n\n          {status && isStatus ? (\n            isShowOffline ? (\n              time && <StatusActive isOnline={isOnline} time={time} />\n            ) : (\n              isOnline &&\n              time && <StatusActive isOnline={isOnline} time={time} />\n            )\n          ) : (\n            <></>\n          )}\n        </Link>\n      ) : (\n        <div\n          className={`avatarContainer ${className}`}\n          style={{\n            width,\n            height,\n          }}\n        >\n          <img className=\"avatarImg\" src={src} alt=\"\" />\n          {status && isStatus ? (\n            isShowOffline ? (\n              time && <StatusActive isOnline={isOnline} time={time} />\n            ) : (\n              isOnline &&\n              time && <StatusActive isOnline={isOnline} time={time} />\n            )\n          ) : (\n            <></>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Avatar;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addVideoStream, openStream } from \"../../helpers/media\";\nimport { END_CALL, SET_IS_ANSWER, SET_USER_STREAM } from \"../../redux/actions\";\nimport Avatar from \"../avatar/Avatar\";\n\nconst ModalCreateCall = () => {\n  const { socket } = useSelector((state) => state.network);\n\n  const {\n    isVideo,\n    userSendCall,\n    isSenderCall,\n    isAnswer,\n    roomCallId,\n    conversationId,\n  } = useSelector((state) => state.call);\n  const peer = useSelector((state) => state.peer);\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const dispatch = useDispatch();\n\n  const refuseCall = () => {\n    socket.emit(\"userRefuseCall\", {\n      userRefuseId: userCurrent?._id,\n      receiverId: userSendCall?._id,\n      isCreate: true,\n    });\n\n    dispatch({\n      type: END_CALL,\n    });\n  };\n\n  const handleAnswer = async () => {\n    dispatch({\n      type: SET_IS_ANSWER,\n      payload: true,\n    });\n\n    let stream;\n    try {\n      stream = await openStream(isVideo);\n\n      dispatch({\n        type: SET_USER_STREAM,\n        payload: stream,\n      });\n      addVideoStream(stream, true);\n      if (!socket) return;\n\n      socket.emit(\"joinRoomCall\", {\n        userSendCall: userSendCall?._id,\n        userReceiveCall: userCurrent?._id,\n        roomCallId,\n        peerId: peer._id,\n        isCreate: true,\n        conversationId,\n        isVideo,\n        userName: userCurrent?.userName,\n        streamId: stream.id,\n      });\n    } catch (err) {\n      console.log(\"err\", { err });\n    }\n  };\n\n  return (\n    <div className=\"call_box\">\n      <div className=\"text-center call_info\" style={{ padding: \"40px 0\" }}>\n        <Avatar\n          width=\"150px\"\n          height=\"150px\"\n          user={userSendCall}\n          link={false}\n          isStatus={false}\n        />\n        <h4>{userSendCall?.userName}</h4>\n      </div>\n\n      {!isAnswer && (\n        <div>\n          {isVideo ? (\n            <span>calling video...</span>\n          ) : (\n            <span>calling audio...</span>\n          )}\n\n          {/* <div className=\"timer\">\n            <small>{mins.toString().length < 2 ? \"0\" + mins : mins}</small>\n            <small>:</small>\n            <small>\n              {second.toString().length < 2 ? \"0\" + second : second}\n            </small>\n          </div> */}\n        </div>\n      )}\n\n      <div className=\"call_menu\">\n        <i\n          className=\"fa-solid fa-phone-slash text-danger\"\n          onClick={refuseCall}\n        ></i>\n\n        {!isSenderCall && !isAnswer && (\n          <i className=\"fa-solid fa-phone-flip\" onClick={handleAnswer}></i>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ModalCreateCall;\n","import React from \"react\";\r\nimport \"./MessagePretty.scss\";\r\nconst MessagePretty = ({ mess }) => {\r\n  return <div className=\"mess-pretty\">{mess}</div>;\r\n};\r\n\r\nexport default MessagePretty;\r\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  REFUSE_INVITE,\n  SET_IS_ANSWER,\n  SET_USER_STREAM,\n} from \"../../redux/actions\";\nimport Avatar from \"../avatar/Avatar\";\nimport \"./modalInviteCall.scss\";\n\nimport { addVideoStream, openStream } from \"../../helpers/media\";\nimport MessagePretty from \"../MessagePretty/MessagePretty\";\n\nconst ModalInviteCall = () => {\n  const { userSendCall } = useSelector((state) => state.call);\n  const [countTime, setCountTime] = useState(20);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { socket } = useSelector((state) => state.network);\n  const peer = useSelector((state) => state.peer);\n  const { isAnswer, roomCallId, isVideo, conversationId } = useSelector(\n    (state) => state.call\n  );\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (isAnswer) return;\n    if (!countTime) {\n      return handleRefuseInvite();\n    }\n\n    const handleCountTime = () => setCountTime((prev) => prev - 1);\n\n    const timer = setTimeout(handleCountTime, 1000);\n\n    return () => clearTimeout(timer, handleCountTime);\n  }, [countTime, isAnswer]);\n\n  const handleJoinCall = async () => {\n    dispatch({\n      type: SET_IS_ANSWER,\n      payload: true,\n    });\n\n    const stream = await openStream(isVideo);\n    dispatch({\n      type: SET_USER_STREAM,\n      payload: stream,\n    });\n    addVideoStream(stream, true);\n\n    if (!socket) return;\n\n    socket.emit(\"joinRoomCall\", {\n      userSendCall: userSendCall?._id,\n      userReceiveCall: userCurrent?._id,\n      roomCallId,\n      peerId: peer._id,\n      isCreate: false,\n      conversationId,\n      userName: userCurrent?.userName,\n      streamId: stream.id,\n    });\n  };\n\n  const handleRefuseInvite = () => {\n    dispatch({\n      type: REFUSE_INVITE,\n    });\n\n    socket?.emit(\"refuseInviteCall\", userCurrent?._id);\n  };\n\n  return (\n    <div className=\"modalInvite_content\">\n      <span className=\"close\" onClick={handleRefuseInvite}>\n        ×\n      </span>\n      <div className=\"info\">\n        <Avatar user={userSendCall} link={false} isStatus={false} />\n        <MessagePretty\n          mess={`${userSendCall?.userName} Invited you to join the call`}\n        />\n      </div>\n      <div className=\"buttons\">\n        <button\n          type=\"button\"\n          className=\"btn btn-danger\"\n          onClick={handleRefuseInvite}\n        >\n          Cancel\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={handleJoinCall}\n        >\n          {`Join ${countTime}`}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ModalInviteCall;\n","import axios from \"axios\";\nimport { toast } from \"react-toastify\";\n\nimport jwt_decode from \"jwt-decode\";\nimport { ACCESS_TOKEN, REFRESH_TOKEN, URL_BE } from \"../contants\";\n\n\n\nconst instance = axios.create({\n    baseURL: URL_BE + \"v1/api\",\n});\n\n\nconst isTimeExpire = (token) => {\n    if (!token) {\n        return true;\n    }\n    const date = new Date();\n    const { exp } = jwt_decode(token);\n    return exp < date.getTime() / 1000\n}\n\nconst getToken = (nameToken) => localStorage.getItem(nameToken)\n    ? JSON.parse(localStorage.getItem(nameToken))\n    : \"\";\n\n\nlet refreshTokenRequest = null;\nconst handleRefreshToken = async () => {\n    try {\n        let refreshToken = getToken(REFRESH_TOKEN);\n        if (isTimeExpire(refreshToken)) throw new Error(\"Refresh token invalid\");\n        const response = await axios.post(\"/auth/refresh-token\", { refreshToken });\n        return response;\n    } catch (err) {\n        throw err;\n    }\n};\n\ninstance.interceptors.request.use(\n    async (request) => {\n        let accessToken = getToken(ACCESS_TOKEN);\n\n        if (!accessToken) {\n            throw new Error(\"Please login\");\n        }\n\n        if (isTimeExpire()) {\n            try {\n                refreshTokenRequest = refreshTokenRequest\n                    ? refreshTokenRequest\n                    : handleRefreshToken();\n\n                const response = await refreshTokenRequest;\n\n                const { newAccessToken } = response.data;\n\n                localStorage.setItem(ACCESS_TOKEN, JSON.stringify(newAccessToken));\n\n                accessToken = newAccessToken;\n            } catch (err) {\n                throw new Error(\"Refresh Token failed\");\n            }\n        }\n\n        request.headers[\"Authorization\"] = \"Bearer \" + accessToken;\n        return request;\n    },\n    function (error) {\n        return Promise.reject(error);\n    }\n);\n\ninstance.interceptors.response.use(\n    function (response) {\n        return response.data;\n    },\n    function (error) {\n        console.log(\"error on respon\", error);\n        const message = error?.response?.data?.message || error.message;\n\n        toast.error(message, { autoClose: 1000 });\n        return Promise.reject(message);\n    }\n);\n\nexport default instance;\n","import axiosInstance from \"../config/axiosInstance \";\n\nexport const getDataAPI = async (url) => {\n\n  const res = await axiosInstance.get(`${url}`);\n  return res;\n};\n\nexport const postDataAPI = async (url, data) => {\n  const res = await axiosInstance.post(`${url}`, data);\n  return res;\n};\n\nexport const putDataAPI = async (url, data) => {\n  const res = await axiosInstance.put(`${url}`, data);\n  return res;\n};\n\nexport const patchDataAPI = async (url, data) => {\n  const res = await axiosInstance.patch(`${url}`, data);\n  return res;\n};\n\nexport const deleteDataAPI = async (url) => {\n  const res = await axiosInstance.delete(`${url}`);\n  return res;\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { format } from \"timeago.js\";\nimport Avatar from \"../avatar/Avatar\";\n\nconst CardFriend = ({ friend }) => {\n  const [isDisable, setIsDisable] = useState(false);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { socket } = useSelector((state) => state.network);\n  const { isVideo, roomCallId, conversationId } = useSelector(\n    (state) => state.call\n  );\n\n  const timeRemaining = useRef();\n\n  useEffect(() => {\n    if (!isDisable || timeRemaining.current) return;\n    const time = 5 * 60 * 1000;\n\n    const date = new Date();\n\n    timeRemaining.current = time + date.getTime();\n\n    const removeDisable = () => {\n      setIsDisable(false);\n      timeRemaining.current = \"\";\n    };\n    const timer = setTimeout(removeDisable, 1000);\n\n    return () => clearTimeout(timer);\n  }, [isDisable]);\n\n  const handleInviteFriend = (friendId) => {\n    if (isDisable) {\n      return toast.info(\n        `Already invited this friend ${format(\n          timeRemaining.current\n        )} later can invite again`,\n        { autoClose: 1000 }\n      );\n    }\n\n    if (!socket || !userCurrent) return;\n    socket.emit(\"createCall\", {\n      isVideo,\n      sender: {\n        profilePicture: userCurrent.profilePicture,\n        userName: userCurrent.userName,\n        _id: userCurrent?._id,\n      },\n      receiverId: friend?._id,\n      roomCallId,\n      isCreate: false,\n      conversationId,\n    });\n\n    setIsDisable(true);\n  };\n\n  return (\n    <>\n      <Avatar\n        width=\"60px\"\n        height=\"60px\"\n        user={friend}\n        link={false}\n        isShowOffline={false}\n      />\n      <p>{friend?.userName}</p>\n      <button\n        type=\"button\"\n        className=\"btn btn-info\"\n        onClick={handleInviteFriend}\n      >\n        {isDisable ? \"Invited\" : \"Invite\"}\n      </button>\n    </>\n  );\n};\n\nexport default CardFriend;\n","import React, { useEffect, useMemo } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Slider from \"react-slick\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport { SET_FRIEND_INVITES } from \"../../redux/actions\";\nimport CardFriend from \"./CardFriend\";\nimport \"./InviteFriend.scss\";\n\nconst InviteFriend = () => {\n  const { userCall, isAnswer, fristLoadFriends, friendInvites } = useSelector(\n    (state) => state.call\n  );\n\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n\n    const handleFetchFriends = async () => {\n      if (userCurrent && userCurrent._id) {\n        try {\n          const response = await getDataAPI(\n            `/user/get-friends/${userCurrent?._id}`\n          );\n\n          const { message, friends } = response;\n          // toast.success(message, { autoClose: 2000 });\n\n          let data = [...friends];\n\n          if (userCall) {\n            data = friends.filter((friend) => friend?._id !== userCall._id);\n          }\n\n          if (isMount) {\n            dispatch({\n              type: SET_FRIEND_INVITES,\n              payload: data,\n            });\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    //isAnswer && fristLoadFriends\n    if (fristLoadFriends) {\n      handleFetchFriends();\n    }\n\n    return () => (isMount = false);\n  }, [userCurrent, isAnswer]);\n\n  const settings = useMemo(() => ({\n    dots: true,\n    infinite: true,\n    speed: 500,\n    slidesToShow: 3,\n    slidesToScroll: 1,\n  }));\n\n  const body = (className) =>\n    friendInvites.map((friend) => (\n      <div key={friend?._id}>\n        <div className={\"friend_invite \" + className}>\n          <CardFriend friend={friend} />\n        </div>\n      </div>\n    ));\n\n  return (\n    <div className=\"invite\">\n      <p className=\"title\">Invite More People</p>\n\n      {friendInvites.length <= 3 ? (\n        <div className=\"invite_content\">{body(\"no-slider\")}</div>\n      ) : (\n        <Slider {...settings}>{body()}</Slider>\n      )}\n\n      {/* <Carousel>\n        {friendInvites.map((friend) => (\n          <div key={friend?._id}>\n            <div className=\"friend_invite\">\n            <CardFriend friend={friend} />\n            </div>\n          </div>\n        ))}\n      </Carousel> */}\n    </div>\n  );\n};\n\nexport default InviteFriend;\n","import React from \"react\";\nimport { PUBLIC_FOLDER } from \"../../contants\";\n\nconst NavModalCall = () => {\n  return (\n    <nav>\n      <img src={PUBLIC_FOLDER + \"logo.png\"} alt=\"\" />\n      <ul>\n        <li>\n          <img\n            src={PUBLIC_FOLDER + \"live.png\"}\n            alt=\"\"\n            className=\"icon_modal-active\"\n          />\n        </li>\n        <li>\n          <img src={PUBLIC_FOLDER + \"video.png\"} alt=\"\" />\n        </li>\n        <li>\n          <img src={PUBLIC_FOLDER + \"message.png\"} alt=\"\" />\n        </li>\n        <li>\n          <img src={PUBLIC_FOLDER + \"notification.png\"} alt=\"\" />\n        </li>\n        <li>\n          <img src={PUBLIC_FOLDER + \"users.png\"} alt=\"\" />\n        </li>\n        <li>\n          <img src={PUBLIC_FOLDER + \"setting.png\"} alt=\"\" />\n        </li>\n      </ul>\n    </nav>\n  );\n};\n\nexport default NavModalCall;\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { PUBLIC_FOLDER } from \"../../contants\";\nimport {\n  addVideoStream,\n  findStream,\n  handleUpdateUserCamera,\n  openStream,\n} from \"../../helpers/media\";\nimport { END_CALL, SET_IS_ANSWER, SET_USER_STREAM } from \"../../redux/actions\";\nimport ModalCreateCall from \"../modalCreateCall/ModalCreateCall\";\nimport ModalInviteCall from \"../modalInviteCall/ModalInviteCall\";\nimport InviteFriend from \"./InviteFriend\";\nimport \"./modalCall.scss\";\nimport NavModalCall from \"./NavModalCall\";\n\nconst CallModal = () => {\n  const [hours, setHours] = useState(0);\n  const [mins, setMins] = useState(0);\n  const [second, setSecond] = useState(0);\n  const [total, setTotal] = useState(0);\n\n  const [isMic, setIsMic] = useState(true);\n  const [isOpenVideo, setOpenVideo] = useState(true);\n\n  const {\n    isVideo,\n    userReciverCall,\n    isAnswer,\n    isCreate,\n    roomCallId,\n    isSenderCall,\n    userStream,\n    conversationId,\n  } = useSelector((state) => state.call);\n\n  const { socket } = useSelector((state) => state.network);\n  const peer = useSelector((state) => state.peer);\n  const { userCurrent } = useSelector((state) => state.auth);\n  const dispatch = useDispatch();\n\n  // Set Time\n\n  useEffect(() => {\n    setSecond(total % 60);\n    setMins(parseInt(total / 60));\n    setHours(parseInt(total / 3600));\n  }, [total]);\n\n  useEffect(() => {\n    if (!peer || !userStream) return;\n\n    peer.on(\"call\", (call) => {\n      call.answer(userStream);\n      call.on(\"stream\", function (remoteStream) {\n        addVideoStream(remoteStream);\n      });\n    });\n\n    return () => peer.removeListener(\"call\");\n  }, [userStream, peer]);\n\n  useEffect(() => {\n    const timerId = setInterval(() => setTotal((prev) => prev + 1), 1000);\n\n    return () => {\n      setTotal(0);\n      clearInterval(timerId);\n    };\n  }, []);\n\n  useEffect(() => {\n    const handleSendStream = async (data) => {\n      const { peerId, userName } = data;\n\n      toast.info(`${userName} joined the call`, { autoClose: 1000 });\n\n      let stream;\n\n      if (!userStream) {\n        stream = await openStream(isVideo);\n        dispatch({\n          type: SET_USER_STREAM,\n          payload: stream,\n        });\n      } else {\n        stream = userStream;\n      }\n\n      const call = peer.call(peerId, stream);\n\n      if (!isAnswer) {\n        dispatch({\n          type: SET_IS_ANSWER,\n          payload: true,\n        });\n        addVideoStream(stream, true);\n      }\n\n      if (!call) return;\n\n      call.on(\"stream\", (remoteStream) => {\n        addVideoStream(remoteStream);\n      });\n    };\n\n    socket.on(\"user-joined-call\", handleSendStream);\n\n    return () => socket?.off(\"user-joined-call\", handleSendStream);\n  }, [socket, userStream, isAnswer]);\n\n  useEffect(() => {\n    const handleUserCallOut = (data) => {\n      const { streamId, userName } = data;\n\n      toast.info(`${userName} got off the call`, {\n        autoClose: 1000,\n      });\n\n      const divEl = findStream(streamId);\n\n      if (divEl) divEl.remove();\n    };\n\n    socket.on(\"user-call-out\", handleUserCallOut);\n\n    return () => socket?.off(\"user-call-out\", handleUserCallOut);\n  }, [socket]);\n\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleNotify = (message, isClose) => {\n      toast.info(message, {\n        autoClose: 500,\n      });\n\n      if (isClose) {\n        dispatch({\n          type: END_CALL,\n        });\n      }\n    };\n\n    socket.on(\"callRefused\", () => {\n      handleNotify(`${userReciverCall?.userName} refuse the call`);\n    });\n\n    socket.on(\"userCallBusy\", (isClose) => {\n      handleNotify(`${userReciverCall.userName} is on another call!`, isClose);\n    });\n\n    return () => {\n      socket?.off(\"userCallBusy\");\n      socket?.off(\"callRefused\");\n    };\n  }, [socket, userReciverCall]);\n\n  useEffect(() => {\n    if (!socket) return;\n\n    socket.on(\"update-user-camera\", handleUpdateUserCamera);\n\n    return () => socket?.off(\"update-user-camera\", handleUpdateUserCamera);\n  }, [socket]);\n\n  useEffect(() => {\n    if (isAnswer) {\n      setTotal(0);\n    } else {\n      const timerId = setTimeout(() => {\n        if (isSenderCall) {\n          socket?.emit(\"userCallNoReaction\", {\n            userCallId: userReciverCall._id,\n            userSendCallId: userCurrent._id,\n            conversationId,\n            isVideo,\n          });\n        }\n\n        dispatch({\n          type: END_CALL,\n        });\n      }, 10000);\n\n      return () => clearTimeout(timerId);\n    }\n  }, [isAnswer]);\n\n  const endCall = () => {\n    const streamId = userStream.id;\n\n    const tracks = userStream?.getTracks();\n    tracks.forEach((track) => track.stop());\n\n    dispatch({\n      type: END_CALL,\n    });\n    socket?.emit(\"end-call\", {\n      userOutCallId: userCurrent?._id,\n      streamId,\n    });\n  };\n\n  const toogleStream = (type) => {\n    if (!userStream) return;\n\n    const track = userStream.getTracks().find((track) => track.kind === type);\n\n    if (!track) return;\n\n    let data = {};\n\n    if (track.enabled) {\n      if (type === \"video\") {\n        data.img = userCurrent?.profilePicture.length\n          ? userCurrent?.profilePicture[0]\n          : PUBLIC_FOLDER + \"no-avatar.png\";\n      }\n\n      track.enabled = false;\n    } else {\n      track.enabled = true;\n    }\n\n    if (type === \"video\") {\n      data.streamId = userStream?.id;\n      data.roomCallId = roomCallId;\n\n      socket.emit(\"user-turn-off-video\", {\n        ...data,\n      });\n      handleUpdateUserCamera(data);\n    }\n  };\n\n  return (\n    <div className=\"call_modal\">\n      <div\n        className=\"modal_container\"\n        style={{\n          display: isAnswer ? \"none\" : \"flex\",\n        }}\n      >\n        {!isAnswer && (isCreate ? <ModalCreateCall /> : <ModalInviteCall />)}\n      </div>\n      <div\n        className=\"header\"\n        style={{\n          display: `${isAnswer ? \"block\" : \"none\"}`,\n        }}\n      >\n        <NavModalCall />\n\n        <div className=\"container\">\n          <div className=\"top-icons\">\n            <img src={PUBLIC_FOLDER + \"search.png\"} alt=\"\" />\n            <img src={PUBLIC_FOLDER + \"menu.png\"} alt=\"\" />\n          </div>\n          <div className=\"video_layout\">\n            <div className=\"content_left\">\n              <div className=\"pin_video border_center\"></div>\n              <div className=\"time_video\">\n                <span>{hours.toString().length < 2 ? \"0\" + hours : hours}</span>\n                <span>:</span>\n                <span>{mins.toString().length < 2 ? \"0\" + mins : mins}</span>\n                <span>:</span>\n                <span>\n                  {second.toString().length < 2 ? \"0\" + second : second}\n                </span>\n              </div>\n              <div className=\"controls\">\n                <div className=\"icon-control\">\n                  <img src={PUBLIC_FOLDER + \"chat.png\"} alt=\"\" />\n                </div>\n\n                <div\n                  className=\"icon-control\"\n                  onClick={() => {\n                    toogleStream(\"video\");\n                    setOpenVideo((prev) => !prev);\n                  }}\n                >\n                  {isOpenVideo ? (\n                    <i className=\"fa-solid fa-video-slash\"></i>\n                  ) : (\n                    <i className=\"fa-solid fa-video\"></i>\n                  )}\n                </div>\n                <div className=\"icon-control\">\n                  <img\n                    src={PUBLIC_FOLDER + \"call.png\"}\n                    alt=\"\"\n                    className=\"call-icon\"\n                    onClick={endCall}\n                  />\n                </div>\n                <div\n                  className=\"icon-mic icon-control\"\n                  onClick={() => {\n                    toogleStream(\"audio\");\n                    setIsMic((prev) => !prev);\n                  }}\n                >\n                  {isMic ? (\n                    <img src={PUBLIC_FOLDER + \"mic.png\"} alt=\"\" />\n                  ) : (\n                    <i className=\"fa-solid fa-microphone-slash\"></i>\n                  )}\n                </div>\n                <div className=\"icon-control\">\n                  <img src={PUBLIC_FOLDER + \"cast.png\"} alt=\"\" />\n                </div>\n              </div>\n            </div>\n            <div className=\"content_right\">\n              <div className=\"joined\">\n                <p>People Joined</p>\n                <div className=\"video-joins\"></div>\n              </div>\n              <InviteFriend />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CallModal;\n","import axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { ACCESS_TOKEN, REFRESH_TOKEN, URL_BE } from \"../contants\";\nimport { LOADING_END, LOADING_START, LOGIN_FAILED, LOGIN_SUCCESS } from \"../redux/actions\";\n\naxios.defaults.baseURL = URL_BE + \"v1/api\";\n\n\nexport const login = (userInfo, navigate) => async (dispatch) => {\n    dispatch({\n        type: LOADING_START,\n    });\n    try {\n        const response = await axios.post(\"/auth/login\", userInfo);\n        const { user, message, accessToken, refreshToken } = response.data;\n\n        toast.success(message, { autoClose: 500 });\n\n        dispatch({\n            type: LOGIN_SUCCESS,\n            payload: user,\n        });\n\n        localStorage.setItem(ACCESS_TOKEN, JSON.stringify(accessToken));\n        localStorage.setItem(REFRESH_TOKEN, JSON.stringify(refreshToken));\n\n        navigate(\"/\");\n    } catch (err) {\n        const message = err.message || err?.response?.data?.message;\n        toast.error(message, { autoClose: 2000 });\n\n        dispatch({\n            type: LOGIN_FAILED,\n            payload: err,\n        });\n    }\n};\n\nexport const register = (userInfo, navigate) => async (dispatch) => {\n    try {\n        dispatch({\n            type: LOADING_START,\n        })\n        await axios.post(\"/auth/register\", userInfo);\n        navigate(\"/login\");\n    } catch (err) {\n        const message = err.message || err?.response?.data?.message;\n        toast.error(message, { autoClose: 2000 });\n    }\n    finally {\n        dispatch({ type: LOADING_END })\n    }\n};\n","import { Cancel } from \"@material-ui/icons\";\nimport React from \"react\";\nimport \"./displayImg.css\";\n\nconst Displayimg = ({ image, file, setImages, setFiles }) => {\n  return (\n    <>\n      <img\n        src={image ? image : file.camera ? file.url : URL.createObjectURL(file)}\n      />\n      <span\n        className=\"imgCancel\"\n        onClick={() =>\n          image\n            ? setImages((prev) => prev.filter((item) => item.url !== image))\n            : setFiles((prev) => prev.filter((item) => item.uuid !== file.uuid))\n        }\n      >\n        <Cancel />\n      </span>\n    </>\n  );\n};\n\nexport default Displayimg;\n","import { PermMedia } from \"@material-ui/icons\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport Displayimg from \"../displayimg/DisplayImg\";\nimport \"./ChooseImage.scss\";\n\nconst ChooseImage = ({\n  setIsTakePhoto,\n  isTakePhoto,\n  files,\n  height,\n  width,\n  id,\n  multiple,\n  setFiles,\n}) => {\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const [videoStream, setVideoStream] = useState();\n  // camera truoc\n  const [useFrontCamera, setUseFrontCamera] = useState(true);\n  const [notify, setNotify] = useState(\"\");\n  const [isStop, setIsStop] = useState(false);\n\n  const constraints = useRef({\n    video: {\n      width: {\n        min: 1280,\n        ideal: 1920,\n        max: 2560,\n      },\n      height: {\n        min: 720,\n        ideal: 1080,\n        max: 1440,\n      },\n    },\n  });\n\n  const stopVideoStream = () => {\n    if (videoStream) {\n      videoStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    }\n  };\n\n  const init = async () => {\n    stopVideoStream();\n    constraints.current.video.facingMode = useFrontCamera\n      ? \"user\"\n      : \"environment\";\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia(\n        constraints.current\n      );\n\n      videoRef.current.srcObject = stream;\n      videoRef.current.play();\n      setVideoStream(stream);\n    } catch (error) {\n      setNotify(\"An error occurred while starting the camera\");\n    }\n  };\n\n  useEffect(() => {\n    if (!isTakePhoto) {\n      videoRef?.current?.pause();\n      stopVideoStream();\n      setVideoStream();\n      return;\n    }\n    if (\n      !\"mediaDevices\" in navigator ||\n      !\"getUserMedia\" in navigator.mediaDevices\n    ) {\n      setNotify(\"Not support API camera\");\n      return;\n    }\n\n    init();\n\n    return () => {\n      videoRef?.current?.srcObject.getTracks().forEach((track) => {\n        track.stop();\n      });\n    };\n  }, [isTakePhoto, useFrontCamera]);\n\n  const handleTakePhoto = () => {\n    canvasRef.current.width = videoRef.current.videoWidth;\n    canvasRef.current.height = videoRef.current.videoHeight;\n    canvasRef.current.getContext(\"2d\").drawImage(videoRef.current, 0, 0);\n\n    const image = canvasRef.current.toDataURL(\"image/png\");\n\n    if (multiple) {\n      setFiles((prev) => [\n        ...prev,\n        {\n          camera: true,\n          url: image,\n          uuid: uuidv4(),\n        },\n      ]);\n    } else {\n      setFiles([\n        {\n          camera: true,\n          url: image,\n          uuid: uuidv4(),\n        },\n      ]);\n    }\n  };\n\n  const handleChangeVideo = () => {\n    setUseFrontCamera((prev) => !prev);\n  };\n\n  return (\n    <div>\n      <div className=\"optionUploadImage\">\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={() => setIsTakePhoto(false)}\n        >\n          Upload photos\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-info\"\n          onClick={() => setIsTakePhoto(true)}\n        >\n          Take a photo\n        </button>\n      </div>\n      <div className=\"uploadImageContent\">\n        {!isTakePhoto ? (\n          <div className=\"uploadImageContentTop\">\n            <label htmlFor={`file${id}`} className=\"shareOption\">\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">{\"Choose photo\"}</span>\n            </label>\n            <input\n              multiple={multiple}\n              style={{ display: \" none\" }}\n              type={\"file\"}\n              id={`file${id}`}\n              accept=\".png,.jpeg,.jpg\"\n              onChange={(e) => {\n                const data = Array.from(e.target.files).map((file) => {\n                  file.uuid = uuidv4();\n                  return file;\n                });\n\n                if (multiple) {\n                  setFiles((prev) => [...prev, ...data]);\n                } else {\n                  setFiles([...data]);\n                }\n              }}\n            />\n          </div>\n        ) : (\n          <>\n            <div className=\"takeVideoTop\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={() => {\n                  if (isStop) videoRef.current.play();\n                  else videoRef.current.pause();\n\n                  setIsStop((prev) => !prev);\n                }}\n              >\n                {`${isStop ? \"Play\" : \"Stop\"} video`}\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn btn-warning\"\n                onClick={handleTakePhoto}\n              >\n                Shot\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn btn-dark\"\n                onClick={handleChangeVideo}\n              >\n                Change camera\n              </button>\n            </div>\n            <div className=\"takeVideoBody\">\n              {notify ? notify : <video ref={videoRef}></video>}\n              <canvas\n                style={{\n                  display: \"none\",\n                }}\n                ref={canvasRef}\n              ></canvas>\n            </div>\n          </>\n        )}\n\n        <div className=\"uploadImageContentBody\">\n          <div className=\"shareImgContainer\">\n            {files.map((file) => {\n              return (\n                <div\n                  className=\"imgContainer\"\n                  style={{\n                    width: width,\n                    height: height,\n                  }}\n                  key={file.uuid}\n                >\n                  <Displayimg file={file} setFiles={setFiles} />\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChooseImage;\n","import React, { useState } from \"react\";\nimport ChooseImage from \"../chooseImage/ChooseImage\";\nimport { useDispatch } from \"react-redux\";\n\nconst ModalChooseImage = ({\n  height,\n  width,\n  id,\n  text,\n  multiple,\n  typeImage,\n  onSave,\n}) => {\n  const [files, setFiles] = useState([]);\n  const [isTakePhoto, setIsTakePhoto] = useState(false);\n\n  const handleSave = () => {\n    onSave(files, typeImage);\n    setFiles([]);\n    setIsTakePhoto(false);\n  };\n\n  return (\n    <>\n      <div\n        className=\"modal fade\"\n        id={id}\n        tabIndex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div className={`modal-dialog chooseImgage`} role=\"document\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\n                {`${text}`}\n              </h5>\n              <button\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                onClick={() => {\n                  setIsTakePhoto(false);\n                }}\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <ChooseImage\n                setIsTakePhoto={setIsTakePhoto}\n                isTakePhoto={isTakePhoto}\n                files={files}\n                height={height}\n                width={width}\n                setFiles={setFiles}\n                multiple={multiple}\n                id={id}\n              />\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                type=\"button\"\n                className=\"btn btn-danger\"\n                onClick={handleSave}\n                data-dismiss=\"modal\"\n              >\n                Save\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                data-dismiss=\"modal\"\n                onClick={() => {\n                  setIsTakePhoto(false);\n                }}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ModalChooseImage;\n","import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport { PUBLIC_FOLDER } from \"../../contants\";\nimport { UPDATE_CONVERSATION } from \"../../redux/actions\";\n\nexport default function Conversation({ conversation }) {\n  const {\n    _id: id,\n    reads,\n    members,\n    isMultiple,\n    name,\n    image,\n    listMembers,\n    images,\n    nameConversation,\n  } = conversation;\n  const [message, setMessage] = useState(\"\");\n  const [isRead, setIsRead] = useState(true);\n  const [lastMessage, setLastMessage] = useState(\n    () => conversation.lastMessage || \"\"\n  );\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { lastMessageConversation, statusConversations } = useSelector(\n    (state) => state.chat\n  );\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n    if (!conversation) return;\n\n    const handeGetInfoMembers = async () => {\n      const listMemberIds = members.filter(\n        (memberId) => memberId !== userCurrent?._id\n      );\n\n      const responses = await Promise.all(\n        listMemberIds.map((memberId) => getDataAPI(`/user?userId=${memberId}`))\n      );\n\n      const listMembers = responses.map((response) => {\n        const { user } = response;\n        return user;\n      });\n\n      if (isMount) {\n        dispatch({\n          type: UPDATE_CONVERSATION,\n          payload: {\n            conversationId: conversation?._id,\n            listMembers,\n          },\n        });\n      }\n    };\n\n    if (!listMembers) {\n      handeGetInfoMembers();\n    }\n\n    return () => (isMount = false);\n  }, [conversation, listMembers]);\n\n  useEffect(() => {\n    let isMount = true;\n    if (!conversation || !userCurrent) return;\n\n    const handleSetImgConversation = async () => {\n      if (isMultiple) {\n        //get img conversation\n        if (image.length) {\n          if (isMount)\n            dispatch({\n              type: UPDATE_CONVERSATION,\n              payload: {\n                conversationId: conversation?._id,\n                images: [\n                  {\n                    src: image[0],\n                    key: uuidv4(),\n                  },\n                ],\n              },\n            });\n        }\n      }\n    };\n\n    if (!images) handleSetImgConversation();\n\n    return () => (isMount = false);\n  }, [conversation, userCurrent, images]);\n\n  useEffect(() => {\n    if (!conversation || !userCurrent || nameConversation) return;\n\n    if (isMultiple) {\n      dispatch({\n        type: UPDATE_CONVERSATION,\n        payload: {\n          conversationId: conversation?._id,\n          nameConversation: name,\n        },\n      });\n    } else {\n      if (!listMembers) return;\n      const { userName } = listMembers[0];\n      dispatch({\n        type: UPDATE_CONVERSATION,\n        payload: {\n          conversationId: conversation?._id,\n          nameConversation: userName,\n        },\n      });\n    }\n  }, [conversation, userCurrent, nameConversation, listMembers, name]);\n\n  useEffect(() => {\n    if (!reads || !userCurrent) return;\n\n    setIsRead(() => reads.includes(userCurrent._id));\n  }, [reads, userCurrent]);\n\n  useEffect(() => {\n    if (\n      !lastMessageConversation ||\n      lastMessageConversation?.conversationId !== id\n    )\n      return;\n\n    setLastMessage(lastMessageConversation);\n  }, [lastMessageConversation]);\n\n  useEffect(() => {\n    if (!listMembers || !userCurrent || (images && images.length > 0)) return;\n\n    let listImages = [];\n\n    if (isMultiple) {\n      const ids = [];\n      const length = members.length;\n      for (let i = 0; i < 2; ++i) {\n        let check;\n        do {\n          const idxRamdom = Math.floor(Math.random() * length);\n          if (!ids.includes(members[idxRamdom])) {\n            ids.push(members[idxRamdom]);\n            check = true;\n          }\n        } while (!check);\n      }\n\n      listImages = ids.map((id) => {\n        let img;\n\n        if (id === userCurrent?._id) {\n          img = userCurrent.profilePicture;\n        } else {\n          img = listMembers.find((member) => member?._id === id).profilePicture;\n        }\n\n        return {\n          src: img && img.length ? img[0] : PUBLIC_FOLDER + \"no-avatar.png\",\n          key: uuidv4(),\n        };\n      });\n    } else {\n      const { profilePicture } = listMembers[0];\n\n      listImages.push({\n        src: profilePicture.length\n          ? profilePicture[0]\n          : PUBLIC_FOLDER + \"no-avatar.png\",\n        key: uuidv4(),\n      });\n    }\n\n    dispatch({\n      type: UPDATE_CONVERSATION,\n      payload: {\n        conversationId: conversation?._id,\n        images: listImages,\n      },\n    });\n  }, [listMembers, members, images, userCurrent]);\n\n  useEffect(() => {\n    if (!lastMessage || !listMembers || !userCurrent) return;\n    const { isNotify, senderId, notify, text } = lastMessage;\n\n    // if (isNotify) {\n    //   let message;\n    //   if (senderId) {\n    //     const { userName } = friendContact;\n\n    //     message =\n    //       userCurrent?._id === senderId\n    //         ? `${userName} missed your call`\n    //         : `You missed the call with ${userName}`;\n    //   } else {\n    //     message = notify[0];\n    //   }\n    //   return setMessage(message);\n    // }\n\n    let data;\n\n    if (senderId === userCurrent?._id) {\n      data = \"You\";\n    } else {\n      const sender = listMembers.find((member) => member?._id === senderId);\n      data = handleGetName(sender?.userName);\n    }\n\n    setMessage(data + \": \" + text);\n  }, [lastMessage, listMembers]);\n\n  const handleGetName = (name) => {\n    const data = name.split(\" \");\n    const length = data.length;\n\n    if (!data || !length) {\n      return name?.userName || \"\";\n    }\n\n    return data[length - 1];\n  };\n\n  return (\n    <>\n      <div className=\"pic banner\">\n        {/* <Avatar user={friendContact} width=\"64px\" height=\"64px\" link={false} /> */}\n\n        {images &&\n          (images.length === 1 ? (\n            <img className=\"one-img\" src={images[0].src} alt=\"\" />\n          ) : (\n            <div className=\"multiple-img\">\n              {images.map((img) => (\n                <img src={img.src} key={img.key} />\n              ))}\n            </div>\n          ))}\n      </div>\n\n      <div className={`name ${!isRead ? \"unread\" : \"\"}`}>\n        {nameConversation}\n      </div>\n      <div className={`message ${!isRead ? \"unread\" : \"\"}`}>\n        {lastMessage?.[0] === \"notify\" ? lastMessage?.[1] : message}\n      </div>\n      {!isRead && <div className=\"NotificationCircle\"></div>}\n    </>\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { getDataAPI, postDataAPI } from \"../../api/fetchData\";\nimport { imageUpload } from \"../../helpers/image\";\nimport {\n  ADD_CONVERSATION,\n  ADD_FRIEND_TO_ROOM,\n  REMOVE_FRIEND_TO_ROOM,\n  RESET_CREATE_ROOM,\n  SET_LIST_FRIEND,\n} from \"../../redux/actions\";\nimport Avatar from \"../avatar/Avatar\";\nimport \"./ModalCreateRoomChat.scss\";\n\nconst ModalCreateRoomChat = () => {\n  const [file, setFile] = useState();\n\n  const nameRef = useRef(\"\");\n  const descRef = useRef(\"\");\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { friends, friendAdds } = useSelector((state) => state.createRoomChat);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n\n    const handleFetchFriends = async () => {\n      if (userCurrent && userCurrent._id) {\n        try {\n          const response = await getDataAPI(\n            `/user/get-friends/${userCurrent?._id}`\n          );\n\n          const { message, friends } = response;\n\n          if (isMount) {\n            dispatch({\n              type: SET_LIST_FRIEND,\n              payload: friends,\n            });\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n\n    handleFetchFriends();\n\n    return () => (isMount = false);\n  }, [userCurrent]);\n\n  const handleCloseModal = () =>\n    dispatch({\n      type: RESET_CREATE_ROOM,\n    });\n\n  const handleSubmit = async () => {\n    const data = {};\n\n    if (!nameRef.current.value) {\n      return toast.info(`Please enter name room chat`, { autoClose: 500 });\n    }\n\n    if (!friendAdds.length) {\n      return toast.info(`Please add members to room chat`, { autoClose: 500 });\n    }\n\n    data.members = [\n      userCurrent?._id,\n      ...friendAdds.map((friend) => friend?._id),\n    ];\n\n    if (file) {\n      const images = await imageUpload([file]);\n      data.image = [];\n      for (const key in images[0]) {\n        data.image.push(images[0][key]);\n      }\n    }\n\n    data.name = nameRef.current.value;\n    data.desc = descRef.current.value;\n\n    data.reads = [userCurrent?._id, ...friendAdds.map((friend) => friend?._id)];\n    data.status = [userCurrent?._id];\n    data.isMultiple = true;\n\n    const { conversation } = await postDataAPI(\"/conversation\", data);\n\n    dispatch({\n      type: ADD_CONVERSATION,\n      payload: { conversation },\n    });\n\n    handleCloseModal();\n  };\n\n  return (\n    <div className=\"create_room_modal\">\n      <div className=\"container\">\n        <h3 className=\"title\">Create New Room Chat</h3>\n\n        <div className=\"content\">\n          <div className=\"content-left\">\n            <h4>Add friends to the room</h4>\n\n            {/* List friend */}\n\n            <div className=\"list_friend\">\n              {friends.map((friend) => (\n                <div className=\"friend\" key={friend?._id}>\n                  <div className=\"friend-info\">\n                    <Avatar user={friend} link={false} isStatus={false} />\n                    <p className=\"friend-name\">{friend?.userName}</p>\n                  </div>\n                  <div className=\"button-actions\">\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-success\"\n                      onClick={() =>\n                        dispatch({\n                          type: ADD_FRIEND_TO_ROOM,\n                          payload: friend,\n                        })\n                      }\n                    >\n                      Add\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"content-right\">\n            <h4>Room information you want to create</h4>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"name-room\">Name Room</label>\n              <input\n                ref={nameRef}\n                type=\"text\"\n                className=\"form-control\"\n                id=\"name-room\"\n                placeholder=\"abc\"\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"desc-room\">Description</label>\n              <input\n                ref={descRef}\n                type=\"text\"\n                className=\"form-control\"\n                id=\"desc-room\"\n                placeholder=\"abc\"\n              />\n            </div>\n\n            <div className=\"custom-file\">\n              <input\n                onChange={(e) => setFile(e.target.files[0])}\n                type=\"file\"\n                className=\"custom-file-input\"\n                id=\"validatedCustomFile\"\n              />\n              <label\n                className=\"custom-file-label\"\n                htmlFor=\"validatedCustomFile\"\n              >\n                Choose Avatar...\n              </label>\n            </div>\n\n            <div className=\"display_room_avatar\">\n              {file && <img src={URL.createObjectURL(file)} alt=\"\" />}\n            </div>\n\n            {friendAdds.length > 0 && (\n              <>\n                <h5 className=\"members mt-4\">members</h5>\n                <div className=\"list_friend\">\n                  {friendAdds.map((friend) => (\n                    <div className=\"friend\" key={friend?._id}>\n                      <div className=\"friend-info\">\n                        <Avatar user={friend} link={false} isStatus={false} />\n                        <p className=\"friend-name\">{friend?.userName}</p>\n                      </div>\n                      <div className=\"button-actions\">\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-success\"\n                          onClick={() =>\n                            dispatch({\n                              type: REMOVE_FRIEND_TO_ROOM,\n                              payload: friend,\n                            })\n                          }\n                        >\n                          Delete\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n        <div className=\"footer\">\n          <button\n            type=\"button\"\n            className=\"btn btn-danger\"\n            onClick={handleCloseModal}\n          >\n            Cancel\n          </button>\n          <button type=\"button\" className=\"btn btn-info\" onClick={handleSubmit}>\n            Save\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ModalCreateRoomChat;\n","import React, { useEffect, useMemo } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SET_CALL, SET_USER_STREAM } from \"../../redux/actions\";\nimport ModalCall from \"../../components/modalCall/ModalCall\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport { addVideoStream, openStream } from \"../../helpers/media\";\n\nconst Call = () => {\n  const dispatch = useDispatch();\n\n  const { friendChat } = useSelector((state) => state.chat);\n  const {\n    conversationChat: { _id },\n  } = useSelector((state) => state.chat);\n  const { socket } = useSelector((state) => state.network);\n  const peer = useSelector((state) => state.peer);\n  const { userCurrent } = useSelector((state) => state.auth);\n  const {\n    userStream,\n    isCall,\n    isVideo,\n    userReciverCall,\n    roomCallId,\n    isAnswer,\n    conversationId,\n  } = useSelector((state) => state.call);\n\n  const call = async (isVideo) => {\n    try {\n      const response = await getDataAPI(`/room-chat?conversationId=${_id}`);\n\n      const { roomCall } = response;\n\n      const stream = await openStream(isVideo);\n      dispatch({\n        type: SET_USER_STREAM,\n        payload: stream,\n      });\n\n      if (roomCall) {\n        const { conversationId, isVideo, roomCallId } = roomCall;\n\n        dispatch({\n          type: SET_CALL,\n          payload: {\n            isVideo,\n            isAnswer: true,\n            isCall: true,\n            isCreate: false,\n            conversationId: conversationId,\n          },\n        });\n\n        addVideoStream(stream, true);\n\n        if (!socket) return;\n\n        socket.emit(\"joinRoomCall\", {\n          roomCallId,\n          peerId: peer._id,\n          isCreate: false,\n          conversationId,\n          isVideo,\n          isNext: true,\n          userJoinCallId: userCurrent?._id,\n          userName: userCurrent?.userName,\n          streamId: stream.id,\n        });\n      } else {\n\n        dispatch({\n          type: SET_CALL,\n          payload: {\n            isVideo,\n            userSenderCall: null,\n            userReciverCall: friendChat,\n            isSenderCall: true,\n            roomCallId: uuidv4(),\n            isCall: true,\n            isCreate: true,\n            conversationId: _id,\n          },\n        });\n      }\n    } catch (err) {\n      console.log(\"err\", { err });\n    }\n  };\n\n  useEffect(() => {\n    if (!socket || !userCurrent || !isCall || !userStream) return;\n    if (!isAnswer) {\n      socket?.emit(\"createCall\", {\n        isVideo,\n        sender: {\n          profilePicture: userCurrent.profilePicture,\n          userName: userCurrent.userName,\n          _id: userCurrent?._id,\n        },\n        conversationId,\n        receiverId: userReciverCall?._id,\n        roomCallId,\n        isCreate: true,\n        streamId: userStream.id,\n      });\n    }\n  }, [socket, userCurrent, isCall, userStream, isAnswer]);\n\n  return (\n    <>\n      <div className=\"icon-call\">\n        <i className=\"fa-solid fa-phone\" onClick={() => call(false)}></i>\n        <i className=\"fa-solid fa-video\" onClick={() => call(true)}></i>\n      </div>\n    </>\n  );\n};\n\nexport default Call;\n","import { Cancel } from \"@material-ui/icons\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { REMOVE_FILE } from \"../../redux/actions\";\n\nconst DisplayImageMessage = () => {\n  const { files } = useSelector((state) => state.message);\n\n  const dispatch = useDispatch();\n\n  return (\n    <div\n      className=\"display-image-message\"\n      style={{\n        padding: `${files.length && \"10px\"}`,\n      }}\n    >\n      {files.map((file) => (\n        <div className=\"imgMessage\" key={file.uuid}>\n          <img src={URL.createObjectURL(file)} />\n          <span\n            className=\"imgCancel\"\n            onClick={() =>\n              dispatch({\n                type: REMOVE_FILE,\n                payload: file.uuid,\n              })\n            }\n          >\n            <Cancel />\n          </span>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default DisplayImageMessage;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SET_FILES } from \"../../redux/actions\";\nimport DisplayImageMessage from \"./DisplayImageMessage\";\n\nconst CreateMessage = ({ createNewMessage }) => {\n  const [isTyping, setIsTyping] = useState(false);\n\n  const messageRef = useRef();\n\n  const { files } = useSelector((state) => state.message);\n  const { conversationChat } = useSelector((state) => state.chat);\n\n  const { socket } = useSelector((state) => state.network);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!isTyping) return;\n\n    socket?.emit(\"typing\", {\n      receiverId: conversationChat?.friend?._id,\n      conversationId: conversationChat?._id,\n    });\n  }, [isTyping]);\n\n  const handleSubmit = () => {\n    createNewMessage(messageRef.current.value);\n    messageRef.current.value = \"\";\n    messageRef.current.focus();\n  };\n\n  return (\n    <form\n      className={`input ${!conversationChat && \"disable\"} ${\n        files.length && \"files\"\n      }`}\n      onSubmit={(e) => {\n        e.preventDefault();\n        handleSubmit();\n      }}\n    >\n      <label htmlFor={conversationChat?._id} className=\"icon-camera\">\n        <i className=\"fas fa-camera\"></i>\n      </label>\n      <input\n        style={{ display: \" none\" }}\n        type={\"file\"}\n        id={conversationChat?._id}\n        accept=\".png,.jpeg,.jpg\"\n        multiple\n        onChange={(e) => {\n          const data = Array.from(e.target.files);\n\n          dispatch({\n            type: SET_FILES,\n            payload: [\n              ...data.map((file) => {\n                file.uuid = uuidv4();\n                return file;\n              }),\n              ...files,\n            ],\n          });\n        }}\n      />\n\n      <i className=\"far fa-laugh-beam\"></i>\n\n      <div className=\"inputContainer\">\n        <DisplayImageMessage />\n        <div className=\"inputCreate\">\n          <input\n            ref={messageRef}\n            placeholder=\"Aa\"\n            type=\"text\"\n            onChange={() => setIsTyping(true)}\n            onBlur={() => setIsTyping(false)}\n          />\n          <img\n            src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAARpJREFUSEu9lIERwUAQRX8qoBNUQgeUoAQqQAd0QAdUgA7ogA7MyyyTObncJhE7kzFD/Hd/999m6riyjvX1d8BFUk/SQtLuF+5CBw8DoH2TtJW0kcT3jSoE7CWNAyXE101BIWAuaRU5KiAOsDR3LkchYCjp7PgnrXOBylJUnEOKhSNmdIy9WAbAxcweEuUpADj6AqXuwcRA4eBjUGJOID4RTwHeQv2Cq4HDEqAR79UBTA1CC1N1lZS/lwLQIoT59BTCtIiU5RUb8vu0tMZTJ1svriHXienBTuyOqfeikRIWIvuqsuqsiqetCpdwbAZlyw5hBsdTe6tWreu7paGRcMwBF4Tk0IZP1FJ9rvo9dQ/aaEfvQWvRokDnDl64CTgZWvgaSwAAAABJRU5ErkJggg==\"\n            onClick={handleSubmit}\n          />\n        </div>\n      </div>\n      <i className=\"fas fa-microphone\"></i>\n    </form>\n  );\n};\n\nexport default CreateMessage;\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\n\nconst DisplayMessageContent = ({ message }) => {\n  const [user, setUser] = useState();\n\n  const {\n    conversationChat: { listMembers },\n  } = useSelector((state) => state.chat);\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  useEffect(() => {\n    if (!message || !listMembers) return;\n\n    let userSend;\n    if (message.senderId === userCurrent?._id) userSend = { ...userCurrent };\n    else {\n      userSend = listMembers.find((member) => member?._id === message.senderId);\n    }\n\n    setUser({\n      profilePicture: userSend?.profilePicture,\n      userName: userSend?.userName,\n    });\n  }, [message, listMembers, userCurrent]);\n\n  return (\n    <>\n      {message?.isNotify ? (\n        message?.senderId ? (\n          <div\n            className={`message ${\n              message.senderId === userCurrent?._id ? \"user\" : \"friend\"\n            }`}\n          >\n            {message.senderId === userCurrent?._id\n              ? message?.notify[0]\n              : message?.notify[1]}\n          </div>\n        ) : (\n          <div className={`message notify`}>{message.notify[0]}</div>\n        )\n      ) : (\n        message?.text && (\n          <div\n            className={`message ${\n              message.senderId === userCurrent?._id ? \"user\" : \"friend\"\n            }`}\n          >\n            {message.text}\n          </div>\n        )\n      )}\n    </>\n  );\n};\n\nexport default DisplayMessageContent;\n","import React, { useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport moment from \"moment\";\nimport { deleteDataAPI } from \"../../api/fetchData\";\nimport { UPDATE_LAST_MESSAGE } from \"../../redux/actions\";\nimport DisplayMessageContent from \"./DisplayMessageContent\";\n\nconst DisplayMessage = ({ updateConversation, messages, setMessages }) => {\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { conversationChat } = useSelector((state) => state.chat);\n\n  const { socket } = useSelector((state) => state.network);\n\n  const dispatch = useDispatch();\n\n  const messageRef = useRef();\n\n  useEffect(() => {\n    if (messageRef.current) {\n      messageRef.current.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"end\",\n        inline: \"nearest\",\n      });\n    }\n  }, [messages]);\n\n  const removeMessage = async (message) => {\n    const lastMessage = messages[messages.length - 1];\n\n    try {\n      const response = await deleteDataAPI(`/message/${message?._id}`);\n\n      let newLastMessage = null;\n\n      if (lastMessage?._id === message?._id) {\n        newLastMessage = {\n          conversationId: message.conversationId,\n          senderId: userCurrent?._id,\n          message: \" has withdrawn the message\",\n        };\n\n        updateConversation({\n          conversationId: message?.conversationId,\n          lastMessage: [userCurrent?._id, \" has withdrawn the message\"],\n        });\n\n        dispatch({\n          type: UPDATE_LAST_MESSAGE,\n          payload: newLastMessage,\n        });\n      }\n\n      const { newMessage } = response;\n\n      // toast.success(message, { autoClose: 2000 });\n\n      setMessages((prev) =>\n        prev.map((item) => (item._id == newMessage?._id ? newMessage : item))\n      );\n\n      socket.emit(\"removeMessage\", {\n        newMessage,\n        receverId: conversationChat.members.find(\n          (memberId) => memberId !== userCurrent?._id\n        ),\n        lastMessage: newLastMessage,\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <>\n      {messages.map((message) => (\n        <div className={`messageContent`} key={message?._id} ref={messageRef}>\n          <DisplayMessageContent message={message} />\n\n          {!message?.notify && (\n            <div\n              className={`imgsContainer ${!message?.text && \"add-space\"} ${\n                message.senderId === userCurrent?._id ? \"user\" : \"friend\"\n              }`}\n            >\n              <div className={`imgs `}>\n                {message.images.map((img) => (\n                  <div className=\"img\" key={img.public_id}>\n                    <img src={img.url} />\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          <div\n            className={`time ${\n              (message?.notify && \"notify\") ||\n              (message.senderId === userCurrent?._id && \"user\")\n            }`}\n          >\n            {moment(message?.createdAt).format(\"HH:mm\")}\n          </div>\n\n          {!message.isDeleted && message.senderId === userCurrent?._id && (\n            <span className=\"CrudMessage\">\n              <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAFBJREFUSEtjZKAxYKSx+Qwjy4L/aMFJlO+JUgQ1eNQC2iRYUuKALBeQYsFoJBMMYpoHEUEXYFNASiTT3AKaB9GoBWTFIUFNgyoVEXTtgOQDAEM9DBleh0KcAAAAAElFTkSuQmCC\" />\n\n              <div className=\"buttonActions\">\n                <button type={\"button\"} onClick={() => removeMessage(message)}>\n                  Remove\n                </button>\n              </div>\n            </span>\n          )}\n        </div>\n      ))}\n    </>\n  );\n};\n\nexport default DisplayMessage;\n","import React from \"react\";\n\nconst Typing = () => {\n  return (\n    <>\n      <div className=\"message stark\">\n        <div className=\"typing typing-1\"></div>\n        <div className=\"typing typing-2\"></div>\n        <div className=\"typing typing-3\"></div>\n      </div>\n    </>\n  );\n};\n\nexport default Typing;\n","export const isEmail = (email) => {\n    const emailRegex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return emailRegex.test(email);\n}\n\nexport const checkExit = (array, value) => array.includes(value);\n\nexport const checkMinLength = (val, key, length) => {\n    if (val.length >= length) return '';\n    return `${key} must be at least ${length} characters long`;\n\n}\n\nexport const checkMaxLength = (val, key, length) => {\n    if (val.length <= length) return '';\n    return `${key} user name should not exceed ${length} characters`;\n\n}\n\n\nexport const addElment = (array, value, callback, isFrist = true) => {\n    const isExit =\n        (callback && callback(array, value)) || checkExit(array, value);\n\n    if (isExit) return array;\n    return isFrist ? [...array, value] : [...array, value];\n};\n\n\nexport const displayName = (name) => {\n    return name.length >= 10 ? name.substring(0, 10) + '...' : name.length\n};\n","import { getDataAPI, postDataAPI } from \"../../api/fetchData\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport Call from \"./Call\";\nimport CreateMessage from \"./CreateMessage\";\nimport DisplayMessage from \"./DisplayMessage\";\nimport Typing from \"./Typing\";\n\nimport { SET_FILES, UPDATE_LAST_MESSAGE } from \"../../redux/actions\";\n\nimport MessagePretty from \"../../components/MessagePretty/MessagePretty\";\nimport { addElment, displayName } from \"../../helpers\";\nimport { imageUpload } from \"../../helpers/image\";\n\nconst ChatRoom = () => {\n  const [messages, setMessages] = useState([]);\n  const [hasTyping, setHasTyping] = useState(false);\n\n  const { conversationChat } = useSelector((state) => state.chat);\n\n  const { socket } = useSelector((state) => state.network);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { files } = useSelector((state) => state.message);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n\n    if (!socket) return;\n\n    const handleSetTyping = (conversationId) => {\n      if (conversationChat?._id !== conversationId) return;\n      if (isMount) setHasTyping(true);\n    };\n\n    const updateListMessage = ({ newMessage, lastMessage }) => {\n      if (lastMessage) {\n        dispatch({\n          type: UPDATE_LAST_MESSAGE,\n          payload: lastMessage,\n        });\n      }\n\n      if (newMessage?.conversationId === conversationChat?._id) {\n        setMessages((prev) =>\n          prev.map((message) =>\n            message?._id === newMessage?._id ? newMessage : message\n          )\n        );\n      }\n    };\n\n    const updateFriendConversation = ({ userDisconnectId, time }) => {\n      // if (friendChat?._id === userDisconnectId) {\n      //   dispatch({\n      //     type: UPDATE_FRIEND_CHAT,\n      //     payload: time,\n      //   });\n      // }\n    };\n\n    socket.on(\"displayTyping\", handleSetTyping);\n    socket.on(\"updateMessage\", updateListMessage);\n    socket.on(\"friendLogout\", updateFriendConversation);\n\n    return () => {\n      isMount = false;\n      socket?.off(\"displayTyping\", handleSetTyping);\n      socket?.off(\"updateMessage\", updateListMessage);\n      socket?.off(\"friendLogout\", updateFriendConversation);\n    };\n  }, [socket]);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const getMessages = async () => {\n      if (conversationChat?._id) {\n        try {\n          const response = await getDataAPI(`/message/${conversationChat._id}`);\n          const { message, messages } = response;\n\n          // toast.success(message, { autoClose: 2000 });\n          if (isMount) {\n            setMessages(messages);\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n\n    if (conversationChat) getMessages();\n\n    return () => (isMount = false);\n  }, [conversationChat]);\n\n  useEffect(() => {\n    const handleReceiveMessage = ({ newMessage, receiverId }) => {\n      const { conversationId, text, senderId } = newMessage;\n\n      dispatch({\n        type: UPDATE_LAST_MESSAGE,\n        payload: newMessage,\n      });\n\n      if (!conversationChat) return;\n\n      if (conversationId === conversationChat._id) {\n        updateConversation({\n          receiverId,\n          conversationId,\n          isRead: true,\n        });\n\n        setMessages(\n          (prev) =>\n            addElment(prev, newMessage, (array, newMessage) =>\n              array.find((el) => el?._id === newMessage?._id)\n            ),\n          false\n        );\n\n        setHasTyping(false);\n      }\n    };\n\n    socket?.on(\"getMessage\", handleReceiveMessage);\n\n    return () => {\n      socket?.off(\"getMessage\", handleReceiveMessage);\n    };\n  }, [socket, conversationChat]);\n\n  const updateConversation = async (data) => {\n    try {\n      const response = await postDataAPI(\n        `/conversation/update-conversation`,\n        data\n      );\n\n      const { message } = response;\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const createNewMessage = async (text) => {\n    if (!text && !files.length) return;\n    try {\n      const messageCreate = {\n        conversationId: conversationChat?._id,\n        senderId: userCurrent?._id,\n      };\n\n      if (text) messageCreate.text = text;\n\n      const images = await imageUpload(files);\n      messageCreate.images = [...images];\n\n      const response = await postDataAPI(`/message`, messageCreate);\n      const { message, newMessage } = response;\n\n      updateConversation({\n        conversationId: conversationChat?._id,\n        reads: [userCurrent?._id],\n      });\n\n      dispatch({\n        type: UPDATE_LAST_MESSAGE,\n        payload: newMessage,\n      });\n\n      dispatch({\n        type: SET_FILES,\n        payload: [],\n      });\n\n      socket?.emit(\"sendMessage\", {\n        receivers: conversationChat.members,\n        newMessage,\n      });\n\n      // toast.success(message, { autoClose: 2000 });\n\n      setMessages((prev) => [...prev, newMessage]);\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"contact bar\">\n        {conversationChat && (\n          <>\n            <div className=\"pic\">\n              {conversationChat.images &&\n                (conversationChat.images.length === 1 ? (\n                  <img\n                    className=\"one-img\"\n                    src={conversationChat.images[0].src}\n                    alt=\"\"\n                  />\n                ) : (\n                  <div className=\"multiple-img\">\n                    {conversationChat.images.map((img) => (\n                      <img src={img.src} key={img.key} />\n                    ))}\n                  </div>\n                ))}\n            </div>\n            <div className=\"contact-info\">\n              <div className=\"name\">\n                {displayName(conversationChat.nameConversation)}\n              </div>\n            </div>\n            <Call />\n          </>\n        )}\n      </div>\n      <div className=\"messages\" id=\"chat\">\n        {conversationChat ? (\n          <div className=\"messagesContainer\">\n            <DisplayMessage\n              updateConversation={updateConversation}\n              setMessages={setMessages}\n              messages={messages}\n            />\n            {hasTyping && <Typing />}\n          </div>\n        ) : (\n          <MessagePretty mess=\"Chọn Bạn Để Chat\" />\n        )}\n      </div>\n      <CreateMessage createNewMessage={createNewMessage} />\n    </>\n  );\n};\n\nexport default ChatRoom;\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { DISPLAY_CONVERSATION_PENDING, SET_IS_SHOW } from \"../../redux/actions\";\nimport \"./optionsMessage.scss\";\n\nconst OptionsMessage = () => {\n  const [number, setNumber] = useState(0);\n\n  const { listConversation } = useSelector((state) => state.chat);\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!listConversation || !userCurrent) return;\n\n    const { _id } = userCurrent;\n\n    const numberSet = listConversation.reduce((prevState, conversation) => {\n      const {status} = conversation;\n      return status.includes(_id) ? prevState : prevState + 1;\n    }, 0);\n\n    setNumber(numberSet);\n  }, [listConversation, userCurrent]);\n\n  const displayConversationPending = () => {\n    dispatch({\n      type: SET_IS_SHOW,\n      payload: true,\n    });\n  };\n\n  return (\n    <h2 className=\"options-message\" onClick={displayConversationPending}>\n      <div className=\"number\">\n        <i className=\"fa-solid fa-message\"></i>\n        <span>{number}</span>\n      </div>\n      Message waiting\n    </h2>\n  );\n};\n\nexport default OptionsMessage;\n","import \"./messenger.scss\";\n\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getDataAPI, postDataAPI } from \"../../api/fetchData\";\n\nimport Conversation from \"../../components/conversation/Conversation\";\nimport ModalCreateRoomChat from \"../../components/ModalCreateRoomChat/ModalCreateRoomChat\";\nimport ChatRoom from \"./ChatRoom\";\nimport OptionsMessage from \"./OptionsMessage\";\n\nimport { SET_CREATE_ROOM } from \"../../redux/actions\";\nimport {\n  SET_CONVERSATION_CHAT,\n  SET_LIST_CONVERSATION,\n} from \"../../redux/actions/chatActions\";\n\nexport default function Messenger() {\n  const [conversationDisplays, setConversationDisplays] = useState([]);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { isCreate } = useSelector((state) => state.createRoomChat);\n  const { conversationChat, listConversation, isShowConversationPending } =\n    useSelector((state) => state.chat);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n\n    const getConversations = async () => {\n      if (userCurrent) {\n        try {\n          const response = await getDataAPI(\n            `/conversation/get-all-conversations`\n          );\n\n          let { message, conversations } = response;\n\n          // toast.success(message, { autoClose: 2000 });\n\n          conversations = conversations.map((conversation) => {\n            if (conversation.roomCallId) {\n              return {\n                ...conversation,\n                lastMessage: [\"notify\", `${\"Conversation going on\"}`],\n              };\n            }\n\n            return conversation;\n          });\n\n          if (isMount) {\n            dispatch({\n              type: SET_LIST_CONVERSATION,\n              payload: {\n                userId: userCurrent?._id,\n                conversations,\n              },\n            });\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    getConversations();\n\n    return () => (isMount = false);\n  }, [userCurrent]);\n\n  useEffect(() => {\n    if (!listConversation || !userCurrent) return;\n\n    const { _id } = userCurrent;\n\n    let data;\n\n    if (isShowConversationPending) {\n      data = listConversation.filter(\n        (conversation) => !conversation.status.includes(_id)\n      );\n    } else {\n      data = listConversation.filter((conversation) =>\n        conversation.status.includes(_id)\n      );\n    }\n\n    setConversationDisplays(data);\n  }, [listConversation, isShowConversationPending, userCurrent]);\n\n  const handleChosseCurrentChat = async (conversation) => {\n    if (!conversationChat || conversation?._id !== conversationChat._id) {\n      const { _id } = userCurrent;\n      const { status, reads } = conversation;\n\n      const dataUpdate = {};\n      let isChangeType = false;\n\n      if (!status.includes(_id)) {\n        isChangeType = true;\n\n        dataUpdate.status = [...status, _id];\n      }\n\n      if (!reads.includes(_id)) {\n        dataUpdate.reads = [...reads, _id];\n      }\n\n      if (Object.entries(dataUpdate).length) {\n        const response = await postDataAPI(\n          \"/conversation/update-conversation\",\n          {\n            conversationId: conversation?._id,\n            ...dataUpdate,\n          }\n        );\n      }\n\n      dispatch({\n        type: SET_CONVERSATION_CHAT,\n        payload: {\n          conversationChat: {\n            ...conversation,\n            ...dataUpdate,\n          },\n          isChangeType,\n        },\n      });\n    }\n  };\n\n  return (\n    <>\n      <div className=\"center\">\n        <div className=\"contacts\">\n          <div className=\"options-chat\">\n            <i className=\"fas fa-bars fa-2x\"></i>\n            <div className=\"list_options_chat\">\n              <button\n                onClick={() => {\n                  dispatch({\n                    type: SET_CREATE_ROOM,\n                    payload: true,\n                  });\n                }}\n              >\n                Create chat room\n              </button>\n            </div>\n          </div>\n\n          <OptionsMessage />\n\n          <div className=\"contacts-container\">\n            {conversationDisplays &&\n              conversationDisplays.map((conversation) => (\n                <div\n                  className=\"contact\"\n                  key={conversation?._id}\n                  onClick={() => {\n                    handleChosseCurrentChat(conversation);\n                  }}\n                >\n                  <Conversation conversation={conversation} />\n                </div>\n              ))}\n          </div>\n        </div>\n        <div className=\"chat\">\n          <ChatRoom conversationChat={conversationChat} />\n        </div>\n      </div>\n\n      {isCreate && <ModalCreateRoomChat />}\n    </>\n  );\n}\n","import { Chat } from \"@material-ui/icons\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Messenger from \"../../pages/messenger/Messenger\";\nimport { INCREASE_NUMBER_UNREAD, SET_CHAT } from \"../../redux/actions\";\n\nconst IconMessage = () => {\n  const [number, setNumber] = useState(0);\n\n  const { isChat, conversationUnReads } = useSelector((state) => state.chat);\n  const { elClick } = useSelector((state) => state.global);\n\n  const { socket } = useSelector((state) => state.network);\n  const { conversationChat } = useSelector((state) => state.chat);\n\n  const dispatch = useDispatch();\n\n  const messageRef = useRef();\n  useEffect(() => {\n    if (!elClick) return;\n    if (\n      messageRef.current.contains(elClick) ||\n      elClick.classList.contains(\"messSkip\")\n    )\n      return;\n    dispatch({\n      type: SET_CHAT,\n      payload: { isChat: false },\n    });\n  }, [elClick]);\n\n  useEffect(() => {\n    if (!conversationUnReads) return;\n\n    setNumber(conversationUnReads.length);\n  }, [conversationUnReads]);\n\n  useEffect(() => {\n    const updateNumberConversationUnRead = ({ newMessage }) => {\n      const { conversationId } = newMessage;\n\n      if (!conversationChat || conversationChat?._id !== conversationId) {\n        if (!conversationUnReads.includes(conversationId)) {\n          dispatch({\n            type: INCREASE_NUMBER_UNREAD,\n          });\n        }\n      }\n    };\n\n    socket?.on(\"getMessage\", updateNumberConversationUnRead);\n\n    return () => {\n      socket?.off(\"getMessage\", updateNumberConversationUnRead);\n    };\n  }, [socket, conversationUnReads, conversationChat]);\n\n  const toogleMessage = () => {\n    const data = {\n      isChat: !isChat,\n    };\n\n    if (isChat) {\n      data.conversationChat = null;\n    }\n\n    dispatch({\n      type: SET_CHAT,\n      payload: data,\n    });\n  };\n\n  return (\n    <div ref={messageRef}>\n      <Chat onClick={toogleMessage} />\n      <span className=\"topbarIconBadge\">{number}</span>\n      {isChat && <Messenger />}\n    </div>\n  );\n};\n\nexport default IconMessage;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { deleteDataAPI, putDataAPI } from \"../../api/fetchData\";\nimport {\n  REMOVE_NOTIFICATION,\n  UPDATE_LIST_CONVERSATION,\n} from \"../../redux/actions\";\nimport \"./notificationAction.scss\";\n\nconst NotificationAction = ({ notification }) => {\n  const dispatch = useDispatch();\n\n  const handleRemoveNotification = async () => {\n    try {\n      const response = await deleteDataAPI(`/notification/${notification._id}`);\n\n      const { message } = response;\n\n      toast.success(message, { autoClose: 1000 });\n\n      dispatch({\n        type: REMOVE_NOTIFICATION,\n        payload: notification?._id,\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const handleUnReadNotification = async () => {\n    try {\n      const response = await putDataAPI(\n        `/notification/unRead/${notification._id}`\n      );\n\n      const { message, newNotification } = response;\n\n      toast.success(message, { autoClose: 1000 });\n\n      dispatch({\n        type: UPDATE_LIST_CONVERSATION,\n        payload: newNotification,\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const readNotification = async () => {\n    try {\n      const response = await putDataAPI(`/notification/${notification._id}`);\n\n      const { message, newNotification } = response;\n\n      toast.success(message, { autoClose: 1000 });\n\n      dispatch({\n        type: UPDATE_LIST_CONVERSATION,\n        payload: newNotification,\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"notificationCrudAction\">\n        <button\n          className={`${notification.isRead ? \"disable\" : \"\"} `}\n          onClick={readNotification}\n        >\n          Mark\n        </button>\n\n        <button\n          onClick={handleUnReadNotification}\n          className={`${!notification.isRead ? \"disable\" : \"\"} `}\n        >\n          Unread\n        </button>\n\n        <button onClick={handleRemoveNotification}>Remove</button>\n      </div>\n    </>\n  );\n};\n\nexport default NotificationAction;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Avatar from \"../avatar/Avatar\";\nimport { toast } from \"react-toastify\";\nimport * as timeago from \"timeago.js\";\nimport NotificationAction from \"./NotificationAction\";\nimport { getDataAPI, putDataAPI } from \"../../api/fetchData\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { UPDATE_LIST_CONVERSATION } from \"../../redux/actions\";\n\nconst DisplayNotifycation = ({ notification }) => {\n  const [user, setUser] = useState(null);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const navigate = useNavigate();\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n\n    const fetchUser = async () => {\n      if (!notification?.senderId) return;\n\n      try {\n        const response = await getDataAPI(\n          `/user?userId=${notification?.senderId}`\n        );\n\n        const { user } = response;\n\n        if (isMount) {\n          setUser(user);\n        }\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    };\n    fetchUser();\n\n    return () => {\n      isMount = false;\n    };\n  }, [notification]);\n\n  const updateReadNotification = async () => {\n    try {\n      if (!notification || notification?.isRead || !userCurrent) return;\n\n      const response = await putDataAPI(`/notification/${notification?._id}`);\n\n      const { message, notification: newNotification } = response;\n      dispatch({\n        type: UPDATE_LIST_CONVERSATION,\n        payload: newNotification,\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"circle\"></div>\n      <span className=\"time\">{timeago.format(notification?.createdAt)}</span>\n      <p\n        className={`${notification?.isRead ? \"read\" : \"\"}`}\n        onClick={() => {\n          updateReadNotification();\n          navigate(notification?.link);\n        }}\n      >\n        <b>{user?.userName}</b>\n        {notification?.text.slice(\n          notification?.text.indexOf(user?.userName) + user?.userName?.length\n        )}\n      </p>\n      <NotificationAction notification={notification} />\n    </>\n  );\n};\n\nexport default DisplayNotifycation;\n","export const debounce = (callback, delay, ...rest) => {\n  if (!delay) delay = 1000;\n  let timerId;\n\n  return () => {\n    if (timerId) {\n      clearTimeout(timerId);\n      timerId = null;\n    }\n\n    timerId = setTimeout(() => {\n      callback(...rest);\n    }, delay);\n  };\n};\n","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { deleteDataAPI, putDataAPI } from \"../../api/fetchData\";\nimport { debounce } from \"../../helpers/debounceFunction\";\nimport {\n  REMOVE_ALL_NOTIFICATION,\n  SET_NOTIFICATIONs_DISPLAY,\n  SET_TYPE_NOTIFICATION,\n} from \"../../redux/actions\";\n\nconst MenuNotifycation = () => {\n  const { isShowMenu, listNotifycation, type } = useSelector(\n    (state) => state.notification\n  );\n\n  const setNotifications = (type) => {\n    dispatch({\n      type: SET_TYPE_NOTIFICATION,\n      payload: type,\n    });\n  };\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n    let payload;\n\n    if (!listNotifycation) return;\n\n    if (type === \"all\") payload = listNotifycation;\n    else if (type === \"unread\") {\n      payload = listNotifycation.filter((notification) => !notification.isRead);\n    } else\n      payload = listNotifycation.filter((notification) => notification.isRead);\n\n    if (isMount) {\n      dispatch({\n        type: SET_NOTIFICATIONs_DISPLAY,\n        payload,\n      });\n    }\n\n    return () => (isMount = false);\n  }, [type]);\n\n  const removeAllNotification = async () => {\n    try {\n      const response = await deleteDataAPI(\n        `/notification/delete-all-notification`\n      );\n\n      const { message } = response;\n\n      dispatch({\n        type: REMOVE_ALL_NOTIFICATION,\n      });\n\n      toast.success(message, { autoClose: 1000 });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const readAllNotification = async () => {\n    try {\n      const response = await putDataAPI(`/notification/read-all-notification`);\n\n      const { message, notifications } = response;\n\n      toast.success(message, { autoClose: 1000 });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <div className={`menu ${isShowMenu && \"active\"}`}>\n      <ul>\n        <li\n          className=\"hvr-underline-from-left\"\n          onClick={debounce(setNotifications, 500, \"all\")}\n        >\n          <span className=\"fa-solid fa-border-all\"></span>All\n        </li>\n        <li\n          className=\"hvr-underline-from-left\"\n          onClick={debounce(setNotifications, 500, \"read\")}\n        >\n          <span className=\"fa-solid fa-check-double\"></span>Read\n        </li>\n        <li\n          className=\"hvr-underline-from-left\"\n          onClick={debounce(setNotifications, 500, \"unread\")}\n        >\n          <span className=\"fa-solid fa-rectangle-xmark\"></span>Un Read\n        </li>\n        <li\n          className=\"hvr-underline-from-left\"\n          onClick={debounce(removeAllNotification, 500)}\n        >\n          <span className=\"fa-solid fa-trash-can\"></span>Remove all\n        </li>\n        <li\n          className=\"hvr-underline-from-left\"\n          onClick={debounce(readAllNotification, 500)}\n        >\n         <span className=\"fa-solid fa-marker\"></span>Mark\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport default MenuNotifycation;\n","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  ADD_NOTIFICATION,\n  ADD_NOTIFICATION_DISPLAY,\n  SET_SHOW_NOTIFICATION_MENU,\n} from \"../../redux/actions\";\nimport DisplayNotification from \"./DisplayNotification\";\nimport MenuNotifycation from \"./MenuNotifycation\";\nimport \"./notification.scss\";\n\nconst Notification = () => {\n  const { type, notificationDisplays, isShowMenu } = useSelector(\n    (state) => state.notification\n  );\n  const { socket } = useSelector((state) => state.network);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!socket) return;\n\n    const updateListNotification = ({ notification }) => {\n      if (type === \"all\" && type === \"read\") {\n        dispatch({\n          type: ADD_NOTIFICATION_DISPLAY,\n          payload: notification,\n        });\n      }\n\n      dispatch({\n        type: ADD_NOTIFICATION,\n        payload: notification,\n      });\n    };\n\n    socket.on(\"updateNotification\", updateListNotification);\n\n    return () => socket?.off(\"updateNotification\", updateListNotification);\n  }, [socket]);\n\n  return (\n    // <div\n    //   className=\"notifycationContainer\"\n    //   style={{\n    //     animation: \"\",\n    //   }}\n    // >\n    //   <div className=\"notificationOptions\">\n    //     <button\n    //       className=\"btn-notification allNotification\"\n    //\n    //     >\n    //       All Notification\n    //     </button>\n    //     <button\n    //\n    //       className=\"btn-notification notificationReads\"\n    //     >\n    //       Read\n    //     </button>\n    //     <button\n    //       className=\"btn-notification notificationNotReads\"\n    //\n    //     >\n    //       Unread\n    //     </button>\n    //     <button\n    //       className=\"btn-notification removeAllNotifycation\"\n    //\n    //     >\n    //       Remove all notifications\n    //     </button>\n    //     <button\n    //       className=\"btn-notification markAllAsRead\"\n    //\n    //     >\n    //       Mark all as read\n    //     </button>\n    //   </div>\n    //   {notificationDisplays &&\n    //     notificationDisplays.map((notification) => (\n    //       <DisplayNotification\n    //         notification={notification}\n    //         key={notification?._id}\n    //       />\n    //     ))}\n    // </div>\n\n    <div className=\"frame\">\n      <div className={`panel ${isShowMenu && \"show-menu\"}`}>\n        <div className=\"header flex\">\n          <div\n            className=\"menu-icon\"\n            onClick={() => dispatch({ type: SET_SHOW_NOTIFICATION_MENU })}\n          >\n            <div className={`dash-top ${isShowMenu && \"slide-top\"}`}></div>\n            <div className=\"dash-bottom\"></div>\n            <div className={`circle circle-1 ${isShowMenu && \"slide\"}`}></div>\n          </div>\n          <span className=\"title\">Notifications</span>\n        </div>\n\n        <div className=\"notifications clearfix\">\n          <div className=\"line\"></div>\n          {notificationDisplays &&\n            notificationDisplays.map((notification, idx) => (\n              <div\n                className=\"notification\"\n                key={notification?._id}\n                style={{\n                  animation: `here-am-i 0.5s ease-out ${0.4 + idx * 0.2}s`,\n                  animationFillMode: \"both\",\n                }}\n              >\n                <DisplayNotification\n                  key={notification?._id}\n                  notification={notification}\n                />\n              </div>\n            ))}\n        </div>\n      </div>\n\n      <MenuNotifycation />\n    </div>\n  );\n};\n\nexport default Notification;\n","import { Notifications } from \"@material-ui/icons\";\nimport React, { useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport {\n  INCREASE_NUMBER_NOTIFICATION_UNREAD,\n  SET_LIST_NOTIFICATION,\n  SET_NUMBER_NOTIFICATION_UNREAD,\n  SET_SHOW_NOTIFICATION,\n} from \"../../redux/actions\";\nimport Notification from \"../notification/Notification\";\nimport \"./iconNotification.scss\";\n\nconst IconNotification = () => {\n  const { number, isShow } = useSelector((state) => state.notification);\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { socket } = useSelector((state) => state.network);\n\n  const { elClick } = useSelector((state) => state.global);\n  const dispatch = useDispatch();\n\n  const notifyRef = useRef();\n  useEffect(() => {\n    if (notifyRef.current.contains(elClick)) return;\n    dispatch({\n      type: SET_SHOW_NOTIFICATION,\n      payload: false,\n    });\n  }, [elClick]);\n\n  useEffect(() => {\n    if (!socket) return;\n\n    const updateNumberNotification = () => {\n      if (!isShow) {\n        dispatch({\n          type: INCREASE_NUMBER_NOTIFICATION_UNREAD,\n        });\n      }\n    };\n\n    socket.on(\"updateNotification\", updateNumberNotification);\n\n    return () => socket?.off(\"updateNotification\", updateNumberNotification);\n  }, [socket, isShow]);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const getConversation = async () => {\n      if (userCurrent && isShow) {\n        try {\n          const response = await getDataAPI(`/notification`);\n\n          const { message, notifications } = response;\n\n          const data = [];\n          notifications.forEach((notification) => {\n            !notification.isRead && data.push(notification);\n          });\n          notifications.forEach((notification) => {\n            notification.isRead && data.push(notification);\n          });\n\n          // toast.success(message, { autoClose: 1000 });\n          if (isMount) {\n            dispatch({\n              type: SET_LIST_NOTIFICATION,\n              payload: data,\n            });\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    getConversation();\n\n    return () => (isMount = false);\n  }, [userCurrent, isShow]);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const getNumberNotificationNotRead = async () => {\n      if (userCurrent) {\n        try {\n          const response = await getDataAPI(\n            `/notification/get-number-notification-not-read`\n          );\n\n          const { message, number } = response;\n\n          // toast.success(message, { autoClose: 1000 });\n          if (isMount) {\n            dispatch({\n              type: SET_NUMBER_NOTIFICATION_UNREAD,\n              payload: number,\n            });\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    getNumberNotificationNotRead();\n\n    return () => (isMount = false);\n  }, [userCurrent]);\n\n  const toogleNotification = () => {\n    dispatch({\n      type: SET_SHOW_NOTIFICATION,\n      payload: !isShow,\n    });\n  };\n\n  return (\n    <div ref={notifyRef}>\n      <Notifications\n        className=\"svg-notification\"\n        style={{\n          cursor: \"pointer\",\n        }}\n        onClick={toogleNotification}\n      />\n      <span className=\"topbarIconBadge\">{number}</span>\n      <div className=\"my-btn-border-notification\"></div>\n      <div className=\"my-btn-1\"></div>\n      {isShow && <Notification />}\n    </div>\n  );\n};\n\nexport default IconNotification;\n","import React, { useMemo } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { deleteDataAPI, postDataAPI, putDataAPI } from \"../../api/fetchData\";\nimport { REMOVE_FRIEND_REQUEST } from \"../../redux/actions\";\n\nconst ButtonActionsFriendRequest = ({ friendRequest, user }) => {\n  const { type } = useSelector((state) => state.friendRequest);\n  const { socket } = useSelector((state) => state.network);\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const status = useMemo(() => friendRequest.status, [friendRequest]);\n\n  const dispatch = useDispatch();\n\n  const acceptFriendRequest = async () => {\n    try {\n      if (friendRequest) {\n        const response = await putDataAPI(\n          `/friend-request/accept-friend-request`,\n          {\n            friendId: user?._id,\n            friendRequestId: friendRequest?._id,\n          }\n        );\n\n        const { message } = response;\n\n        toast.success(message, { autoClose: 1000 });\n\n        dispatch({\n          type: REMOVE_FRIEND_REQUEST,\n          payload: friendRequest?._id,\n        });\n\n        await postDataAPI(\"/notification\", {\n          link: \"\",\n          userId: user?._id,\n          text: userCurrent?.userName + \" has accepted your friend request\",\n        });\n\n        // socket?.emit(\"acceptFriendRequest\", {\n        //   friendId: user?._id,\n        //   userId: userCurrent?._id,\n        // });\n      } else {\n        toast.error(\"An error occurred while making this request!!!\", {\n          autoClose: 1000,\n        });\n      }\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const refuseFriendRequest = async () => {\n    try {\n      if (friendRequest) {\n        const response = await putDataAPI(`/friend-request/refuse-request`, {\n          friendRequestId: friendRequest?._id,\n        });\n\n        dispatch({\n          type: REMOVE_FRIEND_REQUEST,\n          payload: friendRequest?._id,\n        });\n\n        const { message } = response;\n\n        toast.success(message, { autoClose: 1000 });\n\n        // socket?.emit(\"changeFriendRequest\", {\n        //   friendId: user?._id,\n        //   status: \"\",\n        // });\n      } else {\n        toast.error(\"An error occurred while making this request!!!\", {\n          autoClose: 1000,\n        });\n      }\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const deleteFriendRequest = async () => {\n    try {\n      if (friendRequest) {\n        const response = await deleteDataAPI(\n          `/friend-request/${friendRequest?._id}`\n        );\n\n        dispatch({\n          type: REMOVE_FRIEND_REQUEST,\n          payload: friendRequest?._id,\n        });\n\n        const { message } = response;\n\n        toast.success(message, { autoClose: 1000 });\n\n        // socket?.emit(\"changeFriendRequest\", {\n        //   friendId: user?._id,\n        //   status: \"\",\n        // });\n      } else {\n        toast.error(\"An error occurred while making this request!!!\", {\n          autoClose: 1000,\n        });\n      }\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const sendToFriendRequest = async () => {\n    try {\n      if (friendRequest) {\n        const response = await putDataAPI(`/friend-request`, {\n          friendRequestId: friendRequest?._id,\n          status: 1,\n        });\n\n        dispatch({\n          type: REMOVE_FRIEND_REQUEST,\n          payload: friendRequest?._id,\n        });\n\n        const { message } = response;\n\n        toast.success(message, { autoClose: 1000 });\n\n        const responseCreateNotification = await postDataAPI(\"/notification\", {\n          link: \"\",\n          userId: user?._id,\n          text: userCurrent?.userName + \" sent a friend request\",\n        });\n\n        const { notification } = responseCreateNotification;\n\n        socket?.emit(\"createNotification\", { notification });\n      } else {\n        toast.error(\"An error occurred while making this request!!!\", {\n          autoClose: 1000,\n        });\n        throw new Error(\"Friend Request not Exit\");\n      }\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <div className=\"button-actions\">\n      {type === \"received\" ? (\n        <>\n          <button\n            type=\"button\"\n            className=\"btn btn-primary\"\n            onClick={acceptFriendRequest}\n          >\n            Accept\n          </button>\n          <button\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            onClick={refuseFriendRequest}\n          >\n            Refusse\n          </button>\n        </>\n      ) : (\n        <>\n          {status === 1 ? (\n            <>\n              <button\n                type=\"button\"\n                className=\"btn btn-warning\"\n                onClick={deleteFriendRequest}\n              >\n                Cancel invitation\n              </button>\n            </>\n          ) : (\n            <>\n              <button\n                type=\"button\"\n                className=\"btn btn-light\"\n                onClick={sendToFriendRequest}\n              >\n                Send to\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn btn-danger\"\n                onClick={deleteFriendRequest}\n              >\n                Remove\n              </button>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ButtonActionsFriendRequest;\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport Avatar from \"../avatar/Avatar\";\nimport ButtonActionsFriendRequest from \"./ButtonActionsFriendRequest\";\n\nconst FriendRequest = ({ friendRequest }) => {\n  const [user, setUser] = useState();\n\n  const { type } = useSelector((state) => state.friendRequest);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const handleGetUser = async () => {\n      try {\n        const id =\n          type === \"received\"\n            ? friendRequest?.senderId\n            : friendRequest?.receiverId;\n        if (!id) {\n          toast.error(\"id user not found\", { autoClose: 1000 });\n          throw new Error(\"id user not found\");\n        }\n        const response = await getDataAPI(`/user?userId=${id}`);\n\n        const { user } = response;\n\n        if (isMount) setUser(user);\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    };\n\n    handleGetUser();\n\n    return () => (isMount = false);\n  }, []);\n\n  return (\n    <>\n      {user && (\n        <>\n          <div className=\"info\">\n            <Avatar height=\"60px\" width=\"60px\" user={user} />\n            <span>{user?.userName}</span>\n          </div>\n          <ButtonActionsFriendRequest\n            user={user}\n            friendRequest={friendRequest}\n          />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default FriendRequest;\n","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport FriendRequest from \"./FriendRequest\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport { SET_LIST_FRIEND_REQUEST } from \"../../redux/actions\";\n\nconst DisplayFriendRequest = () => {\n  const { type, listFriendRequest } = useSelector(\n    (state) => state.friendRequest\n  );\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n\n    const getFriendRequest = async () => {\n      if (type) {\n        try {\n          const response = await getDataAPI(\n            `/friend-request/get-all-requests-${type}`\n          );\n\n          const { message, friendRequests } = response;\n\n          // toast.success(message, { autoClose: 2000 });\n          if (isMount) {\n            dispatch({\n              type: SET_LIST_FRIEND_REQUEST,\n              payload: friendRequests,\n            });\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    getFriendRequest();\n\n    return () => (isMount = false);\n  }, [type]);\n\n  return (\n    <>\n      {listFriendRequest &&\n        listFriendRequest.map((friendRequest) => (\n          <div className=\"friendRequest\" key={friendRequest?._id}>\n            <FriendRequest friendRequest={friendRequest} />\n          </div>\n        ))}\n    </>\n  );\n};\n\nexport default DisplayFriendRequest;\n","import React from \"react\";\nimport \"./boxFriendRequests.scss\";\nimport DisplayFriendRequest from \"../friendRequest/DisplayFriendRequest\";\nimport { SET_TYPE } from \"../../redux/actions\";\nimport { useDispatch } from \"react-redux\";\n\nconst BoxFriendRequests = () => {\n  const dispatch = useDispatch();\n\n  return (\n    <div className=\"boxFriendRequest nav-item dropdown\">\n      <h3 className=\"title\">Options</h3>\n      <div className=\"button-options\">\n        <button\n          type=\"button\"\n          className=\"btn btn-success\"\n          onClick={() =>\n            dispatch({\n              type: SET_TYPE,\n              payload: \"received\",\n            })\n          }\n        >\n          Friend request received\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-dark\"\n          onClick={() =>\n            dispatch({\n              type: SET_TYPE,\n              payload: \"sent\",\n            })\n          }\n        >\n          Friend request sent\n        </button>\n      </div>\n      <DisplayFriendRequest />\n      <div className=\"friendRequest\"></div>\n    </div>\n  );\n};\n\nexport default BoxFriendRequests;\n","import { Person } from \"@material-ui/icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport BoxFriendRequests from \"./BoxFriendRequests\";\r\n\r\nconst IconPerson = () => {\r\n  const [isShowFriendRequests, setIsShowFriendRequests] = useState(false);\r\n  const { number: numberFriendRequest } = useSelector(\r\n    (state) => state.friendRequest\r\n  );\r\n  const { elClick } = useSelector((state) => state.global);\r\n\r\n  const divRef = useRef();\r\n  useEffect(() => {\r\n    if (divRef.current.contains(elClick)) return;\r\n    setIsShowFriendRequests(false);\r\n  }, [elClick]);\r\n\r\n  return (\r\n    <div ref={divRef}>\r\n      <Person onClick={() => setIsShowFriendRequests((prev) => !prev)} />\r\n      {isShowFriendRequests && <BoxFriendRequests />}\r\n      <span className=\"topbarIconBadge\">{numberFriendRequest}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IconPerson;\r\n","import { Search } from \"@material-ui/icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { debounce } from \"../../helpers/debounceFunction\";\r\nimport Avatar from \"../avatar/Avatar\";\r\n\r\nconst SeachUser = () => {\r\n  const [usersSearch, setUsersSearch] = useState();\r\n  const [isShowUsersSearch, setIsShowUsersSearch] = useState(false);\r\n  const searchInputRef = useRef();\r\n  const searchRef = useRef();\r\n  const navigate = useNavigate();\r\n\r\n  const { elClick } = useSelector((state) => state.global);\r\n\r\n  useEffect(() => {\r\n    if (searchRef.current.contains(elClick)) return;\r\n    setIsShowUsersSearch(false);\r\n  }, [elClick]);\r\n\r\n  const handleSearchUsers = async () => {\r\n    if (!searchInputRef?.current?.value) {\r\n      return;\r\n    }\r\n    try {\r\n      const response = await getDataAPI(\r\n        `/user/search-user/${searchInputRef.current.value}`\r\n      );\r\n\r\n      const { users } = response;\r\n\r\n      if (users.length) {\r\n        setIsShowUsersSearch(true);\r\n        setUsersSearch(users);\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"searchbar\" ref={searchRef}>\r\n      <Search className=\"searchIcon\" />\r\n      <input\r\n        ref={searchInputRef}\r\n        placeholder=\"Search for friend, post or video\"\r\n        className=\"searchInput\"\r\n        onFocus={() => {\r\n          if (!isShowUsersSearch) setIsShowUsersSearch(true);\r\n        }}\r\n        onChange={debounce(handleSearchUsers, 2000)}\r\n      />\r\n\r\n      {usersSearch && isShowUsersSearch && (\r\n        <div className=\"displayUsersSearch\">\r\n          {usersSearch.map((user) => (\r\n            <div\r\n              className=\"userSearchContainer\"\r\n              key={user?._id}\r\n              onClick={() => navigate(`/profile/${user?._id}`)}\r\n            >\r\n              <Avatar user={user} />\r\n              <span>{user?.userName}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SeachUser;\r\n","import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"../../contants\";\nimport {\n  INCREASE_NUMBER_FRIEND_REQUEST,\n  SET_NUMBER_FRIEND_REQUEST,\n  SET_STATUS_CONVERSATION,\n  USER_LOGOUT,\n} from \"../../redux/actions\";\nimport IconMessage from \"./IconMessage\";\nimport IconNotifycation from \"./IconNotifycation\";\nimport IconPerson from \"./IconPerson\";\nimport SeachUser from \"./SeachUser\";\nimport \"./topbar.scss\";\n\nexport default function Topbar() {\n  const [notifications, setNotifications] = useState([]);\n  const [firstShowNotification, setFirstShowNotification] = useState(false);\n\n  const { socket } = useSelector((state) => state.network);\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const dispatch = useDispatch();\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    let isMount = true;\n\n    const getNumberFriendRequest = async () => {\n      try {\n        const response = await getDataAPI(`/friend-request/get-number`);\n\n        const { number } = response;\n\n        if (isMount) {\n          dispatch({\n            type: SET_NUMBER_FRIEND_REQUEST,\n            payload: number,\n          });\n        }\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    };\n\n    getNumberFriendRequest();\n\n    return () => (isMount = false);\n  }, []);\n\n  useEffect(() => {\n    const updateNumberFriendRequest = () => {\n      dispatch({\n        type: INCREASE_NUMBER_FRIEND_REQUEST,\n      });\n    };\n\n    if (socket) {\n      socket.on(\"updateNotification\", updateNumberFriendRequest);\n    }\n\n    return () => socket?.off(\"updateNotification\", updateNumberFriendRequest);\n  }, [socket]);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const handleUpdateNotification = ({ notification }) => {\n      if (isMount) {\n        setNotifications((prev) => [notification, ...prev]);\n        setFirstShowNotification(false);\n      }\n    };\n\n    if (socket) {\n      socket.on(\"updateNotification\", handleUpdateNotification);\n    }\n\n    return () => {\n      isMount = false;\n      socket?.off(\"updateNotification\", handleUpdateNotification);\n    };\n  }, [socket]);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const getNumberConversationUnWatch = async () => {\n      if (userCurrent) {\n        try {\n          const response = await getDataAPI(\n            `/conversation/get-status-conversation`\n          );\n\n          const { conversations } = response;\n\n          dispatch({\n            type: SET_STATUS_CONVERSATION,\n            payload: conversations,\n          });\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    getNumberConversationUnWatch();\n\n    return () => (isMount = false);\n  }, [userCurrent]);\n\n  const logOut = () => {\n    dispatch({\n      type: USER_LOGOUT,\n    });\n\n    localStorage.setItem(REFRESH_TOKEN, \"\");\n    localStorage.setItem(ACCESS_TOKEN, \"\");\n\n    localStorage.setItem(\"userId\", \"\");\n\n    socket?.emit(\"userLogOut\", userCurrent?._id);\n    navigate(\"/login\");\n  };\n\n  return (\n    <div className=\"topbarContainer\">\n      <div className=\"topbarLeft\">\n        <Link to=\"/\" style={{ textDecoration: \"none\" }}>\n          <span className=\"logo\">CoderNoob</span>\n        </Link>\n      </div>\n      <div className=\"topbarCenter\">\n        <SeachUser />\n      </div>\n      <div className=\"topbarRight\">\n        <div className=\"topbarLinks\">\n          <span className=\"topbarLink\">Homepage</span>\n          <span className=\"topbarLink\">Timeline</span>\n        </div>\n        <div className=\"topbarIcons\">\n          <div className=\"topbarIconItem\">\n            <IconPerson />\n          </div>\n          <div className=\"topbarIconItem\">\n            <IconMessage />\n          </div>\n          <div className=\"topbarIconItem\">\n            <IconNotifycation />\n          </div>\n        </div>\n        <div onClick={logOut} className=\"logout\">\n          <i className=\"fa-solid fa-right-from-bracket topbarImg\"></i>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./updateImage.scss\";\n\nimport React from \"react\";\nimport { PermMedia } from \"@material-ui/icons\";\n\nconst UpdateImage = ({ text, id, type }) => {\n  return (\n    <div className={`updateImage ${type}`}>\n      <button\n        data-toggle=\"modal\"\n        data-target={`#${id}`}\n        className=\"shareOption\"\n      >\n        <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n        <span className=\"shareOptionText\">{text}</span>\n      </button>\n    </div>\n  );\n};\n\nexport default UpdateImage;\n","import React from \"react\";\nimport \"./buttonSocials.scss\";\n\nconst ButtonSocials = () => {\n  return (\n    <ul className=\"button-socials\">\n      <li>\n        <span className=\"facebook\">\n          <i className=\"fab fa-facebook \" aria-hidden=\"true\"></i>\n        </span>\n      </li>\n      <li>\n        <span className=\"twitter\">\n          <i className=\"fab fa-twitter \" aria-hidden=\"true\"></i>\n        </span>\n      </li>\n      <li>\n        <span className=\"google\">\n          <i className=\"fab fa-google-plus-g \" aria-hidden=\"true\"></i>\n        </span>\n      </li>\n      <li>\n        <span className=\"linkedin\">\n          <i className=\"fab fa-linkedin \" aria-hidden=\"true\"></i>\n        </span>\n      </li>\n      <li>\n        <span className=\"instagram\">\n          <i className=\"fab fa-instagram \" aria-hidden=\"true\"></i>\n        </span>\n      </li>\n    </ul>\n  );\n};\n\nexport default ButtonSocials;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Avatar from \"../../components/avatar/Avatar\";\nimport ButtonSocials from \"../../components/buttonSocials/ButtonSocials\";\nimport UpdateImage from \"../../components/UpdateImage/UpdateImage\";\n\nconst ProfileLeft = ({ idAvatar }) => {\n  const { userProfile } = useSelector((state) => state.profile);\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  return (\n    <div className=\"left col-lg-4\">\n      <div className=\"photo-left\">\n        <Avatar\n          className=\"profile\"\n          width={\"200px\"}\n          height={\"200px\"}\n          user={userProfile}\n          isShowOffline={false}\n          link={false}\n        />\n        {userProfile?._id === userCurrent?._id && (\n          <UpdateImage id={idAvatar.current} type=\"avatar\" />\n        )}\n      </div>\n      <h4 className=\"name\">{userProfile?.userName}</h4>\n      <p className=\"info\">{userProfile?.email}</p>\n      <div className=\"stats row\">\n        <div className=\"stat col-4\">\n          <p className=\"number-stat\">{userProfile?.followers?.length}</p>\n          <p className=\"desc-stat\">Followers</p>\n        </div>\n        <div className=\"stat col-4\">\n          <p className=\"number-stat\">{userProfile?.followings?.length}</p>\n          <p className=\"desc-stat\">Following</p>\n        </div>\n        <div className=\"stat col-4\">\n          <p className=\"number-stat\">{userProfile?.friends?.length}</p>\n          <p className=\"desc-stat\">Friend</p>\n        </div>\n      </div>\n      <p className=\"desc\">{userProfile?.desc}</p>\n\n      <ButtonSocials />\n      {/* <div className=\"social\"> */}\n      {/* <i className=\"fa-brands fa-facebook-square\"></i>\n        <i className=\"fa-brands fa-twitter-square\"></i>\n        <i className=\"fa-brands fa-youtube-square\"></i>\n        <i className=\"fa-brands fa-github-square\"></i> */}\n      {/* </div> */}\n    </div>\n  );\n};\n\nexport default ProfileLeft;\n","import \"./editProfile.scss\";\n\nimport React, { useRef } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { toast } from \"react-toastify\";\nimport { patchDataAPI } from \"../../api/fetchData\";\nimport { UPDATE_USER } from \"../../redux/actions\";\n\nconst EditProfile = ({ onEdit }) => {\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const dispatch = useDispatch();\n\n  const nameRef = useRef();\n  const phoneRef = useRef();\n  const addressRef = useRef();\n  const descRef = useRef();\n  const relationshipRef = useRef();\n\n  const updateUser = async (e) => {\n    e.preventDefault();\n\n    if (!nameRef.current.value) {\n      return toast.error(\"This field cannot be left blank\", {\n        autoClose: 1000,\n      });\n    }\n\n    try {\n      const data = {\n        userName: nameRef.current.value,\n        phone: phoneRef.current.value,\n        address: addressRef.current.value,\n        relationship: relationshipRef.current.value,\n        desc: descRef.current.value,\n        userId: userCurrent?._id,\n      };\n\n      const response = await patchDataAPI(\"/user/update-user\", data);\n\n      const { message, user: userUpdate } = response;\n\n      dispatch({\n        type: UPDATE_USER,\n        payload: userUpdate,\n      });\n\n      onEdit(false);\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <form className=\"edit-profile\" onSubmit={updateUser}>\n      <div className=\"page\">\n        <label className=\"field field_v1\">\n          <input\n            defaultValue={userCurrent?.userName || \"\"}\n            ref={nameRef}\n            className=\"field__input\"\n            placeholder=\"e.g Coder Noob\"\n          />\n          <span className=\"field__label-wrap\">\n            <span className=\"field__label\">Full name</span>\n          </span>\n        </label>\n        <label className=\"field field_v2\">\n          <input\n            defaultValue={userCurrent?.email}\n            className=\"field__input\"\n            placeholder=\"abc@gmail.com\"\n            disabled\n          />\n          <span className=\"field__label-wrap\">\n            <span className=\"field__label\">Email</span>\n          </span>\n        </label>\n        <label className=\"field field_v3\">\n          <input\n            defaultValue={userCurrent?.address || \"\"}\n            ref={addressRef}\n            className=\"field__input\"\n            placeholder=\"e.g Nam Dinh, Viet Nam\"\n          />\n          <span className=\"field__label-wrap\">\n            <span className=\"field__label\">Address</span>\n          </span>\n        </label>\n        <label className=\"field field_v2\">\n          <input\n            defaultValue={userCurrent?.phone || \"\"}\n            ref={phoneRef}\n            className=\"field__input\"\n            placeholder=\"e.g (+84) 0399738474\"\n          />\n          <span className=\"field__label-wrap\">\n            <span className=\"field__label\">Phone</span>\n          </span>\n        </label>\n        <label className=\"field field_v3\">\n          <input\n            defaultValue={userCurrent?.desc || \"\"}\n            ref={descRef}\n            className=\"field__input\"\n            placeholder=\"Fill in what you like\"\n          />\n          <span className=\"field__label-wrap\">\n            <span className=\"field__label\">Description</span>\n          </span>\n        </label>\n        <div className=\"input-group mb-3\">\n          <div className=\"input-group-prepend\">\n            <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">\n              Relationship\n            </label>\n          </div>\n          <select\n            ref={relationshipRef}\n            className=\"custom-select\"\n            id=\"inputGroupSelect01\"\n          >\n            <option value=\"\" selected>\n              Choose...\n            </option>\n            <option value=\"Single\">Single</option>\n            <option value=\"Get married\">Get married</option>\n            <option value=\"Dating\">Dating</option>\n            <option value=\"In a complicated relationship\">\n              In a complicated relationship\n            </option>\n          </select>\n        </div>\n      </div>\n      <div className=\"linktr\">\n        <button\n          type=\"button\"\n          className=\"btn btn-danger\"\n          onClick={() => onEdit(false)}\n        >\n          Cancel\n        </button>\n        <button className=\"btn btn-primary\" type=\"submit\">\n          Save\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default EditProfile;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\n\nconst DisplayDetailInfo = ({ onEdit }) => {\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { userProfile } = useSelector((state) => state.profile);\n\n  return (\n    <div className=\"col-12\">\n      <div className=\"card mb-3\">\n        <div className=\"card-body\">\n          <div className=\"row\">\n            <div className=\"col-sm-3\">\n              <h6 className=\"mb-0\">Full Name</h6>\n            </div>\n\n            <div className=\"col-sm-9 text-secondary\">\n              {userProfile?.userName}\n            </div>\n          </div>\n          <hr />\n          <div className=\"row\">\n            <div className=\"col-sm-3\">\n              <h6 className=\"mb-0\">Email</h6>\n            </div>\n\n            <div className=\"col-sm-9 text-secondary\">{userProfile?.email}</div>\n          </div>\n          <hr />\n          <div className=\"row\">\n            <div className=\"col-sm-3\">\n              <h6 className=\"mb-0\">Phone</h6>\n            </div>\n\n            <div className=\"col-sm-9 text-secondary\">\n              {userProfile?.phone\n                ? userProfile?.phone\n                : \"Not updated information\"}\n            </div>\n          </div>\n          <hr />\n          <div className=\"row\">\n            <div className=\"col-sm-3\">\n              <h6 className=\"mb-0\">Relationship</h6>\n            </div>\n            <div className=\"col-sm-9 text-secondary\">\n              {userProfile?.relationship\n                ? userProfile?.relationship\n                : \"Not updated information\"}\n            </div>\n          </div>\n          <hr />\n          <div className=\"row\">\n            <div className=\"col-sm-3\">\n              <h6 className=\"mb-0\">Address</h6>\n            </div>\n\n            <div className=\"col-sm-9 text-secondary\">\n              {userProfile?.address\n                ? userProfile?.address\n                : \"Not updated information\"}\n            </div>\n          </div>\n          <hr />\n\n          {userProfile?._id === userCurrent?._id && (\n            <div className=\"row\">\n              <div className=\"col-12\">\n                <button className=\"btn btn-info\" onClick={() => onEdit(true)}>\n                  Edit\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DisplayDetailInfo;\n","import React, { useState } from \"react\";\nimport EditProfile from \"./EditProfile\";\nimport DisplayDetailInfo from \"./DisplayDetailInfo\";\n\nconst AboutProfile = ({ user }) => {\n  const [isEditInfo, setIsEditInfo] = useState(false);\n\n  return (\n    <>\n      {!isEditInfo ? (\n        <DisplayDetailInfo onEdit={setIsEditInfo} />\n      ) : (\n        <EditProfile onEdit={setIsEditInfo} />\n      )}\n    </>\n  );\n};\n\nexport default AboutProfile;\n","import React from \"react\";\nimport Slider from \"react-slick\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport \"slick-carousel/slick/slick.css\";\nimport \"./index.scss\";\n\nconst Carousel = ({ children, length }) => {\n  const setup = {\n    dots: true,\n    infinite: true,\n    speed: 500,\n    slidesToShow: Math.min(5, length),\n    slidesToScroll: 1,\n    lazyLoad: true,\n    responsive: [\n      {\n        breakpoint: 1024,\n        settings: {\n          slidesToShow: Math.min(3, length),\n          slidesToScroll: 3,\n          infinite: true,\n          dots: true,\n        },\n      },\n      {\n        breakpoint: 600,\n        settings: {\n          slidesToShow: Math.min(2, length),\n          slidesToScroll: 2,\n          initialSlide: 2,\n        },\n      },\n      {\n        breakpoint: 480,\n        settings: {\n          slidesToShow: Math.min(1, length),\n          slidesToScroll: 1,\n        },\n      },\n    ],\n  };\n  return <Slider {...setup}>{children}</Slider>;\n};\n\nexport default Carousel;\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport Carousel from \"../../components/Carousel/Carousel\";\nimport { PUBLIC_FOLDER } from \"../../contants\";\nimport \"./displayFriendList.scss\";\n\nconst DisplayFriendList = () => {\n  const [friendList, setFriendList] = useState([]);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { userProfile } = useSelector((state) => state.profile);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const handleFetchFriends = async () => {\n      if (userProfile && userProfile._id) {\n        try {\n          const response = await getDataAPI(\n            `/user/get-friends/${userProfile?._id}`\n          );\n\n          const { friends } = response;\n          if (isMount) {\n            setFriendList(friends);\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    handleFetchFriends();\n\n    return () => (isMount = false);\n  }, [userProfile?._id, userCurrent]);\n  const navigate = useNavigate();\n\n  return (\n    <div className=\"row friend-container\">\n      <Carousel length={friendList.length}>\n        {friendList.map((friend) => (\n          <div\n            key={friend?._id}\n            onClick={() => navigate(`/profile/${friend?._id}`)}\n          >\n            <div className=\"our-friend\">\n              <div className=\"picture\">\n                <img\n                  className=\"img-fluid\"\n                  src={\n                    (friend?.profilePicture?.length &&\n                      friend?.profilePicture[0]) ||\n                    PUBLIC_FOLDER + \"no-avatar.png\"\n                  }\n                />\n              </div>\n              <div className=\"friend-content\">\n                <p className=\"name\">{friend?.userName}</p>\n                <h4 className=\"title\">{friend?.desc}</h4>\n              </div>\n              <ul className=\"social\">\n                <li>\n                  <i className=\"fa-brands fa-facebook-square\"></i>\n                </li>\n                <li>\n                  <i className=\"fa-brands fa-twitter-square\"></i>\n                </li>\n                <li>\n                  <i className=\"fa-brands fa-youtube-square\"></i>\n                </li>\n                <li>\n                  <i className=\"fa-brands fa-github-square\"></i>\n                </li>\n              </ul>\n            </div>\n          </div>\n        ))}\n      </Carousel>\n    </div>\n  );\n};\n\nexport default DisplayFriendList;\n","import React from \"react\";\n\nconst NavProfile = ({ option, setOption }) => {\n  const options = [\"friends\", \"about\", \"posts\", \"share\", \"moreOption\"];\n\n  return (\n    <ul className=\"nav\">\n      {options.map((el) => (\n        <li\n          key={el}\n          className={`${option === el ? \"choose\" : \"\"}`}\n          onClick={() => setOption(el)}\n        >\n          {el[0].toUpperCase() + el.slice(1)}\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default NavProfile;\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { putDataAPI } from \"../../api/fetchData\";\nimport { FOLLOW, UN_FOLLOW } from \"../../redux/actions\";\n\nconst ButtonFollow = () => {\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { userProfile } = useSelector((state) => state.profile);\n\n  const [followed, setFollowed] = useState(\n    () => userCurrent?.followings.includes(userProfile?._id) || false\n  );\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (userCurrent) {\n      setFollowed(userCurrent?.followings.includes(userProfile?._id));\n    }\n  }, [userCurrent, userProfile]);\n\n  const handleClick = async () => {\n    if (userProfile?._id) {\n      try {\n        let response;\n        if (followed) {\n          response = await putDataAPI(`/user/unfollow/${userProfile._id}`, {\n            userId: userCurrent._id,\n          });\n\n          dispatch({\n            type: UN_FOLLOW,\n            payload: userProfile._id,\n          });\n        } else {\n          response = await putDataAPI(`/user/follow/${userProfile._id}`, {\n            userId: userCurrent._id,\n          });\n          dispatch({\n            type: FOLLOW,\n            payload: userProfile._id,\n          });\n        }\n\n        const { message } = response;\n        toast.success(message, { autoClose: 2000 });\n        setFollowed(!followed);\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    }\n  };\n\n  return (\n    <button\n      className=\"card__action__button card__action--follow\"\n      onClick={handleClick}\n    >\n      {followed ? \"Unfollow\" : \"Follow\"}\n    </button>\n  );\n};\n\nexport default ButtonFollow;\n","import React from \"react\";\n\nconst ModalConfirmDelete = ({ id, onRemove, text }) => {\n  return (\n    <>\n      <div\n        className=\"modal fade\"\n        id={id}\n        tabIndex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div className=\"modal-dialog\" role=\"document\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\n                Confirm\n              </h5>\n              <button\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              {`You confirm to permanently delete this ` + text}\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                type=\"button\"\n                className=\"btn btn-danger\"\n                onClick={onRemove}\n                data-dismiss=\"modal\"\n              >\n                Remove\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                data-dismiss=\"modal\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ModalConfirmDelete;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport {\n  getDataAPI,\n  postDataAPI,\n  putDataAPI,\n  deleteDataAPI,\n} from \"../../api/fetchData\";\nimport ModalConfirmDelete from \"../../components/modal/ModalConfirmDelete\";\nimport {\n  ADD_FRIEND,\n  REMOVE_FRIEND,\n  SET_STATUS_FRIEND,\n} from \"../../redux/actions\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nconst ButtonFriend = () => {\n  const [friendRequest, setFriendRequest] = useState();\n  const [statusFriend, setStatusFriend] = useState(\"\");\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { userProfile, isFriend } = useSelector((state) => state.profile);\n\n  const { socket } = useSelector((state) => state.network);\n\n  const idModalRemoveFriendRequest = useRef(uuidv4());\n  const idModal = useRef(uuidv4());\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const addListFriend = (userId) => {\n      dispatch({\n        type: ADD_FRIEND,\n        payload: userId,\n      });\n    };\n\n    const removeListFriend = (userId) => {\n      dispatch({\n        type: REMOVE_FRIEND,\n        payload: userId,\n      });\n    };\n\n    const updateStatus = ({ status, friendRequest }) => {\n      if (!status) {\n        setStatusFriend(\"\");\n        setFriendRequest();\n      } else {\n        setStatusFriend(status);\n        setFriendRequest(friendRequest);\n      }\n    };\n\n    if (socket) {\n      socket.on(\"addListFriend\", addListFriend);\n      socket.on(\"removeListFriend\", removeListFriend);\n      socket.on(\"updateStatus\", updateStatus);\n    }\n\n    return () => {\n      socket?.off(\"addListFriend\", addListFriend);\n      socket?.off(\"removeListFriend\", removeListFriend);\n      socket?.off(\"updateStatus\", updateStatus);\n    };\n  }, [socket]);\n\n  useEffect(() => {\n    const handleCheckStatusFriend = async () => {\n      const responses = await Promise.all([\n        getDataAPI(\n          `/friend-request?friendId=${userProfile?._id}&type=sender&status=1`\n        ),\n        getDataAPI(\n          `/friend-request?friendId=${userProfile?._id}&type=receive&status=1`\n        ),\n      ]);\n\n      let status = \"\";\n\n      responses.forEach((response) => {\n        const { message, friendRequestDb, type } = response;\n\n        if (friendRequestDb) {\n          setFriendRequest(friendRequestDb);\n          status = type;\n        }\n      });\n\n      return status;\n    };\n\n    const handleSetStatusFriend = async () => {\n      if (userProfile && userCurrent) {\n        if (isFriend) {\n          setStatusFriend(\"friend\");\n        } else {\n          const status = await handleCheckStatusFriend();\n          setStatusFriend(status);\n        }\n      }\n    };\n\n    handleSetStatusFriend();\n  }, [userProfile, userCurrent]);\n\n  const createFriendRequest = async () => {\n    try {\n      const response = await postDataAPI(\"/friend-request\", {\n        receiverId: userProfile?._id,\n      });\n\n      const { message, friendRequestDb } = response;\n\n      toast.success(message, { autoClose: 1000 });\n\n      setFriendRequest(friendRequestDb);\n      setStatusFriend(\"sender\");\n\n      socket?.emit(\"changeFriendRequest\", {\n        friendId: userProfile?._id,\n        friendRequest: friendRequestDb,\n        status: \"receiver\",\n      });\n\n      const responseCreateNotification = await postDataAPI(\"/notification\", {\n        link: `/profile/${userCurrent?._id}`,\n        receiverId: userProfile?._id,\n        text: userCurrent?.userName + \" sent a friend request\",\n        senderId: userCurrent?._id,\n      });\n\n      const { notification } = responseCreateNotification;\n\n      socket?.emit(\"createNotification\", { notification });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const removeFriendRequest = async () => {\n    try {\n      if (friendRequest) {\n        const response = await deleteDataAPI(\n          `/friend-request/${friendRequest?._id}`\n        );\n\n        const { message } = response;\n\n        // toast.success(message, { autoClose: 1000 });\n\n        setFriendRequest();\n        setStatusFriend(\"\");\n\n        socket?.emit(\"changeFriendRequest\", {\n          friendId: userProfile?._id,\n          status: \"\",\n        });\n      } else {\n        toast.error(\"An error occurred while making this request!!!\", {\n          autoClose: 1000,\n        });\n      }\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const refuseFriendRequest = async () => {\n    try {\n      if (friendRequest) {\n        const response = await putDataAPI(`/friend-request/refuse-request`, {\n          friendRequestId: friendRequest?._id,\n        });\n\n        const { message } = response;\n\n        toast.success(message, { autoClose: 1000 });\n\n        setFriendRequest();\n        setStatusFriend(\"\");\n\n        socket?.emit(\"changeFriendRequest\", {\n          friendId: userProfile?._id,\n          status: \"\",\n        });\n      } else {\n        toast.error(\"An error occurred while making this request!!!\", {\n          autoClose: 1000,\n        });\n      }\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const acceptFriendRequest = async () => {\n    try {\n      if (friendRequest) {\n        const response = await putDataAPI(\n          `/friend-request/accept-friend-request`,\n          {\n            friendId: userProfile?._id,\n            friendRequestId: friendRequest?._id,\n          }\n        );\n\n        const { message } = response;\n\n        toast.success(message, { autoClose: 1000 });\n\n        setFriendRequest();\n        setStatusFriend(\"friend\");\n\n        dispatch({\n          type: ADD_FRIEND,\n          payload: userProfile?._id,\n        });\n\n        dispatch({\n          type: SET_STATUS_FRIEND,\n          payload: true,\n        });\n\n        const responseCreateNotification = await postDataAPI(\"/notification\", {\n          link: `/profile/${userCurrent?._id}`,\n          receiverId: userProfile?._id,\n          text: userCurrent?.userName + \" has accept friend request\",\n          senderId: userCurrent?._id,\n        });\n\n        const { notification } = responseCreateNotification;\n\n        socket?.emit(\"acceptFriendRequest\", {\n          friendId: userProfile?._id,\n          userId: userCurrent?._id,\n          notification,\n        });\n      } else {\n        toast.error(\"An error occurred while making this request!!!\", {\n          autoClose: 1000,\n        });\n      }\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const unFriend = async () => {\n    try {\n      if (!friendRequest && statusFriend === \"friend\") {\n        const response = await putDataAPI(`/friend-request/unfriend`, {\n          friendId: userProfile?._id,\n        });\n\n        const { message } = response;\n\n        toast.success(message, { autoClose: 1000 });\n\n        setStatusFriend(\"\");\n\n        dispatch({\n          type: REMOVE_FRIEND,\n          payload: userProfile?._id,\n        });\n\n        dispatch({\n          type: SET_STATUS_FRIEND,\n          payload: false,\n        });\n\n        socket?.emit(\"removeFriend\", {\n          friendId: userProfile?._id,\n          userId: userCurrent?._id,\n        });\n      } else {\n        toast.error(\"An error occurred while making this request!!!\", {\n          autoClose: 1000,\n        });\n      }\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <>\n      {statusFriend ? (\n        statusFriend === \"friend\" ? (\n          <>\n            <button className=\"card__action__button card__action--friend\">\n              friend\n            </button>\n\n            <button\n              data-toggle=\"modal\"\n              data-target={`#${idModal.current}`}\n              className=\"card__action__button card__action--unfriend\"\n            >\n              Unfriend\n            </button>\n          </>\n        ) : (\n          <>\n            {statusFriend === \"sender\" ? (\n              <>\n                <button\n                  data-toggle=\"modal\"\n                  data-target={`#${idModalRemoveFriendRequest.current}`}\n                  className=\"card__action__button card__action--deleteRequestFriend\"\n                >\n                  Cancel friend request\n                </button>\n              </>\n            ) : (\n              <>\n                <button\n                  className=\"card__action__button card__action--acceptFriendRequset\"\n                  onClick={acceptFriendRequest}\n                >\n                  Accept friend request\n                </button>\n\n                <button\n                  className=\"card__action__button card__action--refuseFriendRequset\"\n                  onClick={refuseFriendRequest}\n                >\n                  Refuse friend request\n                </button>\n              </>\n            )}\n          </>\n        )\n      ) : (\n        <>\n          <button\n            className=\"card__action__button card__action--addFriend\"\n            onClick={createFriendRequest}\n          >\n            add friend\n          </button>\n        </>\n      )}\n\n      <ModalConfirmDelete\n        id={idModalRemoveFriendRequest.current}\n        text={\"Are you sure you want to cancel this friend request?\"}\n        onRemove={removeFriendRequest}\n      />\n\n      <ModalConfirmDelete\n        id={idModal.current}\n        text={`You definitely want to unfriend ${userProfile?.userName}`}\n        onRemove={unFriend}\n      />\n    </>\n  );\n};\n\nexport default ButtonFriend;\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport {\n  ADD_CONVERSATION,\n  SET_CHAT,\n  SET_NEW_CONVERSATION_CHAT,\n} from \"../../redux/actions\";\n\nconst ButtonMessage = () => {\n  const [isClick, setIsClick] = useState(false);\n\n  const { userProfile, isFriend } = useSelector((state) => state.profile);\n\n  const { listConversation, isChat, conversationChat } = useSelector(\n    (state) => state.chat\n  );\n\n  useEffect(() => {\n    if (isClick && isChat && listConversation) {\n      handleSetConversationChat();\n    }\n  }, [isChat, listConversation, isClick]);\n\n  const handleSetConversationChat = async () => {\n    if (!userProfile) return;\n    try {\n      const response = await getDataAPI(\n        `conversation?receiverId=${userProfile?._id}&isFriend=${\n          isFriend ? true : false\n        }`\n      );\n\n      const { message, conversation } = response;\n\n      if (conversation?._id === conversationChat?._id) return;\n\n      if (!listConversation?.find((item) => item?._id === conversation?._id)) {\n        dispatch({\n          type: ADD_CONVERSATION,\n          payload: { conversation },\n        });\n      }\n\n      dispatch({\n        type: SET_NEW_CONVERSATION_CHAT,\n        payload: { conversationChat: conversation },\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const dispatch = useDispatch();\n\n  return (\n    <button\n      className=\"card__action__button card__action--message messSkip\"\n      onClick={() => {\n        setIsClick(true);\n        dispatch({\n          type: SET_CHAT,\n          payload: {\n            isChat: true,\n          },\n        });\n      }}\n    >\n      message\n    </button>\n  );\n};\n\nexport default ButtonMessage;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport ButtonFollow from \"./ButtonFollow\";\nimport ButtonFriend from \"./ButtonFriend\";\nimport ButtonMessage from \"./ButtonMessage\";\nimport \"./profileButtonActions.scss\";\n\nconst ProfileButtonAction = () => {\n  const { isMe } = useSelector((state) => state.profile);\n\n  return (\n    <>\n      {!isMe ? (\n        <div className=\"card-profile__action\">\n          <ButtonFriend />\n          <ButtonFollow />\n          <ButtonMessage />\n        </div>\n      ) : (\n        <></>\n      )}\n    </>\n  );\n};\n\nexport default ProfileButtonAction;\n","import React, { useEffect, useState } from \"react\";\nimport AboutProfile from \"./AboutProfile\";\nimport DisplayFriendList from \"./DisplayFriendList\";\nimport NavProfile from \"./NavProfile\";\nimport ProfileButtonActions from \"./ProfileButtonActions\";\n\nconst ProfileRight = () => {\n  const [option, setOption] = useState(\"friends\");\n\n  return (\n    <div className=\"right col-lg-8\">\n      <ProfileButtonActions  />\n      <NavProfile option={option} setOption={setOption} />\n      <div className=\"display-content\">\n        {option === \"about\" && <AboutProfile />}\n        {option === \"friends\" && <DisplayFriendList />}\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileRight;\n","import \"./ShowError.css\";\r\n\r\nexport default function ShowError({ err }) {\r\n  if (!err) return \"\";\r\n  return <span className=\"mes-err\">{err}</span>;\r\n}\r\n","export const generateKeywords = (displayName) => {\n  // liet ke tat cac hoan vi. vd: name = [\"David\", \"Van\", \"Teo\"]\n  // => [\"David\", \"Van\", \"Teo\"], [\"David\", \"Teo\", \"Van\"], [\"Teo\", \"David\", \"Van\"],...\n  const name = displayName.split(\" \").filter((word) => word);\n\n  const length = name.length;\n  let flagArray = [];\n  let result = [];\n  let stringArray = [];\n\n  /**\n   * khoi tao mang flag false\n   * dung de danh dau xem gia tri\n   * tai vi tri nay da duoc su dung\n   * hay chua\n   **/\n  for (let i = 0; i < length; i++) {\n    flagArray[i] = false;\n  }\n\n  const createKeywords = (name) => {\n    const arrName = [];\n    let curName = \"\";\n    name.split(\"\").forEach((letter) => {\n      curName += letter;\n      arrName.push(curName);\n    });\n    return arrName;\n  };\n\n  function findPermutation(k) {\n    for (let i = 0; i < length; i++) {\n      if (!flagArray[i]) {\n        flagArray[i] = true;\n        result[k] = name[i];\n\n        if (k === length - 1) {\n          stringArray.push(result.join(\" \"));\n        }\n\n        findPermutation(k + 1);\n        flagArray[i] = false;\n      }\n    }\n  }\n\n  findPermutation(0);\n\n  const keywords = stringArray.reduce((acc, cur) => {\n    const words = createKeywords(cur);\n    return [...acc, ...words];\n  }, []);\n\n  return keywords;\n};\n","import { CircularProgress } from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { register } from \"../../api/authApi\";\nimport ShowError from \"../../components/ShowError/ShowError\";\nimport { checkMinLength, isEmail } from \"../../helpers\";\nimport { generateKeywords } from \"../../helpers/createKeyUser\";\nimport \"./register.css\";\n\nconst initValue = {\n  userName: \"\",\n  password: \"\",\n  passwordAgain: \"\",\n  email: \"\",\n};\n\nexport default function Register() {\n  const [infoRegister, setInfoRegister] = useState({ ...initValue });\n  const [errors, setErrors] = useState({ ...initValue });\n  const { isLoading } = useSelector((state) => state.auth);\n  const dispatch = useDispatch();\n  const handleChangeInput = (e) => {\n    const { name, value } = e.target;\n    setInfoRegister({ ...infoRegister, [name]: value });\n    setErrors({ ...errors, [name]: \"\" });\n  };\n  const navigate = useNavigate();\n\n  const handleRegister = (e) => {\n    e.preventDefault();\n    let isValid = true;\n\n    let newErrors = { ...errors };\n    if (!isEmail(infoRegister.email)) {\n      isValid = false;\n      newErrors.email = \"Please enter the correct email format\";\n    }\n    let message;\n    message = checkMinLength(infoRegister.userName, \"User name\", 6);\n    if (message) {\n      isValid = false;\n      newErrors.userName = message;\n    }\n\n    message = checkMinLength(infoRegister.password, \"Password\", 6);\n    if (message) {\n      isValid = false;\n      newErrors.password = message;\n    }\n\n    if (infoRegister.password !== infoRegister.passwordAgain) {\n      newErrors.passwordAgain = \"Passwords do not match\";\n      isValid = false;\n    }\n    if (!isValid) {\n      setErrors(newErrors);\n      toast.warn(\"Please check registration information again\", {\n        autoClose: 500,\n      });\n      return;\n    }\n\n    infoRegister.keys = generateKeywords(infoRegister.userName);\n    dispatch(register(infoRegister, navigate));\n  };\n\n  return (\n    <div className=\"register\">\n      <div className=\"registerWrapper\">\n        <div className=\"registerLeft\">\n          <h3 className=\"registerLogo\">CoderNoob</h3>\n          <span className=\"registerDesc\">\n            Connect with friends and the world around you on CoderNoob.\n          </span>\n        </div>\n        <div className=\"registerRight\">\n          <form className=\"registerBox\" onSubmit={handleRegister}>\n            <input\n              required\n              minLength={\"6\"}\n              maxLength={\"20\"}\n              name=\"userName\"\n              value={infoRegister.userName}\n              onChange={handleChangeInput}\n              placeholder=\"Username\"\n              className=\"registerInput\"\n            />\n            <ShowError err={errors.userName}></ShowError>\n            <input\n              required\n              name=\"email\"\n              value={infoRegister.email}\n              onChange={handleChangeInput}\n              placeholder=\"Email\"\n              type=\"email\"\n              className=\"registerInput\"\n            />\n            <ShowError err={errors.email}></ShowError>\n            <input\n              type=\"password\"\n              minLength={\"6\"}\n              required\n              name=\"password\"\n              value={infoRegister.password}\n              onChange={handleChangeInput}\n              placeholder=\"Password\"\n              className=\"registerInput\"\n            />\n            <ShowError err={errors.password}></ShowError>\n            <input\n              type=\"password\"\n              minLength={\"6\"}\n              required\n              name=\"passwordAgain\"\n              value={infoRegister.passwordAgain}\n              onChange={handleChangeInput}\n              placeholder=\"Password Again\"\n              className=\"registerInput\"\n            />\n            <ShowError err={errors.passwordAgain}></ShowError>\n            <button className=\"registerButton\">\n              {isLoading ? <CircularProgress color={\"primary\"} /> : \"Register\"}\n            </button>\n            <Link\n              to={\"/login\"}\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n              }}\n            >\n              <button className=\"redirectButton\">\n                {isLoading ? (\n                  <CircularProgress color={\"primary\"} />\n                ) : (\n                  \"Log into Account\"\n                )}\n              </button>\n            </Link>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./notFound.scss\";\n\nconst NotFound = () => {\n  return (\n    <div className=\"pageNotFound\">\n      <h1>404 Error Page</h1>\n      <p className=\"zoom-area\">\n        <b>Page Not Found</b>\n      </p>\n      <section className=\"error-container\">\n        <span className=\"four\">\n          <span className=\"screen-reader-text\">4</span>\n        </span>\n        <span className=\"zero\">\n          <span className=\"screen-reader-text\">0</span>\n        </span>\n        <span className=\"four\">\n          <span className=\"screen-reader-text\">4</span>\n        </span>\n      </section>\n      <div className=\"link-container\">\n        <Link to=\"/\" className=\"more-link\">\n          Visit page Home\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default NotFound;\n","import { Link } from \"react-router-dom\";\nimport { PUBLIC_FOLDER } from \"../../contants\";\nimport \"./userSuggestion.css\";\nexport default function UserSuggestion({ user }) {\n  return (\n    <Link\n      to={\"/profile/\" + user?._id}\n      style={{\n        textDecoration: \"none\",\n        color: \"#333\",\n      }}\n    >\n      <li className=\"sidebarFriend\">\n        <img\n          className=\"sidebarFriendImg\"\n          src={\n            (user?.profilePicture?.length && user?.profilePicture[0]) ||\n            PUBLIC_FOLDER + \"no-avatar.png\"\n          }\n          alt=\"\"\n        />\n        <span className=\"sidebarFriendName\">{user.userName}</span>\n      </li>\n    </Link>\n  );\n}\n","import {\n  Bookmark,\n  Chat,\n  Event,\n  Group,\n  HelpOutline,\n  PlayCircleFilledOutlined,\n  RssFeed,\n  School,\n  WorkOutline,\n} from \"@material-ui/icons\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport { SET_CHAT } from \"../../redux/actions\";\nimport UserSuggestion from \"../userSuggestion/UserSuggestion\";\nimport \"./sidebar.css\";\n\nexport default function Sidebar() {\n  const [usersSuggestion, setUsersSuggestion] = useState([]);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n\n    const getUsersSuggestion = async () => {\n      if (userCurrent?._id) {\n        try {\n          const response = await getDataAPI(\n            `/user/get-users-suggestion/${userCurrent?._id}`\n          );\n          const { users } = response;\n          if (isMount) {\n            setUsersSuggestion(users);\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    getUsersSuggestion();\n\n    return () => (isMount = false);\n  }, [userCurrent]);\n\n  return (\n    <div className=\"sidebar\">\n      <div className=\"sidebarWrapper\">\n        <ul className=\"sidebarList\">\n          <li className=\"sidebarListItem\">\n            <RssFeed className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Feed</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Chat className=\"sidebarIcon\" />\n            <span\n              className=\"sidebarListItemText\"\n              onClick={() =>\n                dispatch({\n                  type: SET_CHAT,\n                  payload: true,\n                })\n              }\n            >\n              Chats\n            </span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <PlayCircleFilledOutlined className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Videos</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Group className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Groups</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Bookmark className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Bookmarks</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <HelpOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Questions</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <WorkOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Jobs</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Event className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Events</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <School className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Courses</span>\n          </li>\n        </ul>\n        <button className=\"sidebarButton\">Show More</button>\n        <hr className=\"sidebarHr\" />\n        <ul className=\"sidebarUsersSuggestion\">\n          <h4 className=\"sidebarDesc\">Recommend friends</h4>\n          {usersSuggestion.map((user) => (\n            <UserSuggestion key={user?._id} user={user} />\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nconst CommentCrud = ({ id, setIsEdit }) => {\n  return (\n    <>\n      <div className=\"commentCrudAction\">\n        <button\n          className=\"updateComment\"\n          onClick={() => setIsEdit((prev) => !prev)}\n        >\n          Edit\n        </button>\n\n        <button\n          type=\"button\"\n          className=\"removeComment\"\n          data-toggle=\"modal\"\n          data-target={\"#\" + id}\n        >\n          Remove\n        </button>\n      </div>\n    </>\n  );\n};\n\nexport default CommentCrud;\n","import { PermMedia } from \"@material-ui/icons\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { putDataAPI } from \"../../api/fetchData\";\nimport { imageUpload, removeImage } from \"../../helpers/image\";\nimport DisplayImg from \"../displayimg/DisplayImg\";\nimport \"./commentInfo.css\";\n\nconst CommentInfo = ({\n  post,\n  user,\n  comment,\n  isEdit,\n  setIsEdit,\n  setMessages,\n}) => {\n  const [images, setImages] = useState([]);\n  const [text, setText] = useState(comment?.text || \"\");\n  const [files, setFiles] = useState([]);\n\n  const { socket } = useSelector((state) => state.network);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  useEffect(() => {\n    setImages(comment?.images);\n  }, [comment?.images]);\n\n  const handleReset = (comment) => {\n    setImages(comment?.images);\n    setText(comment?.text || \"\");\n    setFiles([]);\n    setIsEdit(false);\n  };\n\n  const updateComment = async () => {\n    try {\n      let newImages = images ? [...images] : [];\n\n      const imagesRemove = comment?.images.filter((image) => {\n        return !newImages.find((newImage) => image.url === newImage.url);\n      });\n\n      if (imagesRemove.length) {\n        removeImage(imagesRemove.map((image) => image.public_id));\n      }\n\n      const responseImages = await imageUpload(files);\n      newImages = [...newImages, ...responseImages];\n\n      const response = await putDataAPI(\n        `/comment/update-comment/${comment?._id}`,\n        {\n          text,\n          images: newImages,\n          userId: userCurrent?._id,\n          isEdit: true,\n        }\n      );\n\n      const { message, newComment } = response;\n\n      toast.success(message, { autoClose: 2000 });\n\n      socket?.emit(\"commentPostHandler\", {\n        type: \"update\",\n        comment: newComment,\n        postId: post?._id,\n        userPost: post.userId,\n        message: userCurrent?.userName + \"updated comment on your post\",\n      });\n\n      setMessages((prev) =>\n        prev.map((item) => (item._id === newComment._id ? newComment : item))\n      );\n\n      handleReset(newComment);\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <div className={`commentInfo ${isEdit && \"edit\"}`}>\n      {isEdit ? (\n        <>\n          <div className={`editCommentContainer`}>\n            <input\n              className=\"editCommentInput\"\n              type=\"text\"\n              autoFocus\n              value={text}\n              onChange={(e) => setText(e.target.value)}\n            />\n\n            <button\n              onClick={() => handleReset()}\n              type=\"button\"\n              className=\"btn btn-secondary \n              btnEdit btnCancelEdit \"\n            >\n              Cancel\n            </button>\n\n            <button\n              type=\"button\"\n              className=\"btn btn-success\n              btnEdit btnConfirmEdit\"\n              onClick={updateComment}\n            >\n              Edit\n            </button>\n          </div>\n          <div className=\"editImgPost\">\n            <div className=\"editImgPostTop\">\n              <div className=\"shareOption\">\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n\n                <span className=\"shareOptionText\">Posted photo</span>\n              </div>\n            </div>\n\n            <div className=\"disPlayImgCreateComment\">\n              {images &&\n                images.map((image) => (\n                  <div className=\"imgContainer\" key={image.url}>\n                    <DisplayImg image={image.url} setImages={setImages} />\n                  </div>\n                ))}\n            </div>\n\n            <div className=\"editImgPostTop\">\n              <label\n                htmlFor={\"editEomment\" + comment._id}\n                className=\"shareOption\"\n              >\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Add Photo or Video</span>\n              </label>\n              <input\n                style={{ display: \" none\" }}\n                type={\"file\"}\n                id={\"editEomment\" + comment._id}\n                accept=\".png,.jpeg,.jpg\"\n                multiple\n                onChange={(e) => {\n                  const data = Array.from(e.target.files);\n                  setFiles((prev) => [\n                    ...prev,\n                    ...data.map((file) => {\n                      file.uuid = uuidv4();\n                      return file;\n                    }),\n                  ]);\n                }}\n              />\n            </div>\n\n            <div className=\"disPlayImgCreateComment\">\n              {files.map((file) => (\n                <div className=\"imgContainer\" key={file.uuid}>\n                  <DisplayImg file={file} setFiles={setFiles} />\n                </div>\n              ))}\n            </div>\n          </div>\n        </>\n      ) : (\n        <>\n          <div className=\"commentInfoTop\">\n            <span className=\"commentUserName\">{user?.userName}</span>\n            <span className=\"commentText\">{comment?.text}</span>\n          </div>\n          <div className=\"commentInfoImgContainer\">\n            {comment.images.map((image, idx) => (\n              <img\n                alt={\"link anh\"}\n                className=\"commentInfoImg\"\n                key={image.url}\n                style={{\n                  width: `${\n                    comment.images.length % 2 !== 0\n                      ? idx === comment.images.length - 1\n                        ? \"100%\"\n                        : \"calc(100%/2)\"\n                      : \"calc(100%/2)\"\n                  }`,\n                }}\n                src={image && image.url}\n              />\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default CommentInfo;\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport * as timeago from \"timeago.js\";\nimport { deleteDataAPI, getDataAPI, putDataAPI } from \"../../api/fetchData\";\nimport Avatar from \"../avatar/Avatar\";\nimport CommentCrud from \"../comment/CommentCrud\";\nimport CommentInfo from \"../comment/CommentInfo\";\nimport ModalConfirmDelete from \"../modal/ModalConfirmDelete\";\nimport \"./commentReply.css\";\n\nfunction CommentReply({ comment, commentReply, setCommentsReply }) {\n  const [like, setLike] = useState();\n  const [user, setUser] = useState({});\n  const [isCrudComment, setIsCrudComment] = useState(false);\n  const [isEdit, setIsEdit] = useState(false);\n  const { userCurrent } = useSelector((state) => state.auth);\n\n  const [isLiked, setIsLiked] = useState(false);\n\n  useEffect(() => {\n    setLike(commentReply?.likes.length);\n    setIsLiked(commentReply?.likes.includes(userCurrent._id));\n  }, [commentReply?.likes, userCurrent?._id]);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await getDataAPI(\n          `/user?userId=${commentReply?.userId}`\n        );\n\n        const { user } = response;\n        setUser(user);\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    };\n    fetchUser();\n  }, [commentReply]);\n\n  useEffect(() => {\n    const handleCheckClick = (e) => {\n      if (isCrudComment) {\n        setIsCrudComment(false);\n      }\n    };\n\n    document.body.addEventListener(\"click\", handleCheckClick);\n\n    return () => document.body.removeEventListener(\"click\", handleCheckClick);\n  }, [isCrudComment]);\n\n  const likeHandler = async () => {\n    try {\n      const response = isLiked\n        ? await putDataAPI(`/comment/unlike-comment/${commentReply._id}`, {\n            userId: userCurrent._id,\n          })\n        : await putDataAPI(`/comment/like-comment/${commentReply._id}`, {\n            userId: userCurrent._id,\n          });\n      const { message } = response;\n      toast.success(message, { autoClose: 1000 });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n    setIsLiked(!isLiked);\n    setLike(isLiked ? like - 1 : like + 1);\n  };\n\n  const handleRemoveCommnetReply = async () => {\n    try {\n      const response = await deleteDataAPI(\n        `/comment/remove-comment-reply/${comment._id}/${commentReply._id}/${userCurrent._id}`\n      );\n\n      const { message } = response;\n      toast.success(message, { autoClose: 1000 });\n\n      setCommentsReply((prev) =>\n        prev.filter((item) => item._id !== commentReply._id)\n      );\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"commentReplyContainer\">\n        <div className=\"commentReplyLeft\">\n          <Avatar user={userCurrent} />\n        </div>\n        <div className=\"commentReplyRight\">\n          <div className=\"commentReplyRightTop\">\n            <CommentInfo\n              user={userCurrent}\n              comment={commentReply}\n              isEdit={isEdit}\n              setIsEdit={setIsEdit}\n              setMessages={setCommentsReply}\n            />\n\n            {commentReply?.userId === userCurrent._id && (\n              <div\n                className=\"commentCrud\"\n                onClick={() => setIsCrudComment(!isCrudComment)}\n              >\n                <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAHVJREFUSEtjZKAxYKSx+QyjFhAM4dEgGqFB5MDAwDAf6vdEBgaGA1A2qeJgbdhS0QMGBgZ5qKEgtiISmxRxnBZ8YGBg4Ica+pCBgUEByiZVHKcFoKBYADU0AS2ISBHHaQHBpEeKgtGcTDC0RoNoNIgIhgBBBQBNkxgZxgF3rgAAAABJRU5ErkJggg==\" />\n\n                {isCrudComment && (\n                  <CommentCrud\n                    id={commentReply._id}\n                    onRemoveComment={handleRemoveCommnetReply}\n                    setIsEdit={setIsEdit}\n                  />\n                )}\n              </div>\n            )}\n          </div>\n          <div className=\"commentReplyAction\">\n            <div className=\"commentReplyLikeContainer\">\n              <span\n                className={`commentReplyLike ${isLiked && \"like\"}`}\n                onClick={likeHandler}\n              >\n                Like\n              </span>\n              <span className=\"commentReplyNumberLike\">{like}</span>\n            </div>\n\n            <span className=\"commentRefDate\">\n              {timeago.format(commentReply?.createdAt)}\n            </span>\n\n            {commentReply.isEdit && <span className=\"showIsEdit\">Edited</span>}\n          </div>\n        </div>\n\n        <ModalConfirmDelete\n          id={commentReply?._id}\n          onRemove={handleRemoveCommnetReply}\n          text=\"this comment ?\"\n        />\n      </div>\n    </>\n  );\n}\n\nexport default CommentReply;\n","import React, { useRef } from \"react\";\nimport \"./createComment.css\";\nimport { PermMedia } from \"@material-ui/icons\";\nimport DisplayImg from \"../../displayimg/DisplayImg\";\nimport Avatar from \"../../avatar/Avatar\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nconst CreateComment = ({ onCreateComment, user, setFiles, files, id }) => {\n  const commentRef = useRef();\n\n  return (\n    <>\n      <form\n        className=\"createComment\"\n        onSubmit={(e) => {\n          onCreateComment(e, commentRef.current.value);\n          commentRef.current.value = \"\";\n        }}\n      >\n        <div className=\"createCommentInput\">\n          <Avatar width={\"50px\"} height={\"50px\"} user={user} />\n          <div className=\"createCommentInputTop\">\n            <input\n              autoFocus\n              type=\"text\"\n              ref={commentRef}\n              placeholder={\"Enter comment...\"}\n            />\n\n            <label htmlFor={\"filesCreateComment\" + id} className=\"shareOption\">\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n            </label>\n            <input\n              style={{ display: \" none\" }}\n              type={\"file\"}\n              id={\"filesCreateComment\" + id}\n              accept=\".png,.jpeg,.jpg\"\n              multiple\n              onChange={(e) => {\n                const data = Array.from(e.target.files);\n                setFiles([\n                  ...data.map((file) => {\n                    file.uuid = uuidv4();\n                    return file;\n                  }),\n                ]);\n              }}\n            />\n          </div>\n          <button type=\"submit\" className=\"btn btn-primary btnCreateComment\">\n            Send\n          </button>\n        </div>\n        <div className=\"disPlayImgCreateComment\">\n          {files.map((file) => (\n            <div className=\"imgContainer\" key={file.uuid}>\n              <DisplayImg file={file} setFiles={setFiles} />\n            </div>\n          ))}\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default CreateComment;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport * as timeago from \"timeago.js\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { getDataAPI, postDataAPI, putDataAPI } from \"../../api/fetchData\";\nimport { imageUpload } from \"../../helpers/image\";\nimport { UPDATE_ID_COMMENT } from \"../../redux/actions\";\nimport Avatar from \"../avatar/Avatar\";\nimport CommentReply from \"../commentReply/CommentReply\";\nimport CreateComment from \"../form/createComment/CreateComment\";\nimport ModalConfirmDelete from \"../modal/ModalConfirmDelete\";\nimport \"./comment.css\";\nimport CommentCrud from \"./CommentCrud\";\nimport CommentInfo from \"./CommentInfo\";\n\nfunction Comment({ comment, post, setComments }) {\n  const [like, setLike] = useState();\n  const [user, setUser] = useState({});\n  const [isShowCommentsReply, setIsShowCommentsReply] = useState(false);\n  const [isEdit, setIsEdit] = useState(false);\n  const [commentsReply, setCommentsReply] = useState([]);\n  const [isCrudComment, setIsCrudComment] = useState(false);\n  const [files, setFiles] = useState([]);\n  const [isLiked, setIsLiked] = useState(false);\n\n  const { socket } = useSelector((state) => state.network);\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { idComment } = useSelector((state) => state.comment);\n\n  const idCreateComment = useRef(uuidv4());\n\n  useEffect(() => {\n    const handleCheckClick = (e) => {\n      if (isCrudComment) {\n        setIsCrudComment(false);\n      }\n    };\n\n    document.body.addEventListener(\"click\", handleCheckClick);\n\n    return () => document.body.removeEventListener(\"click\", handleCheckClick);\n  }, [isCrudComment]);\n\n  useEffect(() => {\n    setLike(comment?.likes.length);\n    setIsLiked(comment?.likes.includes(userCurrent._id));\n  }, [comment?.likes, userCurrent?._id]);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n    const fetchUser = async () => {\n      try {\n        const response = await getDataAPI(`/user?userId=${comment?.userId}`);\n\n        const { user } = response;\n        if (isMount) setUser(user);\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    };\n    fetchUser();\n\n    return () => (isMount = false);\n  }, [comment]);\n\n  useEffect(() => {\n    let isMount = true;\n    const handleGetCommentReply = async () => {\n      try {\n        const response = await getDataAPI(\n          `/comment/get-all-comments-reply/${comment?._id}`\n        );\n\n        const { message, comments } = response;\n\n        if (isMount) setCommentsReply(comments);\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    };\n    if (isShowCommentsReply) {\n      handleGetCommentReply();\n    }\n\n    return () => (isMount = false);\n  }, [isShowCommentsReply]);\n\n  const likeHandler = async () => {\n    try {\n      const response = isLiked\n        ? await putDataAPI(`/comment/unlike-comment/${comment._id}`, {\n            userId: userCurrent._id,\n          })\n        : await putDataAPI(`/comment/like-comment/${comment._id}`, {\n            userId: userCurrent._id,\n          });\n      const { message } = response;\n      toast.success(message, { autoClose: 1000 });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n    setIsLiked(!isLiked);\n    setLike(isLiked ? like - 1 : like + 1);\n  };\n\n  const handleCreateCommentReply = async (e, text) => {\n    e.preventDefault();\n\n    try {\n      if (!text && !files.length) {\n        return toast.info(\"Please enter data to comment\", { autoClose: 2000 });\n      }\n      const commentInfo = {\n        postId: post?._id,\n        userId: user?._id,\n        text,\n      };\n\n      const images = await imageUpload(files);\n      commentInfo.images = [...images];\n\n      const response = await postDataAPI(`/comment`, commentInfo);\n\n      const { comment: commentReply, message } = response;\n\n      const responseToAddCommentReply = await postDataAPI(\n        `/comment/add-comment-reply/${comment?._id}`,\n        {\n          commentReplyId: commentReply._id,\n        }\n      );\n\n      if (isShowCommentsReply) {\n        setCommentsReply((prev) => [commentReply, ...prev]);\n      }\n\n      setFiles([]);\n      setIsShowCommentsReply(true);\n\n      toast.success(message, { autoClose: 2000 });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const handleRemoveComment = async () => {\n    try {\n      const response = await postDataAPI(`/post/remove-comment/${post?._id}`, {\n        commentId: comment?._id,\n        userId: userCurrent?._id,\n      });\n\n      const { message } = response;\n      toast.success(message, { autoClose: 2000 });\n\n      setComments((prev) =>\n        prev.filter((commentPost) => commentPost._id !== comment._id)\n      );\n\n      socket?.emit(\"commentPostHandler\", {\n        type: \"remove\",\n        comment,\n        postId: post?._id,\n        userPost: post.userId,\n        message: userCurrent?.userName + \" deleted the comment on your post\",\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"commentLeft\">\n        <Avatar user={user} />\n      </div>\n      <div className=\"commentRight\">\n        <div className=\"commentRightTop\">\n          <CommentInfo\n            post={post}\n            user={user}\n            comment={comment}\n            isEdit={isEdit}\n            setIsEdit={setIsEdit}\n            setMessages={setComments}\n          />\n\n          {comment?.userId === userCurrent?._id && (\n            <div\n              className=\"commentCrud\"\n              onClick={() => setIsCrudComment(!isCrudComment)}\n            >\n              <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAHVJREFUSEtjZKAxYKSx+QyjFhAM4dEgGqFB5MDAwDAf6vdEBgaGA1A2qeJgbdhS0QMGBgZ5qKEgtiISmxRxnBZ8YGBg4Ica+pCBgUEByiZVHKcFoKBYADU0AS2ISBHHaQHBpEeKgtGcTDC0RoNoNIgIhgBBBQBNkxgZxgF3rgAAAABJRU5ErkJggg==\" />\n\n              {isCrudComment && (\n                <CommentCrud\n                  id={comment?._id}\n                  onRemoveComment={handleRemoveComment}\n                  setIsEdit={setIsEdit}\n                />\n              )}\n            </div>\n          )}\n        </div>\n\n        <div className=\"commentAction\">\n          <div className=\"commentLikeContainer\">\n            <span\n              className={`commentLike ${isLiked && \"like\"}`}\n              onClick={likeHandler}\n            >\n              Like\n            </span>\n            <span className=\"commentNumberLike\">{like}</span>\n          </div>\n          <span\n            className=\"reply\"\n            onClick={() => {\n              let newIdComment = comment?._id;\n              if (idComment === comment?._id) newIdComment = null;\n              dispatch({\n                type: UPDATE_ID_COMMENT,\n                payload: { idComment: newIdComment },\n              });\n            }}\n          >\n            Reply\n          </span>\n          <span className=\"commentDate\">\n            {timeago.format(comment?.createdAt)}\n          </span>\n          <span\n            className=\"showFeedback\"\n            onClick={() => setIsShowCommentsReply(!isShowCommentsReply)}\n          >\n            feedbacks\n          </span>\n\n          {comment.isEdit && <span className=\"showIsEdit\">Edited</span>}\n        </div>\n\n        <div className=\"comentBottom\">\n          {idComment === comment?._id && (\n            <CreateComment\n              id={idCreateComment.current}\n              files={files}\n              setFiles={setFiles}\n              user={userCurrent}\n              onCreateComment={handleCreateCommentReply}\n            />\n          )}\n\n          {isShowCommentsReply &&\n            commentsReply.map((commentReply) => (\n              <CommentReply\n                comment={comment}\n                setCommentsReply={setCommentsReply}\n                key={commentReply?._id}\n                commentReply={commentReply}\n              />\n            ))}\n        </div>\n\n        <ModalConfirmDelete\n          text=\"this comment ?\"\n          id={comment?._id}\n          onRemove={handleRemoveComment}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default Comment;\n","import React, { useRef, useState } from \"react\";\nimport \"./modal.css\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { PermMedia } from \"@material-ui/icons\";\nimport { toast } from \"react-toastify\";\nimport DisplayImg from \"../displayimg/DisplayImg\";\nimport { putDataAPI, postDataAPI } from \"../../api/fetchData\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { removeImage, imageUpload } from \"../../helpers/image\";\nimport ChooseImage from \"../chooseImage/ChooseImage\";\nimport { useSelector } from \"react-redux\";\n\nconst ModalEditPost = ({ setPosts, post, setIsEdit }) => {\n  const [images, setImages] = useState(post?.images);\n  const [desc, setDesc] = useState(post?.desc || \"\");\n  const [files, setFiles] = useState([]);\n  const [isTakePhoto, setIsTakePhoto] = useState(false);\n\n  const id = useRef(uuidv4());\n\n  const { socket } = useSelector((state) => state.network);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const updatePost = async () => {\n    try {\n      let newImages = [...images];\n\n      const imagesRemove = post?.images.filter((image) => {\n        return !newImages.find((newImage) => image.url === newImage.url);\n      });\n\n      if (imagesRemove.length) {\n        removeImage(imagesRemove.map((image) => image.public_id));\n      }\n\n      const responseImages = await imageUpload(files);\n      newImages = [...newImages, ...responseImages];\n\n      const response = await putDataAPI(`/post/${post?._id}`, {\n        desc,\n        images: newImages,\n        userId: userCurrent._id,\n      });\n\n      const { message, newPost } = response;\n\n      toast.success(message, { autoClose: 2000 });\n\n      setPosts((prev) =>\n        prev.map((item) => (item._id === newPost._id ? newPost : item))\n      );\n\n      socket?.emit(\"postHandler\", {\n        type: \"updatePost\",\n        post: newPost,\n        userFollowings: userCurrent?.followings,\n        message: `${userCurrent?.userName} just edit a new post`,\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const handleClose = () => {\n    setImages(post?.images);\n    setDesc(post?.desc || \"\");\n    setFiles([]);\n    setIsEdit(false);\n  };\n\n  return (\n    <>\n      <Modal show={true} onHide={handleClose} className=\"modalEditContainer\">\n        <Modal.Header closeButton>\n          <Modal.Title>Edit Post</Modal.Title>\n        </Modal.Header>\n        <Modal.Body className={\"modalEditPostBody\"}>\n          <div className=\"editDescPost\">\n            <textarea\n              className=\"editDescPostInput\"\n              value={desc}\n              onChange={(e) => setDesc(e.target.value)}\n              autoFocus\n              row={1000}\n            ></textarea>\n          </div>\n\n          <div className=\"editImgPost\">\n            <div className=\"editImgPostTop\">\n              <div className=\"shareOption\">\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Posted photo</span>\n              </div>\n            </div>\n\n            <div className=\"disPlayImgCreateComment\">\n              {images.map((image) => (\n                <div className=\"imgContainer\" key={image.url}>\n                  <DisplayImg image={image.url} setImages={setImages} />\n                </div>\n              ))}\n            </div>\n\n            <ChooseImage\n              setIsTakePhoto={setIsTakePhoto}\n              isTakePhoto={isTakePhoto}\n              files={files}\n              id={id.current}\n              multiple={true}\n              setFiles={setFiles}\n            />\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>\n            Close\n          </Button>\n          <Button\n            variant=\"primary\"\n            onClick={() => {\n              updatePost();\n              handleClose();\n            }}\n          >\n            Save Changes\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default ModalEditPost;\n","import React from \"react\";\nimport \"./crudPost.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\nconst CrudPost = ({ id, setIsEdit }) => {\n  const navigate = useNavigate();\n  return (\n    <>\n      <>\n        <button className=\"detailPost\" onClick={() => navigate(\"/post/\" + id)}>\n          Detail Post\n        </button>\n        <button\n          className=\"updatePost\"\n          onClick={() => setIsEdit((prev) => !prev)}\n        >\n          Edit\n        </button>\n\n        <button\n          type=\"button\"\n          className=\"removePost\"\n          data-toggle=\"modal\"\n          data-target={\"#\" + id}\n        >\n          Remove\n        </button>\n      </>\n    </>\n  );\n};\n\nexport default CrudPost;\n","import { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport * as timeago from \"timeago.js\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport {\n  deleteDataAPI,\n  getDataAPI,\n  postDataAPI,\n  putDataAPI,\n} from \"../../api/fetchData\";\nimport { debounce } from \"../../helpers/debounceFunction\";\nimport { imageUpload } from \"../../helpers/image\";\nimport { UPDATE_ID_COMMENT } from \"../../redux/actions\";\nimport Avatar from \"../avatar/Avatar\";\nimport Comment from \"../comment/Comment\";\nimport CreateComment from \"../form/createComment/CreateComment\";\nimport ModalConfirmDelete from \"../modal/ModalConfirmDelete\";\nimport ModalEditPost from \"../modal/ModalEditPost\";\nimport CrudPost from \"./CrudPost\";\nimport \"./post.scss\";\nexport default function Post({ post, setPosts, className }) {\n  const [like, setLike] = useState(post?.likes.length);\n  const [isLiked, setIsLiked] = useState(false);\n  const [user, setUser] = useState({});\n  const [comments, setComments] = useState([]);\n  const [isShowComment, setIsShowComment] = useState(false);\n  const [isCrudPost, setIsCrudPost] = useState(false);\n  const [isEdit, setIsEdit] = useState(false);\n  const [files, setFiles] = useState([]);\n\n  const { socket } = useSelector((state) => state.network);\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { idComment, idPostOpen } = useSelector((state) => state.comment);\n\n  const idCreateComment = useRef(uuidv4());\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const handleCheckClick = (e) => {\n      if (isCrudPost) {\n        setIsCrudPost(false);\n      }\n    };\n\n    document.body.addEventListener(\"click\", handleCheckClick);\n\n    return () => document.body.removeEventListener(\"click\", handleCheckClick);\n  }, [isCrudPost]);\n\n  useEffect(() => {\n    setIsLiked(post?.likes.includes(userCurrent?._id));\n    setLike(post?.likes.length);\n  }, [post?.likes, userCurrent?._id]);\n\n  useEffect(() => {\n    let isMount = true;\n    const getComments = async () => {\n      try {\n        const response = await getDataAPI(`/post/get-all-comment/${post?._id}`);\n\n        const { comments } = response;\n\n        if (isMount) setComments(comments);\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    };\n\n    if (isShowComment) getComments();\n\n    return () => (isMount = false);\n  }, [isShowComment, post?.comments]);\n\n  useEffect(() => {\n    let isMount = true;\n\n    if (userCurrent?._id !== post?.userId) {\n      const fetchUser = async () => {\n        try {\n          const response = await getDataAPI(`/user?userId=${post?.userId}`);\n\n          const { user } = response;\n          setUser(user);\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      };\n      fetchUser();\n    } else {\n      if (isMount) setUser(userCurrent);\n    }\n\n    return () => (isMount = false);\n  }, [userCurrent, post?.userId]);\n\n  useEffect(() => {\n    const handleUpdateLikePost = ({ type, message, postId }) => {\n      if (post?._id !== postId) return;\n\n      setLike((prev) => (type === \"like\" ? prev + 1 : prev - 1));\n    };\n\n    const handleUpdateCmtPost = ({ postId, type, comment }) => {\n      if (post?._id !== postId) return;\n\n      setComments((prev) =>\n        type === \"remove\"\n          ? prev.filter((commentPost) => commentPost?._id !== comment?._id)\n          : type === \"update\"\n          ? prev.map((commentPost) =>\n              commentPost?._id !== comment?._id ? commentPost : comment\n            )\n          : [comment, ...prev]\n      );\n    };\n\n    if (socket) {\n      socket.on(\"updateLikePost\", handleUpdateLikePost);\n      socket.on(\"updateCommentPost\", handleUpdateCmtPost);\n    }\n\n    return () => {\n      socket?.off(\"getNotify\", handleUpdateLikePost);\n      socket?.off(\"updateCommentPost\", handleUpdateCmtPost);\n    };\n  }, [socket]);\n\n  const likeHandler = async () => {\n    try {\n      const response = isLiked\n        ? await putDataAPI(`/post/dislike-post/${post._id}`, {\n            userId: userCurrent._id,\n          })\n        : await putDataAPI(`/post/like-post/${post._id}`, {\n            userId: userCurrent._id,\n          });\n      const { message } = response;\n      toast.success(message, { autoClose: 2000 });\n\n      if (!isLiked && post?.userId !== userCurrent?._id) {\n        const responseCreateNotification = await postDataAPI(\"/notification\", {\n          link: \"/post/\" + post?._id,\n          receiverId: post?.userId,\n          text: userCurrent?.userName + \" liked on your post\",\n          senderId: userCurrent?._id,\n        });\n\n        const { notification } = responseCreateNotification;\n\n        socket?.emit(\"createNotification\", { notification });\n      }\n      setIsLiked((prev) => !prev);\n      setLike((prev) => (isLiked ? prev - 1 : prev + 1));\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const handleCreateComment = async (e, text) => {\n    e.preventDefault();\n    try {\n      const commentInfo = {\n        postId: post?._id,\n        userId: userCurrent?._id,\n        text,\n        images: [],\n      };\n\n      const images = await imageUpload(files);\n      commentInfo.images = [...images];\n\n      const response = await postDataAPI(`/comment`, commentInfo);\n\n      const { comment, message } = response;\n\n      const responseAddToPost = await postDataAPI(\n        `/post/add-comment/${post?._id}`,\n        {\n          commentId: comment?._id,\n        }\n      );\n\n      toast.success(message, { autoClose: 2000 });\n\n      const responseCreateNotification = await postDataAPI(\"/notification\", {\n        link: \"/post/\" + post?._id,\n        receiverId: post?.userId,\n        text: userCurrent?.userName + \" commented on your post\",\n        senderId: userCurrent?._id,\n      });\n\n      const { notification } = responseCreateNotification;\n\n      socket?.emit(\"createNotification\", { notification });\n\n      setComments((prev) => [comment, ...prev]);\n      setFiles([]);\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const handleRemovePost = async () => {\n    try {\n      const response = await deleteDataAPI(`/post/${post?._id}`);\n\n      const { message } = response;\n\n      toast.success(message, { autoClose: 2000 });\n\n      setPosts((prev) => prev.filter((item) => item._id !== post?._id));\n\n      socket.emit(\"postHandler\", {\n        type: \"remove\",\n        post,\n        userFollowings: userCurrent?.followings,\n        message: `${userCurrent?.userName} just edit a new post`,\n      });\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <>\n      <div className={className ? className : \"post\"}>\n        <div className=\"postWrapper\">\n          <div className=\"postTop\">\n            <div className=\"postTopLeft\">\n              <Avatar user={user} width=\"50px\" height=\"50px\" />\n\n              <span className=\"postUsername\">{user?.userName}</span>\n              <span className=\"postDate\">\n                {timeago.format(post?.createdAt)}\n              </span>\n            </div>\n\n            {post?.userId === userCurrent?._id && (\n              <div className=\"postTopRight\">\n                <span\n                  className=\"CrudPost\"\n                  onClick={() => setIsCrudPost(!isCrudPost)}\n                >\n                  <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAFBJREFUSEtjZKAxYKSx+Qwjy4L/aMFJlO+JUgQ1eNQC2iRYUuKALBeQYsFoJBMMYpoHEUEXYFNASiTT3AKaB9GoBWTFIUFNgyoVEXTtgOQDAEM9DBleh0KcAAAAAElFTkSuQmCC\" />\n                </span>\n\n                {isCrudPost && (\n                  <div className=\"postCrudAction\">\n                    <CrudPost id={post?._id} setIsEdit={setIsEdit} />\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          <div className=\"postCenter\">\n            <span className=\"postText\">{post?.desc}</span>\n            <div className=\"postImgContainer\">\n              {post?.images.map((image, idx) => {\n                return (\n                  <div\n                    className=\"postImg\"\n                    key={image.url}\n                    style={{\n                      width: `${\n                        post.images.length % 2 !== 0\n                          ? idx === post.images.length - 1\n                            ? \"100%\"\n                            : \"calc(100%/2)\"\n                          : \"calc(100%/2)\"\n                      }`,\n                    }}\n                  >\n                    <img src={image.url} alt=\"\" />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n          <div className=\"postBottom\">\n            <div className=\"postBottomLeft\">\n              <i\n                className={`bx ${\n                  isLiked ? \"bxs-heart has-like\" : \"bx-heart\"\n                } likeIcon`}\n                onClick={debounce(likeHandler, 2000)}\n              ></i>\n              <span className=\"postLikeCounter\">{like} people like it</span>\n            </div>\n            <div\n              className=\"postBottomRight\"\n              onClick={() => {\n                let newIdComment = post?._id;\n                let newIdPostOpen = post?._id;\n                if (idPostOpen === post?._id) {\n                  newIdPostOpen = null;\n                  newIdComment = null;\n                }\n                dispatch({\n                  type: UPDATE_ID_COMMENT,\n                  payload: {\n                    idComment: newIdComment,\n                    idPostOpen: newIdPostOpen,\n                  },\n                });\n                setIsShowComment(!isShowComment);\n              }}\n            >\n              {comments.length ? (\n                <span className=\"postCommentText\">{comments.length}</span>\n              ) : (\n                \"\"\n              )}\n              <i className=\"bx bx-comment postCommentIcon\"></i>\n            </div>\n          </div>\n\n          <div className=\"commentContainer\">\n            {idComment === post?._id && (\n              <CreateComment\n                id={idCreateComment.current}\n                files={files}\n                setFiles={setFiles}\n                user={userCurrent}\n                onCreateComment={handleCreateComment}\n              />\n            )}\n\n            <div className=\"displayComment\">\n              {isShowComment &&\n                comments.map((comment) => (\n                  <div className=\"comment\" key={comment._id}>\n                    <Comment\n                      setComments={setComments}\n                      post={post}\n                      comment={comment}\n                    />\n                  </div>\n                ))}\n            </div>\n          </div>\n        </div>\n\n        {isEdit && (\n          <ModalEditPost\n            setPosts={setPosts}\n            setIsEdit={setIsEdit}\n            post={post}\n          />\n        )}\n      </div>\n\n      <ModalConfirmDelete\n        onRemove={handleRemovePost}\n        id={post?._id}\n        text=\"this post ?\"\n      />\n    </>\n  );\n}\n","import { EmojiEmotions, Label, PermMedia, Room } from \"@material-ui/icons\";\nimport { useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { postDataAPI } from \"../../api/fetchData\";\nimport { imageUpload } from \"../../helpers/image\";\nimport Avatar from \"../avatar/Avatar\";\nimport DisplayImg from \"../displayimg/DisplayImg\";\nimport ModalChooseImage from \"../modal/ModalChooseImage\";\nimport \"./share.css\";\n\nexport default function Share({ setPosts }) {\n  const { socket } = useSelector((state) => state.network);\n  const { userCurrent } = useSelector((state) => state.auth);\n  const [shareing, setShearing] = useState(false);\n\n  const [files, setFiles] = useState([]);\n  const descRef = useRef();\n  const id = useRef(uuidv4());\n\n  const handleSaveImages = (files) => {\n    setFiles((prev) => [...prev, ...files]);\n  };\n\n  const handleCreatePost = async (e) => {\n    e.preventDefault();\n    if (shareing) return;\n\n    if (!files.length && !descRef.current.value) {\n      return toast.info(\"Please enter information to create a post\", {\n        autoClose: 1000,\n      });\n    }\n    setShearing(true);\n\n    const newPost = {\n      desc: descRef.current.value,\n      userId: userCurrent?._id,\n      images: [],\n    };\n\n    const images = await imageUpload(files);\n\n    newPost.images = images;\n    try {\n      const response = await postDataAPI(\"/post\", newPost);\n      const { message, post } = response;\n\n      descRef.current.value = \"\";\n      toast.success(message, { autoClose: 2000 });\n\n      const responses = await Promise.all(\n        userCurrent.followings.map((userFollowingId) =>\n          postDataAPI(\"/notification\", {\n            link: \"/post/\" + post?._id,\n            receiverId: userFollowingId,\n            text: userCurrent?.userName + \" created a new post\",\n            senderId: userCurrent?._id,\n          })\n        )\n      );\n\n      const dataEmit = [];\n      responses.forEach((response) =>\n        dataEmit.push(response?.data?.notification)\n      );\n\n      socket?.emit(\"createPost\", {\n        dataEmit,\n      });\n\n      setPosts((prev) => [post, ...prev]);\n      setFiles([]);\n      setShearing(false);\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  return (\n    <div className=\"share\">\n      <div className=\"shareWrapper\">\n        <div className=\"shareTop\">\n          <Avatar user={userCurrent} width=\"50px\" height=\"50px\" />\n\n          <input\n            required\n            placeholder={`What's in your mind ${userCurrent?.userName} ?`}\n            className=\"shareInput\"\n            ref={descRef}\n          />\n        </div>\n        <hr className=\"shareHr\" />\n        <form className=\"\" onSubmit={handleCreatePost}>\n          <div className=\"shareBottom\">\n            <div className=\"shareOptions\">\n              <button\n                type={\"button\"}\n                data-target={`#${id.current}`}\n                data-toggle=\"modal\"\n                className=\"shareOption\"\n                style={{\n                  border: 0,\n                  outline: 0,\n                  backgroundColor: \"transparent\",\n                }}\n              >\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Photo or Video</span>\n              </button>\n              <div className=\"shareOption\">\n                <Label htmlColor=\"blue\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Tag</span>\n              </div>\n              <div className=\"shareOption\">\n                <Room htmlColor=\"green\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Location</span>\n              </div>\n              <div className=\"shareOption\">\n                <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Feelings</span>\n              </div>\n            </div>\n            <button\n              type={\"submit\"}\n              className={`shareButton ${shareing ? \"isShareing\" : \"\"}`}\n            >\n              Share\n            </button>\n          </div>\n\n          <div className=\"shareImgContainer\">\n            {files.map((file) => {\n              return (\n                <div className=\"imgContainer\" key={file.uuid}>\n                  <DisplayImg file={file} setFiles={setFiles} />\n                </div>\n              );\n            })}\n          </div>\n        </form>\n      </div>\n      <ModalChooseImage\n        onSave={handleSaveImages}\n        height={\"150px\"}\n        multiple={true}\n        id={id.current}\n        text={\"Choose a photo for the post\"}\n      />\n    </div>\n  );\n}\n","import React, { useEffect, useRef } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { UPDATE_INFO_GET_POST } from \"../../redux/actions\";\r\n\r\nconst GetMorePost = ({ postsLength, limit }) => {\r\n  const divRef = useRef(null);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        if (entry.isIntersecting) {\r\n          const payload = {\r\n            skip: postsLength,\r\n            limit: limit + 2,\r\n            isLoadingPost: true,\r\n          };\r\n          dispatch({\r\n            type: UPDATE_INFO_GET_POST,\r\n            payload,\r\n          });\r\n        }\r\n      });\r\n    });\r\n    observer.observe(divRef.current);\r\n\r\n    return () => {\r\n      if (!divRef.current) return;\r\n      observer.unobserve(divRef.current);\r\n    };\r\n  }, []);\r\n\r\n  return <div ref={divRef}>Get More Post</div>;\r\n};\r\n\r\nexport default GetMorePost;\r\n","import { CircularProgress } from \"@material-ui/core\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { getDataAPI } from \"../../api/fetchData\";\nimport { LOADING_POST_END, UPDATE_INFO_GET_POST } from \"../../redux/actions\";\nimport MessagePretty from \"../MessagePretty/MessagePretty\";\nimport Post from \"../post/Post\";\nimport Share from \"../share/Share\";\nimport \"./feed.scss\";\nimport GetMorePost from \"./GetMorePost\";\n\nexport default function Feed({ userName }) {\n  const [posts, setPosts] = useState([]);\n\n  const { socket } = useSelector((state) => state.network);\n  const { limit, skip, isLoadingPost, isMaxPost } = useSelector(\n    (state) => state.post\n  );\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const handleUpdateFeed = ({ post, type, message }) => {\n      toast.info(message, { autoClose: 2000 });\n\n      setPosts((prev) =>\n        type === \"removePost\"\n          ? prev.filter((postFeed) => postFeed?._id !== post?._id)\n          : type === \"updatePost\"\n          ? prev.map((postFeed) =>\n              postFeed?._id !== post?._id ? postFeed : post\n            )\n          : [post, ...prev]\n      );\n    };\n\n    if (socket) {\n      socket.on(\"updateFeed\", handleUpdateFeed);\n    }\n\n    return () => {\n      socket?.off(\"updateFeed\", handleUpdateFeed);\n    };\n  }, [socket]);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const fetchPosts = async () => {\n      try {\n        const response = await getDataAPI(\n          `/post/get-feed-post?limit=${limit}&skip=${skip}`\n        );\n\n        const { posts: newPosts } = response;\n        if (!newPosts.length) {\n          dispatch({\n            type: UPDATE_INFO_GET_POST,\n            payload: { isMaxPost: true },\n          });\n          return;\n        }\n        if (!isMount) return;\n        setPosts([...posts, ...newPosts]);\n      } catch (err) {\n        console.log(\"get post feed\", err);\n      } finally {\n        dispatch({\n          type: LOADING_POST_END,\n        });\n      }\n    };\n    fetchPosts();\n\n    return () => (isMount = false);\n  }, [limit, skip]);\n\n  return (\n    <div className=\"feedWrapper\">\n      {(!userName || userName === userCurrent?.userName) && (\n        <Share setPosts={setPosts} />\n      )}\n      {posts.map((p) => (\n        <Post setPosts={setPosts} key={p._id} post={p} />\n      ))}\n\n      {isLoadingPost ? (\n        <div className=\"loadingPost\">\n          <CircularProgress color=\"primary\" />\n        </div>\n      ) : !isMaxPost ? (\n        <GetMorePost postsLength={posts.length} limit={limit} />\n      ) : (\n        <MessagePretty mess={\"Make friends to see more posts\"} />\n      )}\n    </div>\n  );\n}\n","import { Link } from \"react-router-dom\";\nimport Avatar from \"../avatar/Avatar\";\nimport \"./friend.scss\";\n\nexport default function Friend({ friend }) {\n  return (\n    <Link to={\"/profile/\" + friend?._id} className=\"rightbarFriend\">\n      <div className=\"rightbarProfileImgContainer\">\n        <Avatar user={friend} link={false} />\n      </div>\n      <span className=\"rightbarUsername\">{friend?.userName}</span>\n    </Link>\n  );\n}\n","import { Add, Remove } from \"@material-ui/icons\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { getDataAPI, putDataAPI } from \"../../api/fetchData\";\nimport { PUBLIC_FOLDER } from \"../../contants\";\nimport { FOLLOW, UN_FOLLOW } from \"../../redux/actions\";\nimport Friend from \"../friend/Friend\";\nimport \"./rightbar.css\";\n\nexport default function Rightbar({ user }) {\n  const [friendList, setFriendList] = useState([]);\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { usersOnline } = useSelector((state) => state.network);\n  const dispatch = useDispatch();\n\n  const [followed, setFollowed] = useState(() =>\n    userCurrent?.followings.includes(user?._id)\n  );\n\n  const { socket } = useSelector((state) => state.network);\n\n  useEffect(() => {\n    let isMount = true;\n\n    if (!socket) return;\n\n    const updateFriendList = ({ userDisconnectId, time }) => {\n      if (!isMount) return;\n      setFriendList((prev) =>\n        prev.map((friend) =>\n          friend?._id === userDisconnectId\n            ? {\n                ...friend,\n                lastLogin: time,\n              }\n            : friend\n        )\n      );\n    };\n\n    socket.on(\"friendLogout\", updateFriendList);\n\n    return () => {\n      isMount = false;\n      socket?.off(\"friendLogout\", updateFriendList);\n    };\n  }, [socket]);\n\n  useEffect(() => {\n    if (friendList.length) {\n      setFriendList((prev) =>\n        prev.map((friend) =>\n          usersOnline?.includes(friend?._id)\n            ? {\n                ...friend,\n                online: true,\n              }\n            : {\n                ...friend,\n                online: false,\n              }\n        )\n      );\n    }\n  }, [usersOnline]);\n\n  useEffect(() => {\n    setFollowed(userCurrent?.followings.includes(user?._id));\n  }, [userCurrent?.followings, user?._id]);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const handleFetchFriends = async () => {\n      if ((user && user._id) || (userCurrent && userCurrent._id)) {\n        try {\n          const response = await getDataAPI(\n            `/user/get-friends/${user?._id || userCurrent?._id}`\n          );\n\n          const { message, friends } = response;\n          // toast.success(message, { autoClose: 2000 });\n          const friendsUpdateStatus = friends.map((friend) =>\n            usersOnline?.includes(friend._id)\n              ? {\n                  ...friend,\n                  online: true,\n                }\n              : {\n                  ...friend,\n                  online: false,\n                }\n          );\n          if (isMount) {\n            setFriendList(friendsUpdateStatus);\n          }\n        } catch (err) {\n          console.log(\"err\", err);\n        }\n      }\n    };\n    handleFetchFriends();\n\n    return () => (isMount = false);\n  }, [user, userCurrent]);\n\n  const handleClick = async () => {\n    if (user?._id) {\n      try {\n        let response;\n        if (followed) {\n          response = await putDataAPI(`/user/unfollow/${user._id}`, {\n            userId: userCurrent._id,\n          });\n\n          dispatch({\n            type: UN_FOLLOW,\n            payload: user._id,\n          });\n        } else {\n          response = await putDataAPI(`/user/follow/${user._id}`, {\n            userId: userCurrent._id,\n          });\n          dispatch({\n            type: FOLLOW,\n            payload: user._id,\n          });\n        }\n\n        const { message } = response;\n        toast.success(message, { autoClose: 2000 });\n        setFollowed(!followed);\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    }\n  };\n\n  const HomeRightbar = () => {\n    return (\n      <>\n        <div className=\"birthdayContainer\">\n          <img\n            className=\"birthdayImg\"\n            src={PUBLIC_FOLDER + \"gift.png\"}\n            alt=\"\"\n          />\n          <span className=\"birthdayText\"></span>\n        </div>\n        <img className=\"rightbarAd\" src={PUBLIC_FOLDER + \"social.png\"} alt=\"\" />\n        <h4 className=\"rightbarTitle\">Friends</h4>\n        <ul className=\"rightbarFriendList\">\n          {friendList.map((friend) => (\n            <Friend key={friend?._id} friend={friend} />\n          ))}\n        </ul>\n      </>\n    );\n  };\n\n  const ProfileRightbar = () => {\n    return (\n      <>\n        {user?.userName !== userCurrent?.userName && (\n          <button className=\"rightbarFollowButton\" onClick={handleClick}>\n            {followed ? \"Unfollow\" : \"Follow\"}\n            {followed ? <Remove /> : <Add />}\n          </button>\n        )}\n        <h4 className=\"rightbarTitle\">User information</h4>\n        <div className=\"rightbarInfo\">\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">City:</span>\n            <span className=\"rightbarInfoValue\">{user?.city}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">From:</span>\n            <span className=\"rightbarInfoValue\">{user?.from}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">Relationship:</span>\n            <span className=\"rightbarInfoValue\">\n              {user?.relationships === 1\n                ? \"Single\"\n                : user?.relationships === 2\n                ? \"Marry\"\n                : \"In a complicated relationship\"}\n            </span>\n          </div>\n        </div>\n        <h4 className=\"rightbarTitle\">User friends</h4>\n        <div className=\"rightbarFollowings\">\n          {friendList.map((friend) => (\n            <div key={friend._id} className=\"rightbarFollowing\">\n              <Link to={`/profile/${friend?._id}`}>\n                <img\n                  src={\n                    (friend?.profilePicture?.length &&\n                      friend?.profilePicture[0]) ||\n                    PUBLIC_FOLDER + \"no-avatar.png\"\n                  }\n                  alt=\"\"\n                  className=\"rightbarFollowingImg\"\n                />\n              </Link>\n              <div\n                className={`active ${friend?.online ? \"online\" : \"offline\"} `}\n              >\n                8 hours\n              </div>\n              {/* <TimeOffline /> */}\n              <span className=\"rightbarFollowingName\">{friend?.userName}</span>\n            </div>\n          ))}\n        </div>\n      </>\n    );\n  };\n  return (\n    <div className=\"rightbar\">\n      {user ? <ProfileRightbar /> : <HomeRightbar />}\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getDataAPI } from \"../../../api/fetchData\";\nimport { UPDATE_USER } from \"../../../redux/actions\";\nimport jwt_decode from \"jwt-decode\";\nimport { ACCESS_TOKEN } from \"../../../contants\";\n\nfunction ProtectLayOut({ children }) {\n  const [isLogin, setIslogin] = useState(false);\n  const { userCurrent } = useSelector((state) => state.auth);\n  const navigate = useNavigate();\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (userCurrent) {\n      setIslogin(true);\n      return;\n    }\n    const accessToken = localStorage.getItem(ACCESS_TOKEN)\n      ? JSON.parse(localStorage.getItem(ACCESS_TOKEN))\n      : \"\";\n    if (!accessToken) return navigate(\"/login\");\n    const { exp, userId } = jwt_decode(accessToken);\n    const date = new Date();\n    if (exp < date.getTime() / 1000 || !userId) {\n      return navigate(\"/login\");\n    }\n\n    const handleGetUser = async () => {\n      try {\n        const response = await getDataAPI(`/user?userId=${userId}`);\n\n        const { message, user } = response;\n\n        dispatch({\n          type: UPDATE_USER,\n          payload: user,\n        });\n      } catch (err) {\n        console.log(\"err\", err);\n        navigate(\"/login\");\n      }\n    };\n\n    handleGetUser();\n    setIslogin(true);\n  }, []);\n\n  return isLogin ? <>{children}</> : <></>;\n}\n\nexport default ProtectLayOut;\n","import \"../home/home.css\";\nimport \"./postPage.css\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Post from \"../../components/post/Post\";\nimport { useParams } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport { getDataAPI } from \"../../api/fetchData\";\n\nconst PostPage = () => {\n  const { postId } = useParams();\n  const [post, setPost] = useState(null);\n\n  useEffect(() => {\n    let isMount = true;\n\n    const fetchPost = async () => {\n      try {\n        const response = await getDataAPI(`/post/${postId}`);\n\n        const { post } = response;\n        if (isMount) {\n          setPost(post);\n        }\n      } catch (err) {\n        console.log(\"err\", err);\n      }\n    };\n    fetchPost();\n\n    return () => (isMount = false);\n  }, [postId]);\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"homeContainer\">\n        <Sidebar />\n        <div className=\"postPageContainer\">\n          {post && <Post post={post} className=\"postPage\" />}\n        </div>\n        <Rightbar />\n      </div>\n    </>\n  );\n};\n\nexport default PostPage;\n","import { v4 as uuidv4 } from \"uuid\";\n\n// Layouts\n\n// Pages\nimport Login from \"../pages/login/Login\";\nimport Profile from \"../pages/profile/Profile\";\nimport Register from \"../pages/register/Register\";\nimport NotFound from \"../pages/notFound/NotFound\";\nimport Home from \"../pages/home/Home\";\nimport { ProtectLayOut } from \"../components/Layout\";\nimport PostPage from \"../pages/post/PostPage\";\n\n// Public routes\nconst publicRoutes = [\n    { path: \"/*\", component: NotFound, layout: null, key: uuidv4() },\n    { path: \"/login\", component: Login, key: uuidv4(), layout: null },\n    {\n        path: \"/register\",\n        component: Register,\n        key: uuidv4(),\n        layout: null,\n    },\n];\n\nconst privateRoutes = [\n    { path: \"/\", component: Home, key: uuidv4(), layout: ProtectLayOut },\n    {\n        path: \"/messenger\",\n        component: Register,\n        key: uuidv4(),\n        layout: ProtectLayOut,\n    },\n    {\n        path: \"/profile/:id\",\n        component: Profile,\n        key: uuidv4(),\n        layout: ProtectLayOut,\n    },\n    {\n        path: \"/post/:postId\",\n        component: PostPage,\n        layout: ProtectLayOut,\n        key: uuidv4(),\n    },\n];\n\nexport { publicRoutes, privateRoutes };\n","import { CircularProgress } from \"@material-ui/core\";\nimport { useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { login } from \"../../api/authApi\";\nimport \"./login.css\";\n\nexport default function Login() {\n  const userNameRef = useRef();\n  const passwordRef = useRef();\n\n  const navigate = useNavigate();\n\n  const dispatch = useDispatch();\n\n  const { isLoading } = useSelector((state) => state.auth);\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n    dispatch(\n      login(\n        {\n          userName: userNameRef.current.value,\n          password: passwordRef.current.value,\n        },\n        navigate\n      )\n    );\n  };\n\n  return (\n    <div className=\"login\">\n      <div className=\"loginWrapper\">\n        <div className=\"loginLeft\">\n          <h3 className=\"loginLogo\">Coder Noob</h3>\n          <span className=\"loginDesc\">\n            Connect with friends and the world around you on CODE NOOB.\n          </span>\n        </div>\n        <form className=\"loginRight\" onSubmit={handleLogin}>\n          <div className=\"loginBox\">\n            <input\n              required\n              placeholder=\"User name\"\n              ref={userNameRef}\n              type=\"text\"\n              className=\"loginInput\"\n            />\n            <input\n              required\n              placeholder=\"Password\"\n              ref={passwordRef}\n              type=\"password\"\n              className=\"loginInput\"\n              minLength=\"6\"\n            />\n            <button className=\"loginButton\">\n              {isLoading ? (\n                <CircularProgress color={\"primary\"} size=\"30px\" />\n              ) : (\n                \"Log In\"\n              )}\n            </button>\n            <span className=\"loginForgot\">Forgot Password?</span>\n            <button\n              className=\"loginRegisterButton\"\n              onClick={() => navigate(\"/register\")}\n            >\n              {isLoading ? (\n                <CircularProgress color={\"primary\"} size=\"30px\" />\n              ) : (\n                \"Create a New Account\"\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Feed from \"../../components/feed/Feed\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\nimport \"./home.css\";\n\nexport default function Home() {\n  return (\n    <div className=\"wrapper\">\n      <Topbar />\n      <div className=\"homeContainer\">\n        <Sidebar />\n        <Feed />\n        <Rightbar />\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { getDataAPI, patchDataAPI } from \"../../api/fetchData\";\nimport ModalChooseImage from \"../../components/modal/ModalChooseImage\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport UpdateImage from \"../../components/UpdateImage/UpdateImage.jsx\";\nimport { PUBLIC_FOLDER } from \"../../contants\";\nimport { imageUpload, removeImage } from \"../../helpers/image\";\nimport {\n  SET_IS_ME,\n  SET_USER_PROFILE,\n  UPDATE_AVATAR_USER,\n  UPDATE_BACKGROUND_USER,\n} from \"../../redux/actions\";\nimport \"./profile.scss\";\nimport ProflieLeft from \"./ProfileLeft\";\nimport ProfileRight from \"./ProfileRight\";\n\nexport default function Profile() {\n  const { id } = useParams();\n\n  const { userCurrent } = useSelector((state) => state.auth);\n  const { userProfile } = useSelector((state) => state.profile);\n\n  const idBgc = useRef(uuidv4());\n  const idAvatar = useRef(uuidv4());\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let isMount = true;\n    if (userCurrent) {\n      if (userCurrent?._id !== id) {\n        const fetchUser = async () => {\n          try {\n            const response = await getDataAPI(`/user?userId=${id}`);\n\n            const { user } = response;\n\n            dispatch({\n              type: SET_USER_PROFILE,\n              payload: {\n                userProfile: user,\n                isFriend: user?.friends.includes(userCurrent?._id),\n              },\n            });\n          } catch (err) {\n            console.log(\"err\", err);\n          }\n        };\n        fetchUser();\n      } else {\n        if (isMount) {\n          dispatch({\n            type: SET_IS_ME,\n            payload: userCurrent,\n          });\n        }\n      }\n    }\n\n    return () => (isMount = false);\n  }, [userCurrent, id]);\n\n  const handleUpload = async (files, typeImage) => {\n    if (!files.length) return;\n\n    if (userProfile[typeImage]?.length) {\n      removeImage([userProfile[typeImage][1]]);\n    }\n\n    const images = await imageUpload(files);\n\n    const dataImage = [];\n    for (const key in images[0]) {\n      dataImage.push(images[0][key]);\n    }\n\n    const response = await patchDataAPI(`/user/update-user`, {\n      [typeImage]: dataImage,\n      userId: userProfile?._id,\n    });\n\n    dispatch({\n      type:\n        typeImage === \"coverPicture\"\n          ? UPDATE_BACKGROUND_USER\n          : UPDATE_AVATAR_USER,\n      payload: dataImage,\n    });\n  };\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"profile-container\">\n        <div\n          className=\"profile-bgc\"\n          style={{\n            backgroundImage: `url(${\n              (userProfile?.coverPicture?.length &&\n                userProfile?.coverPicture[0]) ||\n              PUBLIC_FOLDER + \"no-backgound.jpg\"\n            })`,\n          }}\n        >\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\n\n          {userProfile?._id === userCurrent?._id && (\n            <UpdateImage\n              id={idBgc.current}\n              text={`${\n                userProfile?.coverPicture?.length &&\n                userProfile?.coverPicture[0]\n                  ? \"Change\"\n                  : \"Add\"\n              } cover photo`}\n              type=\"background\"\n            />\n          )}\n        </div>\n\n        <hr className=\"separator separator--line\" />\n\n        <main>\n          <div className=\"row\">\n            <ProflieLeft idAvatar={idAvatar} />\n            <ProfileRight />\n          </div>\n        </main>\n      </div>\n\n      <ModalChooseImage\n        onSave={handleUpload}\n        width={\"100%\"}\n        multiple={false}\n        height={\"300px\"}\n        id={idBgc.current}\n        text={\"Select the background image you want to update\"}\n        typeImage=\"coverPicture\"\n      />\n\n      <ModalChooseImage\n        onSave={handleUpload}\n        multiple={false}\n        width={\"100%\"}\n        height={\"250px\"}\n        id={idAvatar.current}\n        text={\"Select the avatar image you want to update\"}\n        typeImage=\"profilePicture\"\n      />\n    </>\n  );\n}\n","import Peer from \"peerjs\";\nimport { Fragment, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Route, Routes } from \"react-router-dom\";\nimport { io } from \"socket.io-client\";\nimport ModalCall from \"./components/modalCall/ModalCall\";\nimport { SOCKET_SERVER } from \"./contants\";\nimport {\n    ADD_FRIEND,\n    ADD_USER_ONLINE,\n    REMOVE_FRIEND,\n    REMOVE_USER_OFFLINE,\n    SET_CALL,\n    SET_ELEMENT_CLICK,\n    SET_PEER,\n    SET_SOCKET,\n    SET_USERS_ONLINE\n} from \"./redux/actions\";\nimport { privateRoutes, publicRoutes } from \"./routes\";\n\n\nfunction App() {\n    const { firstConnect, socket, firstGetData, usersOnline } = useSelector(\n        (state) => state.network\n    );\n\n    const { userCurrent } = useSelector((state) => state.auth);\n    const { isCall } = useSelector((state) => state.call);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const handleClick = (e) => {\n            dispatch({\n                type: SET_ELEMENT_CLICK,\n                payload: { elClick: e.target }\n            })\n        }\n        window.addEventListener(\"click\", handleClick);\n\n        return () => window.removeEventListener(\"click\", handleClick);\n    }, []);\n\n    useEffect(() => {\n        if (!socket) return;\n\n        const handleConnectCall = (data) => {\n            const { isVideo, userSendCall, roomCallId, isCreate, conversationId } =\n                data;\n\n            dispatch({\n                type: SET_CALL,\n                payload: {\n                    isCall: true,\n                    isVideo,\n                    userSendCall,\n                    roomCallId,\n                    isCreate,\n                    isSenderCall: false,\n                    conversationId,\n                },\n            });\n        };\n\n        socket.on(\"connectCall\", handleConnectCall);\n\n        return () => {\n            socket?.off(\"handleConnectCall\", handleConnectCall);\n        };\n    }, [socket]);\n\n    useEffect(() => {\n        const peer = new Peer(undefined, {\n            host: \"/\",\n            port: 9000,\n        });\n\n        dispatch({ type: SET_PEER, payload: peer });\n    }, [dispatch]);\n\n    useEffect(() => {\n        const addUserOnline = (userLoginId) => {\n            if (usersOnline.includes(userLoginId)) {\n                return;\n            }\n            dispatch({\n                type: ADD_USER_ONLINE,\n                payload: userLoginId,\n            });\n        };\n\n        const removeUserOffline = ({ userDisconnectId }) => {\n            dispatch({\n                type: REMOVE_USER_OFFLINE,\n                payload: userDisconnectId,\n            });\n        };\n\n        if (socket) {\n            socket.on(\"friendOnline\", addUserOnline);\n            socket.on(\"friendLogout\", removeUserOffline);\n        }\n\n        return () => {\n            socket?.off(\"friendOnline\", addUserOnline);\n            socket?.off(\"friendLogout\", removeUserOffline);\n        };\n    }, [socket]);\n\n    useEffect(() => {\n        const addListFriend = (userId) => {\n            dispatch({\n                type: ADD_FRIEND,\n                payload: userId,\n            });\n        };\n\n        const removeListFriend = (userId) => {\n            dispatch({\n                type: REMOVE_FRIEND,\n                payload: userId,\n            });\n        };\n\n        if (socket) {\n            socket.on(\"addListFriend\", addListFriend);\n            socket.on(\"removeListFriend\", removeListFriend);\n        }\n\n        return () => {\n            socket?.off(\"addListFriend\", addListFriend);\n            socket?.off(\"removeListFriend\", removeListFriend);\n        };\n    }, [socket]);\n\n    useEffect(() => {\n        if (!userCurrent) return;\n\n        const handleSetUserOnline = (allUser) => {\n            if (!firstGetData) return;\n            const usersFollowOnline = userCurrent?.followings.filter((followingiD) =>\n                allUser.find((userId) => userId === followingiD)\n            );\n\n            dispatch({\n                type: SET_USERS_ONLINE,\n                payload: usersFollowOnline,\n            });\n        };\n        const socket = io(SOCKET_SERVER);\n\n        socket.emit(\"userLogin\", {\n            userId: userCurrent?._id,\n            friends: userCurrent?.friends,\n            userName: userCurrent?.userName,\n        });\n        socket.on(\"getUsers\", handleSetUserOnline);\n\n        dispatch({\n            type: SET_SOCKET,\n            payload: socket\n        });\n        return () => {\n            socket?.off(\"getUsers\", handleSetUserOnline);\n        };\n    }, [userCurrent]);\n\n\n\n    return (\n        <>\n            <Routes>\n                {publicRoutes.map((route) => {\n                    const Layout = route.layout ? route.layout : Fragment;\n\n                    const Page = route.component;\n\n                    return (\n                        <Route\n                            key={route.key}\n                            path={route.path}\n                            element={\n                                <Layout>\n                                    <Page />\n                                </Layout>\n                            }\n                        />\n                    );\n                })}\n\n                {privateRoutes.map((route) => {\n                    const Layout = route.layout ? route.layout : Fragment;\n\n                    const Page = route.component;\n\n                    return (\n                        <Route\n                            key={route.key}\n                            path={route.path}\n                            element={\n                                <Layout>\n                                    <Page />\n                                </Layout>\n                            }\n                        />\n                    );\n                })}\n            </Routes>\n\n            {isCall && <ModalCall />}\n        </>\n    );\n}\n\nexport default App;\n","import {\n    ADD_FRIEND, FOLLOW, LOADING_END, LOADING_START, LOGIN_FAILED, LOGIN_SUCCESS, REMOVE_FRIEND, UN_FOLLOW, UPDATE_AVATAR_USER, UPDATE_BACKGROUND_USER, UPDATE_USER,\n    USER_LOGOUT\n} from \"../actions\";\n\nconst initialState = {\n    userCurrent: null,\n    isLoading: false,\n    error: null,\n};\n\nconst authReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return {\n                ...initialState,\n            };\n        }\n\n        case LOADING_START: {\n            return {\n                ...state,\n                isLoading: true,\n            };\n        }\n\n        case LOADING_END: {\n            return {\n                ...state,\n                isLoading: false,\n            };\n        }\n        case LOGIN_SUCCESS: {\n            return {\n                ...state,\n                userCurrent: payload,\n                isLoading: false,\n            };\n        }\n        case LOGIN_FAILED: {\n            return {\n                ...state,\n                isLoading: false,\n                userCurrent: null,\n                error: payload,\n            };\n        }\n\n        case UPDATE_USER: {\n            return {\n                ...state,\n                userCurrent: payload,\n            };\n        }\n\n        case UN_FOLLOW: {\n            return {\n                ...state,\n                userCurrent: {\n                    ...state.userCurrent,\n                    followings: state.userCurrent.followings.filter(\n                        (idUserFollow) => idUserFollow !== payload\n                    ),\n                },\n            };\n        }\n\n        case FOLLOW: {\n            return {\n                ...state,\n                userCurrent: {\n                    ...state.userCurrent,\n                    followings: [payload, ...state.userCurrent.followings],\n                },\n            };\n        }\n\n        case UPDATE_AVATAR_USER: {\n            return {\n                ...state,\n                userCurrent: {\n                    ...state.userCurrent,\n                    profilePicture: [...payload],\n                },\n            };\n        }\n\n        case UPDATE_BACKGROUND_USER: {\n            return {\n                ...state,\n                userCurrent: {\n                    ...state.userCurrent,\n                    coverPicture: [...payload],\n                },\n            };\n        }\n\n        case ADD_FRIEND: {\n            return {\n                ...state,\n                userCurrent: {\n                    ...state.userCurrent,\n                    friends: [payload, ...state.userCurrent.friends],\n                    followings: [payload, ...state.userCurrent.followings],\n                },\n            };\n        }\n\n        case REMOVE_FRIEND: {\n            return {\n                ...state,\n                userCurrent: {\n                    ...state.userCurrent,\n                    friends: state.userCurrent.friends.filter(\n                        (friendId) => friendId !== payload\n                    ),\n                },\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default authReducer;\n","import {\n    END_CALL, REFUSE_INVITE,\n    SET_ACCEPT_INVITE, SET_CALL, SET_FRIEND_INVITES, SET_IS_ANSWER,\n    SET_IS_COMPLETE, SET_USER_STREAM, USER_LOGOUT\n} from \"../actions\";\n\nconst initialState = {\n    isVideo: null,\n    isCall: null,\n    userSendCall: null,\n    userReciverCall: null,\n    isSenderCall: false,\n    isAnswer: false,\n    friendInvites: [],\n    fristLoadFriends: true,\n    isCreate: null,\n    roomCallId: null,\n    userStream: null,\n    conversationId: null,\n    isComplete: false,\n};\n\nconst networkReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case SET_IS_COMPLETE: {\n            return {\n                ...state,\n                isComplete: true,\n            };\n        }\n\n        case SET_USER_STREAM: {\n            return {\n                ...state,\n                userStream: payload,\n            };\n        }\n\n        case REFUSE_INVITE: {\n            return {\n                ...state,\n                isCreate: false,\n                isCall: false,\n                isVideo: null,\n                userSendCall: null,\n            };\n        }\n\n        case SET_ACCEPT_INVITE: {\n            return {\n                ...state,\n                isAnswer: true,\n                isCall: true,\n                isCreate: false,\n            };\n        }\n\n        case SET_FRIEND_INVITES: {\n            return {\n                ...state,\n                friendInvites: payload,\n                fristLoadFriends: false,\n            };\n        }\n\n        case SET_CALL: {\n            return {\n                ...state,\n                ...payload,\n            };\n        }\n\n        case END_CALL: {\n            const { userStream } = state;\n            if (userStream) {\n                const tracks = userStream.getTracks();\n                tracks.forEach((track) => track.stop());\n            }\n\n            return {\n                ...initialState,\n            };\n        }\n\n        case SET_IS_ANSWER: {\n            return {\n                ...state,\n                isAnswer: payload,\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default networkReducer;\n","import { addElment } from \"../../helpers\";\nimport {\n    ADD_CONVERSATION, DECREASE_NUMBER_UNREAD, INCREASE_NUMBER_UNREAD, SET_CHAT,\n    SET_CONVERSATION_CHAT, SET_IS_SHOW, SET_LIST_CONVERSATION, SET_NEW_CONVERSATION_CHAT, SET_NUMBER_UNREAD, SET_STATUS_CONVERSATION, UPDATE_CONVERSATION, UPDATE_CONVERSATION_DISPLAYS,\n    UPDATE_FRIEND_CHAT, UPDATE_LAST_MESSAGE, UPDATE_READ_CONVERSATION, UPDATE_STATUS_CONVERSATION, USER_LOGOUT\n} from \"../actions\";\n\nconst initialState = {\n    lastMessageConversation: null,\n    isChat: false,\n    number: 0,\n    conversationChat: null,\n    conversationUnReads: [],\n    listConversation: [],\n    isShowConversationPending: false,\n};\n\nconst chatReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case SET_IS_SHOW: {\n            return {\n                ...state,\n                isShowConversationPending: payload,\n            };\n        }\n\n        case UPDATE_CONVERSATION: {\n            const { conversationId, ...newInfo } = payload;\n\n            const { listConversation } = state;\n\n            return {\n                ...state,\n                listConversation: listConversation.map((conversation) =>\n                    conversation._id === conversationId\n                        ? {\n                            ...conversation,\n                            ...newInfo,\n                        }\n                        : conversation\n                ),\n            };\n        }\n\n        case UPDATE_LAST_MESSAGE: {\n            return {\n                ...state,\n                lastMessageConversation: payload,\n            };\n        }\n\n        case UPDATE_STATUS_CONVERSATION: {\n            const { conversationId, isRead } = payload;\n            return {\n                ...state,\n                statusConversations: state.statusConversations.map((conversation) =>\n                    conversation.conversationId === conversationId\n                        ? {\n                            ...conversation,\n                            isRead,\n                        }\n                        : conversation\n                ),\n            };\n        }\n\n        case SET_STATUS_CONVERSATION: {\n            return {\n                ...state,\n                statusConversations: payload,\n            };\n        }\n\n        case SET_CHAT: {\n            return {\n                ...state,\n                ...payload,\n                number: 0,\n            };\n        }\n\n        case SET_LIST_CONVERSATION: {\n            const { userId, conversations } = payload;\n\n            const conversationUnReads = [];\n            conversations.forEach((conversation) => {\n                const { reads, status, _id } = conversation;\n\n                if (status.includes(userId)) {\n                    if (!reads.includes(userId)) conversationUnReads.push(_id);\n                }\n            });\n\n            return {\n                ...state,\n                listConversation: conversations,\n                conversationUnReads,\n            };\n        }\n\n        case ADD_CONVERSATION: {\n            const { conversation } = payload;\n\n            const { listConversation } = state;\n\n            return {\n                ...state,\n                listConversation: addElment(\n                    listConversation,\n                    conversation,\n                    (array, value) => array.find((el) => el._id !== value._id)\n                ),\n            };\n        }\n\n        case UPDATE_READ_CONVERSATION: {\n            const { conversationId, userId } = payload;\n\n            return {\n                ...state,\n                conversationAccepts: state.conversationAccepts.map((conversation) =>\n                    conversation._id === conversationId\n                        ? {\n                            ...conversation,\n                            reads: [...conversation.reads, userId],\n                        }\n                        : conversation\n                ),\n                conversationDisplays: state.conversationDisplays.map((conversation) =>\n                    conversation._id === conversationId\n                        ? {\n                            ...conversation,\n                            reads: [...conversation.reads, userId],\n                        }\n                        : conversation\n                ),\n            };\n        }\n\n        case UPDATE_CONVERSATION_DISPLAYS: {\n            const isExit = state.conversationAccepts.find(\n                (conversation) => conversation?._id === payload?._id\n            );\n\n            if (isExit)\n                return {\n                    ...state,\n                };\n\n            const conversationAccepts = [payload, ...state.conversationAccepts];\n\n            const conversationPendings = state.conversationPendings.filter(\n                (conversation) => conversation?._id !== payload?._id\n            );\n\n            return {\n                ...state,\n                conversationAccepts,\n                conversationDisplays: conversationAccepts,\n                conversationPendings,\n            };\n        }\n\n        case SET_CONVERSATION_CHAT: {\n            const { conversationChat, isChangeType } = payload;\n\n            const { isShowConversationPending, listConversation } = state;\n            return {\n                ...state,\n                listConversation: listConversation.map((conversation) =>\n                    conversation._id === conversationChat._id\n                        ? conversationChat\n                        : conversation\n                ),\n                conversationChat,\n                isShowConversationPending: isChangeType\n                    ? !isShowConversationPending\n                    : isShowConversationPending,\n            };\n        }\n\n        case SET_NEW_CONVERSATION_CHAT: {\n            const { conversationChat } = payload;\n            return {\n                ...state,\n                conversationChat,\n            };\n        }\n\n        case UPDATE_FRIEND_CHAT: {\n            return {\n                ...state,\n                friendChat: {\n                    ...state.friendChat,\n                    lastLogin: payload,\n                },\n            };\n        }\n\n        case SET_NUMBER_UNREAD: {\n            return {\n                ...state,\n                number: payload,\n            };\n        }\n\n        case INCREASE_NUMBER_UNREAD: {\n            return {\n                ...state,\n                conversationUnReads: addElment(state.conversationUnReads, payload),\n            };\n        }\n\n        case DECREASE_NUMBER_UNREAD: {\n            return {\n                ...state,\n                number: state.number - 1,\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default chatReducer;\n","import {\n    UPDATE_ID_COMMENT, USER_LOGOUT\n} from \"../actions\";\n\n\nconst initialState = {\n    idComment: null,\n    idPostOpen: null\n};\n\nconst commentReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case UPDATE_ID_COMMENT: {\n            return { ...state, ...payload };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default commentReducer;\n","import { addElment } from \"../../helpers\";\nimport {\n  SET_CREATE_ROOM,\n  ADD_FRIEND_TO_ROOM,\n  REMOVE_FRIEND_TO_ROOM,\n  SET_LIST_FRIEND,\n  RESET_CREATE_ROOM,\n} from \"../actions\";\n\nconst initialState = {\n  isCreate: false,\n  friends: [],\n  friendAdds: [],\n};\n\nconst createRoomChatReducer = (state = initialState, action) => {\n  const { type, payload } = action;\n\n  switch (type) {\n    case RESET_CREATE_ROOM: {\n      return {\n        ...state,\n        ...initialState,\n      };\n    }\n\n    case SET_LIST_FRIEND: {\n      return {\n        ...state,\n        friends: payload,\n      };\n    }\n\n    case SET_CREATE_ROOM: {\n      return {\n        ...state,\n        isCreate: payload,\n      };\n    }\n\n    case ADD_FRIEND_TO_ROOM: {\n      return {\n        ...state,\n        friendAdds: addElment(state.friendAdds, payload, (array, value) =>\n          array.find((el) => el?._id === value?._id)\n        ),\n        friends: state.friends.filter((friend) => friend?._id !== payload?._id),\n      };\n    }\n\n    case REMOVE_FRIEND_TO_ROOM: {\n      return {\n        ...state,\n        friends: addElment(state.friends, payload, (array, value) =>\n          array.find((el) => el?._id === value?._id)\n        ),\n        friendAdds: state.friendAdds.filter(\n          (friend) => friend?._id !== payload?._id\n        ),\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default createRoomChatReducer;\n","import {\n    ADD_LIST_FRIEND_REQUEST, INCREASE_NUMBER_FRIEND_REQUEST, REMOVE_FRIEND_REQUEST, SET_LIST_FRIEND_REQUEST, SET_NUMBER_FRIEND_REQUEST, SET_TYPE, USER_LOGOUT\n} from \"../actions\";\n\nconst initialState = {\n    type: \"received\",\n    listFriendRequest: null,\n    number: 0,\n};\n\nconst friendRequestReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case SET_TYPE: {\n            const types = [\"received\", \"sent\"];\n            if (!types.includes(payload)) return { ...state };\n\n            return {\n                ...state,\n                type: payload,\n            };\n        }\n        case SET_LIST_FRIEND_REQUEST: {\n            return {\n                ...state,\n                listFriendRequest: payload,\n                number: payload.length,\n            };\n        }\n        case ADD_LIST_FRIEND_REQUEST: {\n            const isExit = state.listFriendRequest.find(\n                (friendRequest) => friendRequest?._id === payload?._id\n            );\n\n            if (isExit)\n                return {\n                    ...state,\n                };\n\n            return {\n                ...state,\n                listFriendRequest: [payload, ...state.listFriendRequest],\n                number: state.number + 1,\n            };\n        }\n\n        case REMOVE_FRIEND_REQUEST: {\n            return {\n                ...state,\n                listFriendRequest: state.listFriendRequest.filter(\n                    (friendRequest) => friendRequest?._id !== payload\n                ),\n                number: state.number - 1,\n            };\n        }\n\n        case INCREASE_NUMBER_FRIEND_REQUEST: {\n            return {\n                ...state,\n                number: state.number + 1,\n            };\n        }\n\n        case SET_NUMBER_FRIEND_REQUEST: {\n            return {\n                ...state,\n                number: payload,\n            };\n        }\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default friendRequestReducer;\n","import { SET_ELEMENT_CLICK } from \"../actions\";\n\nconst initialState = {\n    elClick: null\n};\n\nconst peerReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case SET_ELEMENT_CLICK: {\n            return { ...state, ...payload };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default peerReducer;\n","import { SET_FILES, ADD_FILE, REMOVE_FILE, USER_LOGOUT } from \"../actions\";\n\nconst initialState = {\n    files: [],\n};\n\nconst authReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case SET_FILES: {\n            return {\n                ...state,\n                files: payload,\n            };\n        }\n        case ADD_FILE: {\n            const isExit = state.files.find((file) => file?.uuid === payload?.uuid);\n\n            if (isExit)\n                return {\n                    ...state,\n                };\n\n            return {\n                ...state,\n                files: [payload, ...state.files],\n            };\n        }\n        case REMOVE_FILE: {\n            return {\n                ...state,\n                files: state.files.filter((file) => file?.uuid !== payload),\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default authReducer;\n","import { addElment } from \"../../helpers\";\nimport {\n    ADD_USER_ONLINE,\n    REMOVE_USER_OFFLINE,\n    RESET_NETWORK, SET_SOCKET,\n    SET_USERS_ONLINE, USER_LOGOUT\n} from \"../actions\";\n\nconst initialState = {\n    firstConnect: true,\n    socket: null,\n    usersOnline: [],\n    firstGetData: true,\n};\n\nconst networkReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case RESET_NETWORK: {\n            return {\n                ...initialState,\n            };\n        }\n\n        case SET_SOCKET: {\n            return {\n                ...state,\n                socket: payload,\n                firstConnect: false,\n            };\n        }\n\n        case SET_USERS_ONLINE: {\n            return {\n                ...state,\n                usersOnline: payload ? payload : [],\n                firstGetData: false,\n            };\n        }\n\n        case ADD_USER_ONLINE: {\n            return {\n                ...state,\n                usersOnline: addElment(state.usersOnline, payload),\n            };\n        }\n\n        case REMOVE_USER_OFFLINE: {\n            return {\n                ...state,\n                usersOnline: state.usersOnline.filter((user) => user !== payload),\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default networkReducer;\n","import {\n    ADD_NOTIFICATION, ADD_NOTIFICATION_DISPLAY, DECREASE_NUMBER_NOTIFICATION_UNREAD, INCREASE_NUMBER_NOTIFICATION_UNREAD, REMOVE_ALL_NOTIFICATION, REMOVE_NOTIFICATION, SET_LIST_NOTIFICATION, SET_NOTIFICATIONs_DISPLAY, SET_NUMBER_NOTIFICATION_UNREAD, SET_SHOW_NOTIFICATION,\n    SET_SHOW_NOTIFICATION_MENU, SET_TYPE_NOTIFICATION, UPDATE_LIST_CONVERSATION, USER_LOGOUT\n} from \"../actions\";\n\nimport { addElment } from \"../../helpers\";\n\nconst initialState = {\n    isShow: false,\n    isShowMenu: false,\n    number: 0,\n    listNotifycation: null,\n    notificationDisplays: null,\n    type: \"all\",\n};\n\nconst chatReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case SET_SHOW_NOTIFICATION: {\n            return {\n                ...state,\n                isShow: payload,\n                number: 0,\n            };\n        }\n\n        case SET_LIST_NOTIFICATION: {\n            return {\n                ...state,\n                listNotifycation: payload,\n                notificationDisplays: payload,\n            };\n        }\n\n        case SET_NUMBER_NOTIFICATION_UNREAD: {\n            return {\n                ...state,\n                number: payload,\n            };\n        }\n\n        case INCREASE_NUMBER_NOTIFICATION_UNREAD: {\n            return {\n                ...state,\n                number: state.number + 1,\n            };\n        }\n\n        case DECREASE_NUMBER_NOTIFICATION_UNREAD: {\n            return {\n                ...state,\n                number: state.number - 1,\n            };\n        }\n\n        case ADD_NOTIFICATION: {\n            return {\n                ...state,\n                listNotifycation: addElment(\n                    state.listNotifycation,\n                    payload,\n                    (array, payload) => array.find((el) => el?._id === payload?._id)\n                ),\n            };\n        }\n\n        case ADD_NOTIFICATION_DISPLAY: {\n            return {\n                ...state,\n                notificationDisplays: addElment(\n                    state.notificationDisplays,\n                    payload,\n                    (array, payload) => array.find((el) => el?._id === payload?._id)\n                ),\n            };\n        }\n\n        case REMOVE_NOTIFICATION: {\n            return {\n                ...state,\n                listNotifycation: state.listNotifycation.filter(\n                    (notification) => notification?._id !== payload\n                ),\n                notificationDisplays: state.notificationDisplays.filter(\n                    (notification) => notification?._id !== payload\n                ),\n            };\n        }\n\n        case SET_NOTIFICATIONs_DISPLAY: {\n            return {\n                ...state,\n                notificationDisplays: payload,\n            };\n        }\n\n        case SET_TYPE_NOTIFICATION: {\n            const types = [\"all\", \"read\", \"unread\"];\n\n            if (!types.includes(payload)) return { ...state };\n\n            return {\n                ...state,\n                type: payload,\n            };\n        }\n\n        case REMOVE_ALL_NOTIFICATION: {\n            return {\n                ...state,\n                listNotifycation: [],\n                notificationDisplays: [],\n            };\n        }\n\n        case UPDATE_LIST_CONVERSATION: {\n            return {\n                ...state,\n                listNotifycation: state.listNotifycation.map((el) =>\n                    el?._id === payload?._id ? payload : el\n                ),\n                notificationDisplays: state.notificationDisplays.map((el) =>\n                    el?._id === payload?._id ? payload : el\n                ),\n            };\n        }\n\n        case SET_SHOW_NOTIFICATION_MENU: {\n            return {\n                ...state,\n                isShowMenu: !state.isShowMenu,\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default chatReducer;\n","import { SET_PEER, USER_LOGOUT } from \"../actions\";\n\nconst initialState = null;\n\nconst peerReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case SET_PEER: {\n            return payload;\n        }\n\n        case USER_LOGOUT: {\n            return null;\n        }\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default peerReducer;\n","import {\n    LOADING_POST_END, UPDATE_INFO_GET_POST, USER_LOGOUT\n} from \"../actions\";\n\nconst initialState = {\n    isLoadingPost: true,\n    limit: 5,\n    skip: 0,\n    isMaxPost: false\n};\n\nconst postReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case UPDATE_INFO_GET_POST: {\n            return { ...state, ...payload };\n        }\n\n\n        case LOADING_POST_END: {\n            return { ...state, isLoadingPost: false };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default postReducer;\n","import { SET_IS_ME, SET_STATUS_FRIEND, SET_USER_PROFILE, USER_LOGOUT } from \"../actions\";\n\n\nconst initialState = {\n    isFriend: null,\n    userProfile: null,\n    isMe: false,\n};\n\nconst chatReducer = (state = initialState, action) => {\n    const { type, payload } = action;\n\n    switch (type) {\n        case USER_LOGOUT: {\n            return { ...initialState };\n        }\n        case SET_STATUS_FRIEND: {\n            return {\n                ...state,\n                isFriend: payload,\n            };\n        }\n\n        case SET_USER_PROFILE: {\n            const { userProfile, isFriend } = payload;\n            return {\n                ...state,\n                userProfile,\n                isFriend,\n            };\n        }\n\n        case SET_IS_ME: {\n            return {\n                ...state,\n                isMe: true,\n                userProfile: payload,\n            };\n        }\n\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default chatReducer;\n","import authReducer from \"./authReducer\";\nimport callReducer from \"./callReducer\";\nimport chatReducer from \"./chatReducer\";\nimport commentReducer from \"./commentReducer\";\nimport createRoomChatReducer from \"./createRoomChatReducer\";\nimport friendRequestReducer from \"./friendRequestReducer\";\nimport globalReducer from \"./globalReducer\";\nimport messageReducer from \"./messageReducer\";\nimport networkReducer from \"./networkReducer\";\nimport notifycationReducer from \"./notifycationReducer\";\nimport peerReducer from \"./peerReducer\";\nimport postReducer from \"./postReducer\";\nimport profileReducer from \"./profileReducer\";\n\nconst rootReducer = (state = {}, action) => ({\n    auth: authReducer(state.auth, action),\n    global: globalReducer(state.global, action),\n    post: postReducer(state.post, action),\n    comment: commentReducer(state.comment, action),\n    chat: chatReducer(state.chat, action),\n    friendRequest: friendRequestReducer(state.friendRequest, action),\n    message: messageReducer(state.message, action),\n    network: networkReducer(state.network, action),\n    notification: notifycationReducer(state.notification, action),\n    profile: profileReducer(state.profile, action),\n    peer: peerReducer(state.peer, action),\n    call: callReducer(state.call, action),\n    createRoomChat: createRoomChatReducer(state.createRoomChat, action),\n});\n\nexport default rootReducer;\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers/index\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\n\nconst composeEnhancers = composeWithDevTools(applyMiddleware(thunk));\n\nexport default createStore(rootReducer, composeEnhancers);\n","import \"./GlobalStyles.scss\";\n\nconst GlobalStyles = ({ children }) => {\n  return children;\n};\n\nexport default GlobalStyles;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport App from \"./App\";\nimport store from \"./redux/store\";\n\nimport GlobalStyles from \"./components/GlobalStyles\";\nimport \"./index.css\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <React.StrictMode>\n            <BrowserRouter>\n                <GlobalStyles>\n                    <App />\n                </GlobalStyles>\n            </BrowserRouter>\n            <ToastContainer />\n        </React.StrictMode>\n    </Provider>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}